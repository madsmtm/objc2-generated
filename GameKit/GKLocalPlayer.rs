//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
#[cfg(feature = "objc2-app-kit")]
#[cfg(target_os = "macos")]
use objc2_app_kit::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// The local player who signs in to Game Center on the device running the game.
    ///
    /// ## Overview
    ///
    /// Only one player can sign in to Game Center on a device at a time and that player is the _local player_. Before you can start a game that uses GameKit features, verify that the local player signs in to their Game Center account.
    ///
    /// You set the handler of the local player shared instance using the [`authenticateHandler`](https://developer.apple.com/documentation/gamekit/gklocalplayer/authenticatehandler) property. Then implement this method to handle the multiple times GameKit invokes it during the sign-in process. If the local player needs to create an account or sign in, GameKit provides a view controller that you present to the local player. If the local player successfully signs in, determine whether they have any account restrictions and adjust your game accordingly. For more information about the initialization of the local player, see [Authenticating a player](https://developer.apple.com/documentation/gamekit/authenticating-a-player).
    ///
    /// After the local player signs in, their account data and GameKit features are available. You can display the local player’s nickname and avatar, access their recent players and friends, and load their leaderboards and achievements. You can also register a listener object that GameKit calls when the local player sends or accepts invitations to play with others.
    ///
    ///
    #[unsafe(super(GKPlayer, GKBasePlayer, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
    pub struct GKLocalPlayer;
);

#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
extern_conformance!(
    unsafe impl NSCopying for GKLocalPlayer {}
);

#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
unsafe impl CopyingHelper for GKLocalPlayer {
    type Result = Self;
}

#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
extern_conformance!(
    unsafe impl NSObjectProtocol for GKLocalPlayer {}
);

#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
impl GKLocalPlayer {
    extern_methods!(
        /// Obtain the primary GKLocalPlayer object.
        /// The player is only available for offline play until logged in.
        /// A temporary player is created if no account is set up.
        #[unsafe(method(local))]
        #[unsafe(method_family = none)]
        pub unsafe fn local() -> Retained<GKLocalPlayer>;

        #[unsafe(method(localPlayer))]
        #[unsafe(method_family = none)]
        pub unsafe fn localPlayer() -> Retained<GKLocalPlayer>;

        /// Authentication state
        #[unsafe(method(isAuthenticated))]
        #[unsafe(method_family = none)]
        pub unsafe fn isAuthenticated(&self) -> bool;

        /// Indicates if a player is under age
        #[unsafe(method(isUnderage))]
        #[unsafe(method_family = none)]
        pub unsafe fn isUnderage(&self) -> bool;

        /// A Boolean value that declares whether or not multiplayer gaming is restricted on this device.
        #[unsafe(method(isMultiplayerGamingRestricted))]
        #[unsafe(method_family = none)]
        pub unsafe fn isMultiplayerGamingRestricted(&self) -> bool;

        /// A Boolean value that declares whether personalized communication is restricted on this device. If it is restricted, the player will not be able to read or write personalized messages on game invites, challenges, or enable voice communication in multiplayer games.  Note: this value will always be true when isUnderage is true.
        #[unsafe(method(isPersonalizedCommunicationRestricted))]
        #[unsafe(method_family = none)]
        pub unsafe fn isPersonalizedCommunicationRestricted(&self) -> bool;

        #[cfg(feature = "block2")]
        /// Asynchronously load the recent players list as an array of GKPlayer.  A recent player is someone that you have played a game with or is a legacy game center friend.  Calls completionHandler when finished. Error will be nil on success.
        /// Possible reasons for error:
        /// 1. Communications problem
        /// 2. Unauthenticated player
        #[unsafe(method(loadRecentPlayersWithCompletionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn loadRecentPlayersWithCompletionHandler(
            &self,
            completion_handler: Option<
                &block2::DynBlock<dyn Fn(*mut NSArray<GKPlayer>, *mut NSError)>,
            >,
        );

        #[cfg(feature = "block2")]
        /// Asynchronously load the challengable friends list as an array of GKPlayer.  A challengable player is a friend player with friend level FL1 and FL2.  Calls completionHandler when finished. Error will be nil on success.
        /// Possible reasons for error:
        /// 1. Communications problem
        /// 2. Unauthenticated player
        #[unsafe(method(loadChallengableFriendsWithCompletionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn loadChallengableFriendsWithCompletionHandler(
            &self,
            completion_handler: Option<
                &block2::DynBlock<dyn Fn(*mut NSArray<GKPlayer>, *mut NSError)>,
            >,
        );

        #[cfg(feature = "block2")]
        /// Set the default leaderboard for the current game
        /// Possible reasons for error:
        /// 1. Communications problem
        /// 2. Unauthenticated player
        /// 3. Leaderboard not present
        #[unsafe(method(setDefaultLeaderboardIdentifier:completionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setDefaultLeaderboardIdentifier_completionHandler(
            &self,
            leaderboard_identifier: &NSString,
            completion_handler: Option<&block2::DynBlock<dyn Fn(*mut NSError)>>,
        );

        #[cfg(feature = "block2")]
        /// Load the default leaderboard identifier for the local player
        /// Possible reasons for error:
        /// 1. Communications problem
        /// 2. Unauthenticated player
        /// 3. Leaderboard not present
        #[unsafe(method(loadDefaultLeaderboardIdentifierWithCompletionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn loadDefaultLeaderboardIdentifierWithCompletionHandler(
            &self,
            completion_handler: Option<&block2::DynBlock<dyn Fn(*mut NSString, *mut NSError)>>,
        );

        #[cfg(feature = "block2")]
        /// Generates a signature allowing 3rd party server to authenticate the GKLocalPlayer
        /// Possible reasons for error:
        /// 1. Communications problem
        /// 2. Unauthenticated player
        #[unsafe(method(fetchItemsForIdentityVerificationSignature:))]
        #[unsafe(method_family = none)]
        pub unsafe fn fetchItemsForIdentityVerificationSignature(
            &self,
            completion_handler: Option<
                &block2::DynBlock<dyn Fn(*mut NSURL, *mut NSData, *mut NSData, u64, *mut NSError)>,
            >,
        );
    );
}

/// Methods declared on superclass `GKPlayer`.
#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
impl GKLocalPlayer {
    extern_methods!(
        #[unsafe(method(anonymousGuestPlayerWithIdentifier:))]
        #[unsafe(method_family = none)]
        pub unsafe fn anonymousGuestPlayerWithIdentifier(
            guest_identifier: &NSString,
        ) -> Retained<Self>;
    );
}

/// Methods declared on superclass `NSObject`.
#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
impl GKLocalPlayer {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}

extern_protocol!(
    /// A protocol that handles events for Game Center players.
    ///
    /// ## Overview
    ///
    /// Adopt the [`GKLocalPlayerListener`](https://developer.apple.com/documentation/gamekit/gklocalplayerlistener) protocol to listen for and handle a variety of Game Center events for player accounts instead of the individual [`GKChallengeListener`](https://developer.apple.com/documentation/gamekit/gkchallengelistener), [`GKInviteEventListener`](https://developer.apple.com/documentation/gamekit/gkinviteeventlistener), [`GKSavedGameListener`](https://developer.apple.com/documentation/gamekit/gksavedgamelistener), and [`GKTurnBasedEventListener`](https://developer.apple.com/documentation/gamekit/gkturnbasedeventlistener) protocols.
    ///
    ///
    #[cfg(all(
        feature = "GKEventListener",
        feature = "GKGameActivityListener",
        feature = "GKMatchmaker",
        feature = "GKSavedGameListener",
        feature = "GKTurnBasedMatch"
    ))]
    pub unsafe trait GKLocalPlayerListener:
        GKChallengeListener
        + GKGameActivityListener
        + GKInviteEventListener
        + GKTurnBasedEventListener
        + GKSavedGameListener
    {
    }
);

/// GKLocalPlayerEvents.
#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
impl GKLocalPlayer {
    extern_methods!(
        #[cfg(all(
            feature = "GKEventListener",
            feature = "GKGameActivityListener",
            feature = "GKMatchmaker",
            feature = "GKSavedGameListener",
            feature = "GKTurnBasedMatch"
        ))]
        /// A single listener may be registered once. Registering multiple times results in undefined behavior. The registered listener will receive callbacks for any selector it responds to.
        #[unsafe(method(registerListener:))]
        #[unsafe(method_family = none)]
        pub unsafe fn registerListener(&self, listener: &ProtocolObject<dyn GKLocalPlayerListener>);

        #[cfg(all(
            feature = "GKEventListener",
            feature = "GKGameActivityListener",
            feature = "GKMatchmaker",
            feature = "GKSavedGameListener",
            feature = "GKTurnBasedMatch"
        ))]
        #[unsafe(method(unregisterListener:))]
        #[unsafe(method_family = none)]
        pub unsafe fn unregisterListener(
            &self,
            listener: &ProtocolObject<dyn GKLocalPlayerListener>,
        );

        #[unsafe(method(unregisterAllListeners))]
        #[unsafe(method_family = none)]
        pub unsafe fn unregisterAllListeners(&self);
    );
}

extern "C" {
    /// A notification that posts after GameKit initializes the local player.
    ///
    /// ## Discussion
    ///
    /// The object property for this notification is a `GKLocalPlayer` object. Passing `nil` provides standard Notification Center behavior, which is to receive the notification for any object.
    ///
    ///
    /// Notification will be posted whenever authentication status changes.
    pub static GKPlayerAuthenticationDidChangeNotificationName: &'static NSNotificationName;
}

/// Deprecated.
#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
impl GKLocalPlayer {
    extern_methods!(
        #[cfg(feature = "block2")]
        #[deprecated]
        #[unsafe(method(setDefaultLeaderboardCategoryID:completionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setDefaultLeaderboardCategoryID_completionHandler(
            &self,
            category_id: Option<&NSString>,
            completion_handler: Option<&block2::DynBlock<dyn Fn(*mut NSError)>>,
        );

        #[cfg(feature = "block2")]
        #[deprecated]
        #[unsafe(method(loadDefaultLeaderboardCategoryIDWithCompletionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn loadDefaultLeaderboardCategoryIDWithCompletionHandler(
            &self,
            completion_handler: Option<&block2::DynBlock<dyn Fn(*mut NSString, *mut NSError)>>,
        );

        #[cfg(feature = "block2")]
        #[deprecated]
        #[unsafe(method(authenticateWithCompletionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn authenticateWithCompletionHandler(
            &self,
            completion_handler: Option<&block2::DynBlock<dyn Fn(*mut NSError)>>,
        );

        #[cfg(feature = "block2")]
        #[deprecated]
        #[unsafe(method(loadFriendPlayersWithCompletionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn loadFriendPlayersWithCompletionHandler(
            &self,
            completion_handler: Option<
                &block2::DynBlock<dyn Fn(*mut NSArray<GKPlayer>, *mut NSError)>,
            >,
        );

        #[cfg(feature = "block2")]
        /// Generates a signature allowing 3rd party server to authenticate the GKLocalPlayer
        /// Possible reasons for error:
        /// 1. Communications problem
        /// 2. Unauthenticated player
        #[deprecated]
        #[unsafe(method(generateIdentityVerificationSignatureWithCompletionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn generateIdentityVerificationSignatureWithCompletionHandler(
            &self,
            completion_handler: Option<
                &block2::DynBlock<dyn Fn(*mut NSURL, *mut NSData, *mut NSData, u64, *mut NSError)>,
            >,
        );
    );
}

/// Obsoleted.
#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
impl GKLocalPlayer {
    extern_methods!(
        #[cfg(feature = "block2")]
        /// This method is obsolete. It will never be invoked and its implementation does nothing**
        #[deprecated]
        #[unsafe(method(loadFriendsWithCompletionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn loadFriendsWithCompletionHandler(
            &self,
            completion_handler: Option<
                &block2::DynBlock<dyn Fn(*mut NSArray<NSString>, *mut NSError)>,
            >,
        );

        /// This property is obsolete. **
        #[deprecated]
        #[unsafe(method(friends))]
        #[unsafe(method_family = none)]
        pub unsafe fn friends(&self) -> Option<Retained<NSArray<NSString>>>;
    );
}

/// Constants that indicate if the local player grants access to their friends list.
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct GKFriendsAuthorizationStatus(pub NSInteger);
impl GKFriendsAuthorizationStatus {
    /// The player hasn’t choosen whether your game may access their friends list.
    #[doc(alias = "GKFriendsAuthorizationStatusNotDetermined")]
    pub const NotDetermined: Self = Self(0);
    /// Access to the player’s list of friends restricted.
    ///
    /// ## Discussion
    ///
    /// While GameKit restricts access to a player’s friends’ data, the player can’t change the authorization status. If you previously loaded the player’s friends, delete the friends’ data from your game.
    ///
    ///
    #[doc(alias = "GKFriendsAuthorizationStatusRestricted")]
    pub const Restricted: Self = Self(1);
    /// Access to the player’s friends’ data denied.
    ///
    /// ## Discussion
    ///
    /// The local player can deny access to the friends list by disabling friends in the Game Center settings.
    ///
    ///
    #[doc(alias = "GKFriendsAuthorizationStatusDenied")]
    pub const Denied: Self = Self(2);
    /// The player authorized your game to access their list of friends.
    ///
    /// ## Discussion
    ///
    /// If the [`loadFriendsAuthorizationStatus:`](https://developer.apple.com/documentation/gamekit/gklocalplayer/loadfriendsauthorizationstatus(_:)) method returns `GKFriendsAuthorizationStatus.authorized`, the [`loadFriendsWithIdentifiers:completionHandler:`](https://developer.apple.com/documentation/gamekit/gklocalplayer/loadfriends(identifiedby:completionhandler:)) method passes the friends list to the completion handler.
    ///
    ///
    #[doc(alias = "GKFriendsAuthorizationStatusAuthorized")]
    pub const Authorized: Self = Self(3);
}

unsafe impl Encode for GKFriendsAuthorizationStatus {
    const ENCODING: Encoding = NSInteger::ENCODING;
}

unsafe impl RefEncode for GKFriendsAuthorizationStatus {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// FriendsList.
#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
impl GKLocalPlayer {
    extern_methods!(
        #[cfg(feature = "block2")]
        #[unsafe(method(loadFriendsAuthorizationStatus:))]
        #[unsafe(method_family = none)]
        pub unsafe fn loadFriendsAuthorizationStatus(
            &self,
            completion_handler: &block2::DynBlock<
                dyn Fn(GKFriendsAuthorizationStatus, *mut NSError),
            >,
        );

        #[cfg(feature = "block2")]
        #[unsafe(method(loadFriends:))]
        #[unsafe(method_family = none)]
        pub unsafe fn loadFriends(
            &self,
            completion_handler: &block2::DynBlock<dyn Fn(*mut NSArray<GKPlayer>, *mut NSError)>,
        );

        #[cfg(feature = "block2")]
        #[unsafe(method(loadFriendsWithIdentifiers:completionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn loadFriendsWithIdentifiers_completionHandler(
            &self,
            identifiers: &NSArray<NSString>,
            completion_handler: &block2::DynBlock<dyn Fn(*mut NSArray<GKPlayer>, *mut NSError)>,
        );
    );
}

/// UI.
#[cfg(all(feature = "GKBasePlayer", feature = "GKPlayer"))]
impl GKLocalPlayer {
    extern_methods!(
        #[cfg(all(feature = "block2", feature = "objc2-app-kit"))]
        #[cfg(target_os = "macos")]
        /// # Safety
        ///
        /// - The returned block's argument 1 must be a valid pointer or null.
        /// - The returned block's argument 2 must be a valid pointer or null.
        #[unsafe(method(authenticateHandler))]
        #[unsafe(method_family = none)]
        pub unsafe fn authenticateHandler(
            &self,
            mtm: MainThreadMarker,
        ) -> *mut block2::DynBlock<dyn Fn(*mut NSViewController, *mut NSError)>;

        #[cfg(all(feature = "block2", feature = "objc2-app-kit"))]
        #[cfg(target_os = "macos")]
        /// Setter for [`authenticateHandler`][Self::authenticateHandler].
        ///
        /// This is [copied][objc2_foundation::NSCopying::copy] when set.
        #[unsafe(method(setAuthenticateHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setAuthenticateHandler(
            &self,
            authenticate_handler: Option<
                &block2::DynBlock<dyn Fn(*mut NSViewController, *mut NSError)>,
            >,
        );

        /// observable property that becomes true when the friend request view controller is displayed.  It becomes false when it is dismissed
        #[unsafe(method(isPresentingFriendRequestViewController))]
        #[unsafe(method_family = none)]
        pub unsafe fn isPresentingFriendRequestViewController(&self) -> bool;

        #[cfg(feature = "objc2-app-kit")]
        #[cfg(target_os = "macos")]
        /// presentFriendRequestCreatorFromViewController:
        ///
        /// Discussion:
        /// iOS only. When invoked, a Messages sheet will be presented on the viewController passed in, using the existing flow of presentation on behalf of an application.
        /// If an error is returned, control are returned directly to the application, without presentation.
        ///
        /// Possible reasons for error:
        /// - The local player user account is not allowed to add friends
        /// - The device is not allowing outgoing traffic at the time of the operation
        #[unsafe(method(presentFriendRequestCreatorFromViewController:error:_))]
        #[unsafe(method_family = none)]
        pub unsafe fn presentFriendRequestCreatorFromViewController_error(
            &self,
            view_controller: &NSViewController,
        ) -> Result<(), Retained<NSError>>;

        #[cfg(feature = "objc2-app-kit")]
        #[cfg(target_os = "macos")]
        /// presentFriendRequestCreatorFromWindow:
        ///
        /// Discussion:
        /// MacOS only. When invoked, if no error is encountered, the caller application is backgrounded and the 'Messages' application is launched/foregrounded, with a formatted friend request message.
        /// If an error occurs, controls are returned to the caller application, with an error describing the error.
        ///
        /// Possible reasons for error:
        /// - The local player user account is not allowed to add friends
        /// - The device is not allowing outgoing traffic at the time of the operation
        #[unsafe(method(presentFriendRequestCreatorFromWindow:error:_))]
        #[unsafe(method_family = none)]
        pub unsafe fn presentFriendRequestCreatorFromWindow_error(
            &self,
            window: Option<&NSWindow>,
        ) -> Result<(), Retained<NSError>>;
    );
}
