//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;

use crate::*;

/// Defines the memory and personality options for an `NSPointerFunctions` object.
///
/// ## Overview
///
/// When specifying a value, you can use only one of the options listed in Memory Options,  only one of the options listed in Personality Options, and any number of other options.
///
///
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct NSPointerFunctionsOptions(pub NSUInteger);
bitflags::bitflags! {
    impl NSPointerFunctionsOptions: NSUInteger {
/// Use strong write-barriers to backing store; use garbage-collected memory on copy-in.
///
/// ## Discussion
///
/// This is the default memory value.
///
/// As a special case, if you do not use garbage collection and specify this value in conjunction with [`NSPointerFunctionsObjectPersonality`](https://developer.apple.com/documentation/foundation/nspointerfunctions/options/objectpersonality) or [`NSPointerFunctionsObjectPointerPersonality`](https://developer.apple.com/documentation/foundation/nspointerfunctions/options/objectpointerpersonality) then the `NSPointerFunctions` object uses `retain` and `release`.
///
/// If you do not use garbage collection, and specify this value in conjunction with a valid non-object personality, it is the same as specifying [`NSPointerFunctionsMallocMemory`](https://developer.apple.com/documentation/foundation/nspointerfunctions/options/mallocmemory).
///
///
        #[doc(alias = "NSPointerFunctionsStrongMemory")]
        const StrongMemory = 0<<0;
/// Use weak read and write barriers; use garbage-collected memory on copyIn.
///
/// ## Discussion
///
/// If you do not use garbage collection, for object personalities, it will hold a non-retained object pointer.
///
///
        #[doc(alias = "NSPointerFunctionsZeroingWeakMemory")]
#[deprecated = "GC no longer supported"]
        const ZeroingWeakMemory = 1<<0;
/// Take no action when pointers are deleted.
///
/// ## Discussion
///
/// This is usually the preferred memory option for holding arbitrary pointers.
///
/// This is essentially a no-op relinquish function; the acquire function is only used for copy-in operations.  This option is unlikely a to be a good choice for objects.
///
///
        #[doc(alias = "NSPointerFunctionsOpaqueMemory")]
        const OpaqueMemory = 2<<0;
/// Use `free()` on removal, `calloc()` on copy in.
        #[doc(alias = "NSPointerFunctionsMallocMemory")]
        const MallocMemory = 3<<0;
/// Use Mach memory.
        #[doc(alias = "NSPointerFunctionsMachVirtualMemory")]
        const MachVirtualMemory = 4<<0;
/// Uses weak read and write barriers appropriate for ARC or GC. Using NSPointerFunctionsWeakMemory object references will turn to `NULL` on last release.
        #[doc(alias = "NSPointerFunctionsWeakMemory")]
        const WeakMemory = 5<<0;
/// Use `hash` and `isEqual` methods for hashing and equality comparisons, use the `description` method for a description.
///
/// ## Discussion
///
/// This is the default personality value.
///
/// As a special case, if you do not use garbage collection and specify this value in conjunction with [`NSPointerFunctionsStrongMemory`](https://developer.apple.com/documentation/foundation/nspointerfunctions/options/strongmemory) then the `NSPointerFunctions` object uses `retain` and `release`.
///
///
        #[doc(alias = "NSPointerFunctionsObjectPersonality")]
        const ObjectPersonality = 0<<8;
/// Use shifted pointer for the hash value and direct comparison to determine equality.
        #[doc(alias = "NSPointerFunctionsOpaquePersonality")]
        const OpaquePersonality = 1<<8;
/// Use shifted pointer for the hash value and direct comparison to determine equality; use the `description` method for a description.
///
/// ## Discussion
///
/// As a special case, if you do not use garbage collection and specify this value in conjunction with [`NSPointerFunctionsStrongMemory`](https://developer.apple.com/documentation/foundation/nspointerfunctions/options/strongmemory) then the `NSPointerFunctions` object uses `retain` and `release`.
///
///
        #[doc(alias = "NSPointerFunctionsObjectPointerPersonality")]
        const ObjectPointerPersonality = 2<<8;
/// Use a string hash and `strcmp`; C-string ‘`%s`’ style description.
        #[doc(alias = "NSPointerFunctionsCStringPersonality")]
        const CStringPersonality = 3<<8;
/// Use a memory hash and `memcmp` (using a size function that you must set—see [`sizeFunction`](https://developer.apple.com/documentation/foundation/nspointerfunctions/sizefunction)).
        #[doc(alias = "NSPointerFunctionsStructPersonality")]
        const StructPersonality = 4<<8;
/// Use unshifted value as hash and equality.
        #[doc(alias = "NSPointerFunctionsIntegerPersonality")]
        const IntegerPersonality = 5<<8;
/// Use the memory acquire function to allocate and copy items on input (see [`acquireFunction`](https://developer.apple.com/documentation/foundation/nspointerfunctions/acquirefunction)).
        #[doc(alias = "NSPointerFunctionsCopyIn")]
        const CopyIn = 1<<16;
    }
}

unsafe impl Encode for NSPointerFunctionsOptions {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for NSPointerFunctionsOptions {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_class!(
    /// An instance of `NSPointerFunctions` defines callout functions appropriate for managing a pointer reference held somewhere else.
    ///
    /// ## Overview
    ///
    /// The functions specified by an instance of `NSPointerFunctions` are separated into two clusters—those that define “personality” such as “object” or “C-string”, and those that describe memory management issues such as a memory deallocation function. There are constants for common personalities and memory manager selections (see `Memory and Personality Options`).
    ///
    /// [`NSHashTable`](https://developer.apple.com/documentation/foundation/nshashtable), [`NSMapTable`](https://developer.apple.com/documentation/foundation/nsmaptable), and [`NSPointerArray`](https://developer.apple.com/documentation/foundation/nspointerarray) use an `NSPointerFunctions` object to define the acquisition and retention behavior for the pointers they manage. Note, however, that not all combinations of personality and memory management behavior are valid for these collections. The pointer collection objects copy the `NSPointerFunctions` object on input and output, so you cannot usefully subclass `NSPointerFunctions`.
    ///
    /// ### Subclassing Notes
    ///
    /// `NSPointerFunctions` is not suitable for subclassing.
    ///
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct NSPointerFunctions;
);

#[cfg(feature = "NSObject")]
extern_conformance!(
    unsafe impl NSCopying for NSPointerFunctions {}
);

#[cfg(feature = "NSObject")]
unsafe impl CopyingHelper for NSPointerFunctions {
    type Result = Self;
}

extern_conformance!(
    unsafe impl NSObjectProtocol for NSPointerFunctions {}
);

impl NSPointerFunctions {
    extern_methods!(
        #[unsafe(method(initWithOptions:))]
        #[unsafe(method_family = init)]
        pub fn initWithOptions(
            this: Allocated<Self>,
            options: NSPointerFunctionsOptions,
        ) -> Retained<Self>;

        #[unsafe(method(pointerFunctionsWithOptions:))]
        #[unsafe(method_family = none)]
        pub fn pointerFunctionsWithOptions(
            options: NSPointerFunctionsOptions,
        ) -> Retained<NSPointerFunctions>;

        #[unsafe(method(hashFunction))]
        #[unsafe(method_family = none)]
        pub fn hashFunction(
            &self,
        ) -> Option<
            unsafe extern "C-unwind" fn(
                NonNull<c_void>,
                Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>,
            ) -> NSUInteger,
        >;

        /// Setter for [`hashFunction`][Self::hashFunction].
        ///
        /// # Safety
        ///
        /// `hash_function` must be implemented correctly.
        #[unsafe(method(setHashFunction:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setHashFunction(
            &self,
            hash_function: Option<
                unsafe extern "C-unwind" fn(
                    NonNull<c_void>,
                    Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>,
                ) -> NSUInteger,
            >,
        );

        #[unsafe(method(isEqualFunction))]
        #[unsafe(method_family = none)]
        pub fn isEqualFunction(
            &self,
        ) -> Option<
            unsafe extern "C-unwind" fn(
                NonNull<c_void>,
                NonNull<c_void>,
                Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>,
            ) -> Bool,
        >;

        /// Setter for [`isEqualFunction`][Self::isEqualFunction].
        ///
        /// # Safety
        ///
        /// `is_equal_function` must be implemented correctly.
        #[unsafe(method(setIsEqualFunction:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setIsEqualFunction(
            &self,
            is_equal_function: Option<
                unsafe extern "C-unwind" fn(
                    NonNull<c_void>,
                    NonNull<c_void>,
                    Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>,
                ) -> Bool,
            >,
        );

        #[unsafe(method(sizeFunction))]
        #[unsafe(method_family = none)]
        pub fn sizeFunction(
            &self,
        ) -> Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>;

        /// Setter for [`sizeFunction`][Self::sizeFunction].
        ///
        /// # Safety
        ///
        /// `size_function` must be implemented correctly.
        #[unsafe(method(setSizeFunction:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setSizeFunction(
            &self,
            size_function: Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>,
        );

        #[cfg(feature = "NSString")]
        #[unsafe(method(descriptionFunction))]
        #[unsafe(method_family = none)]
        pub fn descriptionFunction(
            &self,
        ) -> Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> *mut NSString>;

        #[cfg(feature = "NSString")]
        /// Setter for [`descriptionFunction`][Self::descriptionFunction].
        ///
        /// # Safety
        ///
        /// `description_function` must be implemented correctly.
        #[unsafe(method(setDescriptionFunction:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setDescriptionFunction(
            &self,
            description_function: Option<
                unsafe extern "C-unwind" fn(NonNull<c_void>) -> *mut NSString,
            >,
        );

        #[unsafe(method(relinquishFunction))]
        #[unsafe(method_family = none)]
        pub fn relinquishFunction(
            &self,
        ) -> Option<
            unsafe extern "C-unwind" fn(
                NonNull<c_void>,
                Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>,
            ),
        >;

        /// Setter for [`relinquishFunction`][Self::relinquishFunction].
        ///
        /// # Safety
        ///
        /// `relinquish_function` must be implemented correctly.
        #[unsafe(method(setRelinquishFunction:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setRelinquishFunction(
            &self,
            relinquish_function: Option<
                unsafe extern "C-unwind" fn(
                    NonNull<c_void>,
                    Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>,
                ),
            >,
        );

        #[unsafe(method(acquireFunction))]
        #[unsafe(method_family = none)]
        pub fn acquireFunction(
            &self,
        ) -> Option<
            unsafe extern "C-unwind" fn(
                NonNull<c_void>,
                Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>,
                Bool,
            ) -> NonNull<c_void>,
        >;

        /// Setter for [`acquireFunction`][Self::acquireFunction].
        ///
        /// # Safety
        ///
        /// `acquire_function` must be implemented correctly.
        #[unsafe(method(setAcquireFunction:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setAcquireFunction(
            &self,
            acquire_function: Option<
                unsafe extern "C-unwind" fn(
                    NonNull<c_void>,
                    Option<unsafe extern "C-unwind" fn(NonNull<c_void>) -> NSUInteger>,
                    Bool,
                ) -> NonNull<c_void>,
            >,
        );

        #[deprecated = "Garbage collection no longer supported"]
        #[unsafe(method(usesStrongWriteBarrier))]
        #[unsafe(method_family = none)]
        pub fn usesStrongWriteBarrier(&self) -> bool;

        /// Setter for [`usesStrongWriteBarrier`][Self::usesStrongWriteBarrier].
        #[deprecated = "Garbage collection no longer supported"]
        #[unsafe(method(setUsesStrongWriteBarrier:))]
        #[unsafe(method_family = none)]
        pub fn setUsesStrongWriteBarrier(&self, uses_strong_write_barrier: bool);

        #[deprecated = "Garbage collection no longer supported"]
        #[unsafe(method(usesWeakReadAndWriteBarriers))]
        #[unsafe(method_family = none)]
        pub fn usesWeakReadAndWriteBarriers(&self) -> bool;

        /// Setter for [`usesWeakReadAndWriteBarriers`][Self::usesWeakReadAndWriteBarriers].
        #[deprecated = "Garbage collection no longer supported"]
        #[unsafe(method(setUsesWeakReadAndWriteBarriers:))]
        #[unsafe(method_family = none)]
        pub fn setUsesWeakReadAndWriteBarriers(&self, uses_weak_read_and_write_barriers: bool);
    );
}

/// Methods declared on superclass `NSObject`.
impl NSPointerFunctions {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub fn new() -> Retained<Self>;
    );
}

impl DefaultRetained for NSPointerFunctions {
    #[inline]
    fn default_retained() -> Retained<Self> {
        Self::new()
    }
}
