//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;

use crate::*;

/// The constants that specify when notifications are posted.
///
/// ## Overview
///
/// These constants are used by the [`enqueueNotification:postingStyle:`](https://developer.apple.com/documentation/foundation/notificationqueue/enqueue(_:postingstyle:)) and [`enqueueNotification:postingStyle:coalesceMask:forModes:`](https://developer.apple.com/documentation/foundation/notificationqueue/enqueue(_:postingstyle:coalescemask:formodes:)) methods.
///
///
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord)]
pub struct NSPostingStyle(pub NSUInteger);
impl NSPostingStyle {
    /// The notification is posted when the run loop is idle.
    #[doc(alias = "NSPostWhenIdle")]
    pub const PostWhenIdle: Self = Self(1);
    /// The notification is posted at the end of the current notification callout or timer.
    #[doc(alias = "NSPostASAP")]
    pub const PostASAP: Self = Self(2);
    /// The notification is posted immediately after coalescing.
    #[doc(alias = "NSPostNow")]
    pub const PostNow: Self = Self(3);
}

unsafe impl Encode for NSPostingStyle {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for NSPostingStyle {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// The constants that specify how notifications are coalesced.
///
/// ## Overview
///
/// These constants are used by the [`enqueueNotification:postingStyle:coalesceMask:forModes:`](https://developer.apple.com/documentation/foundation/notificationqueue/enqueue(_:postingstyle:coalescemask:formodes:)) method.
///
///
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct NSNotificationCoalescing(pub NSUInteger);
bitflags::bitflags! {
    impl NSNotificationCoalescing: NSUInteger {
/// Do not coalesce notifications in the queue.
        #[doc(alias = "NSNotificationNoCoalescing")]
        const NoCoalescing = 0;
/// Coalesce notifications with the same name.
        #[doc(alias = "NSNotificationCoalescingOnName")]
        const CoalescingOnName = 1;
/// Coalesce notifications with the same object.
        #[doc(alias = "NSNotificationCoalescingOnSender")]
        const CoalescingOnSender = 2;
    }
}

unsafe impl Encode for NSNotificationCoalescing {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for NSNotificationCoalescing {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_class!(
    /// A notification center buffer.
    ///
    /// ## Overview
    ///
    /// Whereas a notification center distributes notifications when posted, notifications placed into the queue can be delayed until the end of the current pass through the run loop or until the run loop is idle. Duplicate notifications can be coalesced so that only one notification is sent although multiple notifications are posted.
    ///
    /// A notification queue maintains notifications in first in, first out (FIFO) order. When a notification moves to the front of the queue, the queue posts it to the notification center, which in turn dispatches the notification to all objects registered as observers.
    ///
    /// Every thread has a default notification queue, which is associated with the default notification center for the process. You can create your own notification queues and have multiple queues per center and thread.
    ///
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct NSNotificationQueue;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for NSNotificationQueue {}
);

impl NSNotificationQueue {
    extern_methods!(
        #[unsafe(method(defaultQueue))]
        #[unsafe(method_family = none)]
        pub fn defaultQueue() -> Retained<NSNotificationQueue>;

        #[cfg(feature = "NSNotification")]
        #[unsafe(method(initWithNotificationCenter:))]
        #[unsafe(method_family = init)]
        pub fn initWithNotificationCenter(
            this: Allocated<Self>,
            notification_center: &NSNotificationCenter,
        ) -> Retained<Self>;

        #[cfg(feature = "NSNotification")]
        #[unsafe(method(enqueueNotification:postingStyle:))]
        #[unsafe(method_family = none)]
        pub fn enqueueNotification_postingStyle(
            &self,
            notification: &NSNotification,
            posting_style: NSPostingStyle,
        );

        #[cfg(all(
            feature = "NSArray",
            feature = "NSNotification",
            feature = "NSObjCRuntime",
            feature = "NSString"
        ))]
        #[unsafe(method(enqueueNotification:postingStyle:coalesceMask:forModes:))]
        #[unsafe(method_family = none)]
        pub fn enqueueNotification_postingStyle_coalesceMask_forModes(
            &self,
            notification: &NSNotification,
            posting_style: NSPostingStyle,
            coalesce_mask: NSNotificationCoalescing,
            modes: Option<&NSArray<NSRunLoopMode>>,
        );

        #[cfg(feature = "NSNotification")]
        #[unsafe(method(dequeueNotificationsMatching:coalesceMask:))]
        #[unsafe(method_family = none)]
        pub fn dequeueNotificationsMatching_coalesceMask(
            &self,
            notification: &NSNotification,
            coalesce_mask: NSUInteger,
        );
    );
}

/// Methods declared on superclass `NSObject`.
impl NSNotificationQueue {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub fn new() -> Retained<Self>;
    );
}

impl DefaultRetained for NSNotificationQueue {
    #[inline]
    fn default_retained() -> Retained<Self> {
        Self::new()
    }
}
