//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// The name of a specific counter that can appear in a GPU device’s counter sets.
///
/// ## Overview
///
/// This type defines the constants that let a GPU device declare which counters it supports within a counter set. For more information, see [Confirming which counters and counter sets a GPU supports](https://developer.apple.com/documentation/metal/confirming-which-counters-and-counter-sets-a-gpu-supports).
///
///
/// Common counters that, when present, are expected to have similar meanings across
/// different implementations.
// NS_TYPED_ENUM
pub type MTLCommonCounter = NSString;

extern "C" {
    /// The common name for the counter that tracks the current time.
    pub static MTLCommonCounterTimestamp: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of tessellation patches a render pass sends to the tessellation stage.
    pub static MTLCommonCounterTessellationInputPatches: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of times a render pass calls any vertex shader.
    pub static MTLCommonCounterVertexInvocations: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of vertices a render pass sends to a post-tessellation vertex shader.
    pub static MTLCommonCounterPostTessellationVertexInvocations: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of primitives a render pass sends to the clip stage.
    pub static MTLCommonCounterClipperInvocations: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of primitives the clip stage produces during a render pass.
    pub static MTLCommonCounterClipperPrimitivesOut: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of times a render pass calls fragment shaders.
    pub static MTLCommonCounterFragmentInvocations: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of fragments a render pass sends to the visibility and blend stages.
    ///
    /// ## Discussion
    ///
    /// The render pass sends fragments that pass the scissor, depth, and stencil tests to the visibility and blend stages.
    ///
    ///
    pub static MTLCommonCounterFragmentsPassed: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of times a pass invokes any compute kernel.
    pub static MTLCommonCounterComputeKernelInvocations: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the total number of cycles the GPU uses to run a pass.
    pub static MTLCommonCounterTotalCycles: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of cycles the GPU uses to run vertex shaders during a pass.
    pub static MTLCommonCounterVertexCycles: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of cycles the GPU uses to run the tessellation stage during a pass.
    pub static MTLCommonCounterTessellationCycles: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of cycles the GPU uses to run post-tessellation vertex shaders during a pass.
    pub static MTLCommonCounterPostTessellationVertexCycles: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of cycles the GPU uses to run fragment shaders during a pass.
    pub static MTLCommonCounterFragmentCycles: &'static MTLCommonCounter;
}

extern "C" {
    /// The common name for the counter that tracks the number of cycles the GPU uses to write data to render targets during a render pass.
    pub static MTLCommonCounterRenderTargetWriteCycles: &'static MTLCommonCounter;
}

/// The name of a specific counter set that a GPU device can support.
///
/// ## Overview
///
/// This type defines the constants that let a GPU device declare which counter sets it supports.
///
/// <div class="warning">
///
/// ### Important
///  Some GPUs may only support some of the counters within a counter set.
///
///
///
/// </div>
/// For more information, see [Confirming which counters and counter sets a GPU supports](https://developer.apple.com/documentation/metal/confirming-which-counters-and-counter-sets-a-gpu-supports).
///
///
/// Common counter set names.
///
/// Each of these common counter sets has a defined structure type.  Implementations
/// may omit some of the counters from these sets.
// NS_TYPED_ENUM
pub type MTLCommonCounterSet = NSString;

extern "C" {
    /// The common name for the counter set that contains the timestamp counter.
    ///
    /// ## Discussion
    ///
    /// The [`MTLCommonCounterSetTimestamp`](https://developer.apple.com/documentation/metal/mtlcommoncounterset/timestamp) counter set contains the [`MTLCommonCounterTimestamp`](https://developer.apple.com/documentation/metal/mtlcommoncounter/timestamp) counter. Use this name to check whether a GPU device supports the corresponding counter set (see [Confirming which counters and counter sets a GPU supports](https://developer.apple.com/documentation/metal/confirming-which-counters-and-counter-sets-a-gpu-supports)).
    ///
    ///
    pub static MTLCommonCounterSetTimestamp: &'static MTLCommonCounterSet;
}

extern "C" {
    /// The common name for the counter set that contains hardware utilization measurements from various render stages.
    ///
    /// ## Discussion
    ///
    /// The stage utilization counter set contains the following counters:
    ///
    /// - [`MTLCommonCounterTotalCycles`](https://developer.apple.com/documentation/metal/mtlcommoncounter/totalcycles)
    ///
    /// - [`MTLCommonCounterVertexCycles`](https://developer.apple.com/documentation/metal/mtlcommoncounter/vertexcycles)
    ///
    /// - [`MTLCommonCounterFragmentCycles`](https://developer.apple.com/documentation/metal/mtlcommoncounter/fragmentcycles)
    ///
    /// - [`MTLCommonCounterTessellationCycles`](https://developer.apple.com/documentation/metal/mtlcommoncounter/tessellationcycles)
    ///
    /// - [`MTLCommonCounterPostTessellationVertexCycles`](https://developer.apple.com/documentation/metal/mtlcommoncounter/posttessellationvertexcycles)
    ///
    /// - [`MTLCommonCounterRenderTargetWriteCycles`](https://developer.apple.com/documentation/metal/mtlcommoncounter/rendertargetwritecycles)
    ///
    /// Use this name to check whether a GPU device supports the corresponding counter set (see [Confirming which counters and counter sets a GPU supports](https://developer.apple.com/documentation/metal/confirming-which-counters-and-counter-sets-a-gpu-supports)).
    ///
    ///
    pub static MTLCommonCounterSetStageUtilization: &'static MTLCommonCounterSet;
}

extern "C" {
    /// The common name for the counter set that contains GPU workload statistics.
    ///
    /// ## Discussion
    ///
    /// The statistics counter set contains the following counters:
    ///
    /// - [`MTLCommonCounterComputeKernelInvocations`](https://developer.apple.com/documentation/metal/mtlcommoncounter/computekernelinvocations)
    ///
    /// - [`MTLCommonCounterVertexInvocations`](https://developer.apple.com/documentation/metal/mtlcommoncounter/vertexinvocations)
    ///
    /// - [`MTLCommonCounterFragmentInvocations`](https://developer.apple.com/documentation/metal/mtlcommoncounter/fragmentinvocations)
    ///
    /// - [`MTLCommonCounterFragmentsPassed`](https://developer.apple.com/documentation/metal/mtlcommoncounter/fragmentspassed)
    ///
    /// - [`MTLCommonCounterTessellationInputPatches`](https://developer.apple.com/documentation/metal/mtlcommoncounter/tessellationinputpatches)
    ///
    /// - [`MTLCommonCounterPostTessellationVertexInvocations`](https://developer.apple.com/documentation/metal/mtlcommoncounter/posttessellationvertexinvocations)
    ///
    /// - [`MTLCommonCounterClipperInvocations`](https://developer.apple.com/documentation/metal/mtlcommoncounter/clipperinvocations)
    ///
    /// - [`MTLCommonCounterClipperPrimitivesOut`](https://developer.apple.com/documentation/metal/mtlcommoncounter/clipperprimitivesout)
    ///
    /// Use this name to check whether a GPU device supports the corresponding counter set (see [Confirming which counters and counter sets a GPU supports](https://developer.apple.com/documentation/metal/confirming-which-counters-and-counter-sets-a-gpu-supports)).
    ///
    ///
    pub static MTLCommonCounterSetStatistic: &'static MTLCommonCounterSet;
}

/// The data structure for storing the data you resolve from a timestamp counter set.
///
/// ## Overview
///
/// For steps that explain how to resolve data from a counter set, such as [`timestamp`](https://developer.apple.com/documentation/metal/mtlcounterresulttimestamp/timestamp), see [Converting a GPU’s counter data into a readable format](https://developer.apple.com/documentation/metal/converting-a-gpus-counter-data-into-a-readable-format).
///
///
#[repr(C)]
#[derive(Clone, Copy, Debug, PartialEq, Default)]
pub struct MTLCounterResultTimestamp {
    pub timestamp: u64,
}

unsafe impl Encode for MTLCounterResultTimestamp {
    const ENCODING: Encoding = Encoding::Struct("?", &[<u64>::ENCODING]);
}

unsafe impl RefEncode for MTLCounterResultTimestamp {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// The data structure for storing the data you resolve from a stage-utilization counter set.
///
/// ## Overview
///
/// For steps that explain how to resolve data from a counter set, such as [`MTLCommonCounterSetStageUtilization`](https://developer.apple.com/documentation/metal/mtlcommoncounterset/stageutilization), see [Converting a GPU’s counter data into a readable format](https://developer.apple.com/documentation/metal/converting-a-gpus-counter-data-into-a-readable-format).
///
///
#[repr(C)]
#[derive(Clone, Copy, Debug, PartialEq, Default)]
pub struct MTLCounterResultStageUtilization {
    pub totalCycles: u64,
    pub vertexCycles: u64,
    pub tessellationCycles: u64,
    pub postTessellationVertexCycles: u64,
    pub fragmentCycles: u64,
    pub renderTargetCycles: u64,
}

unsafe impl Encode for MTLCounterResultStageUtilization {
    const ENCODING: Encoding = Encoding::Struct(
        "?",
        &[
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
        ],
    );
}

unsafe impl RefEncode for MTLCounterResultStageUtilization {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// The data structure for storing the data you resolve from a statistic counter set.
///
/// ## Overview
///
/// For steps that explain how to resolve data from a counter set, such as [`MTLCommonCounterSetStatistic`](https://developer.apple.com/documentation/metal/mtlcommoncounterset/statistic), see [Converting a GPU’s counter data into a readable format](https://developer.apple.com/documentation/metal/converting-a-gpus-counter-data-into-a-readable-format).
///
///
#[repr(C)]
#[derive(Clone, Copy, Debug, PartialEq, Default)]
pub struct MTLCounterResultStatistic {
    pub tessellationInputPatches: u64,
    pub vertexInvocations: u64,
    pub postTessellationVertexInvocations: u64,
    pub clipperInvocations: u64,
    pub clipperPrimitivesOut: u64,
    pub fragmentInvocations: u64,
    pub fragmentsPassed: u64,
    pub computeKernelInvocations: u64,
}

unsafe impl Encode for MTLCounterResultStatistic {
    const ENCODING: Encoding = Encoding::Struct(
        "?",
        &[
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
            <u64>::ENCODING,
        ],
    );
}

unsafe impl RefEncode for MTLCounterResultStatistic {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_protocol!(
    /// An individual counter a GPU device lists within one of its counter sets.
    ///
    /// ## Overview
    ///
    /// You can determine which counters a GPU supports within a counter set (see [`MTLCounterSet`](https://developer.apple.com/documentation/metal/mtlcounterset)) by checking the elements of its [`counters`](https://developer.apple.com/documentation/metal/mtlcounterset/counters) property. A counter’s [`name`](https://developer.apple.com/documentation/metal/mtlcounter/name) property typically matches one of the common counter set names that [`MTLCommonCounter`](https://developer.apple.com/documentation/metal/mtlcommoncounter) defines. For more information, see [Confirming which counters and counter sets a GPU supports](https://developer.apple.com/documentation/metal/confirming-which-counters-and-counter-sets-a-gpu-supports).
    ///
    ///
    /// A descriptor for a single counter.
    pub unsafe trait MTLCounter: NSObjectProtocol + Send + Sync {
        #[unsafe(method(name))]
        #[unsafe(method_family = none)]
        fn name(&self) -> Retained<NSString>;
    }
);

extern_protocol!(
    /// A collection of individual counters a GPU device supports for a counter set.
    ///
    /// ## Overview
    ///
    /// You can determine which counter sets a GPU supports by checking an [`MTLDevice`](https://developer.apple.com/documentation/metal/mtldevice) instance’s [`counterSets`](https://developer.apple.com/documentation/metal/mtldevice/countersets) property. A counter set’s [`name`](https://developer.apple.com/documentation/metal/mtlcounterset/name) property typically matches one of the common counter set names that [`MTLCommonCounterSet`](https://developer.apple.com/documentation/metal/mtlcommoncounterset) defines. Check whether a GPU device supports a specific counter by comparing elements of the [`counters`](https://developer.apple.com/documentation/metal/mtlcounterset/counters) property with a counter’s common name that [`MTLCommonCounter`](https://developer.apple.com/documentation/metal/mtlcommoncounter) defines.
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  Some GPUs may only support some of the counters within a counter set.
    ///
    ///
    ///
    /// </div>
    /// For more information, see [Confirming which counters and counter sets a GPU supports](https://developer.apple.com/documentation/metal/confirming-which-counters-and-counter-sets-a-gpu-supports).
    ///
    ///
    /// A collection of MTLCounters that the device can capture in
    /// a single pass.
    pub unsafe trait MTLCounterSet: NSObjectProtocol + Send + Sync {
        #[unsafe(method(name))]
        #[unsafe(method_family = none)]
        fn name(&self) -> Retained<NSString>;

        /// The counters array contains all the counters that will be written
        /// when a counter sample is collected.  Counters that do not appear in this array
        /// will not be written to the resolved buffer when the samples are resolved, even if
        /// they appear in the corresponding resolved counter structure.  Instead
        /// MTLCounterErrorValue will be written in the resolved buffer.
        #[unsafe(method(counters))]
        #[unsafe(method_family = none)]
        fn counters(&self) -> Retained<NSArray<ProtocolObject<dyn MTLCounter>>>;
    }
);

extern_class!(
    /// A group of properties that configures the counter sample buffers you create with it.
    ///
    /// ## Overview
    ///
    /// To create a new counter sample buffer, create and configure an [`MTLCounterSampleBufferDescriptor`](https://developer.apple.com/documentation/metal/mtlcountersamplebufferdescriptor) instance, and then call an [`MTLDevice`](https://developer.apple.com/documentation/metal/mtldevice) instance’s [`newCounterSampleBufferWithDescriptor:error:`](https://developer.apple.com/documentation/metal/mtldevice/makecountersamplebuffer(descriptor:)) method. See [Creating a counter sample buffer to store a GPU’s counter data during a pass](https://developer.apple.com/documentation/metal/creating-a-counter-sample-buffer-to-store-a-gpus-counter-data-during-a-pass).
    ///
    /// Each new sample counter buffer inherits the values of the descriptor’s properties when you create it. You can modify a descriptor and reuse it to create other counter sample buffers, which has no effect on existing counter sample buffers.
    ///
    ///
    /// Object to represent the counter state.
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct MTLCounterSampleBufferDescriptor;
);

extern_conformance!(
    unsafe impl NSCopying for MTLCounterSampleBufferDescriptor {}
);

unsafe impl CopyingHelper for MTLCounterSampleBufferDescriptor {
    type Result = Self;
}

extern_conformance!(
    unsafe impl NSObjectProtocol for MTLCounterSampleBufferDescriptor {}
);

impl MTLCounterSampleBufferDescriptor {
    extern_methods!(
        #[unsafe(method(counterSet))]
        #[unsafe(method_family = none)]
        pub fn counterSet(&self) -> Option<Retained<ProtocolObject<dyn MTLCounterSet>>>;

        /// Setter for [`counterSet`][Self::counterSet].
        #[unsafe(method(setCounterSet:))]
        #[unsafe(method_family = none)]
        pub fn setCounterSet(&self, counter_set: Option<&ProtocolObject<dyn MTLCounterSet>>);

        #[unsafe(method(label))]
        #[unsafe(method_family = none)]
        pub fn label(&self) -> Retained<NSString>;

        /// Setter for [`label`][Self::label].
        ///
        /// This is [copied][objc2_foundation::NSCopying::copy] when set.
        #[unsafe(method(setLabel:))]
        #[unsafe(method_family = none)]
        pub fn setLabel(&self, label: &NSString);

        #[cfg(feature = "MTLResource")]
        /// MTLStorageModeShared and MTLStorageModePrivate may be used.
        #[unsafe(method(storageMode))]
        #[unsafe(method_family = none)]
        pub fn storageMode(&self) -> MTLStorageMode;

        #[cfg(feature = "MTLResource")]
        /// Setter for [`storageMode`][Self::storageMode].
        #[unsafe(method(setStorageMode:))]
        #[unsafe(method_family = none)]
        pub fn setStorageMode(&self, storage_mode: MTLStorageMode);

        /// counter sample buffer.
        #[unsafe(method(sampleCount))]
        #[unsafe(method_family = none)]
        pub fn sampleCount(&self) -> NSUInteger;

        /// Setter for [`sampleCount`][Self::sampleCount].
        ///
        /// # Safety
        ///
        /// This might not be bounds-checked.
        #[unsafe(method(setSampleCount:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setSampleCount(&self, sample_count: NSUInteger);
    );
}

/// Methods declared on superclass `NSObject`.
impl MTLCounterSampleBufferDescriptor {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub fn new() -> Retained<Self>;
    );
}

impl DefaultRetained for MTLCounterSampleBufferDescriptor {
    #[inline]
    fn default_retained() -> Retained<Self> {
        Self::new()
    }
}

extern_protocol!(
    /// A specialized memory buffer that stores a GPU’s counter set data.
    ///
    /// ## Overview
    ///
    /// Create a counter sample buffer by calling an [`MTLDevice`](https://developer.apple.com/documentation/metal/mtldevice) instance’s [`newCounterSampleBufferWithDescriptor:error:`](https://developer.apple.com/documentation/metal/mtldevice/makecountersamplebuffer(descriptor:)) method. See [Creating a counter sample buffer to store a GPU’s counter data during a pass](https://developer.apple.com/documentation/metal/creating-a-counter-sample-buffer-to-store-a-gpus-counter-data-during-a-pass).
    ///
    /// You can store a GPU device’s counter set data only with an [`MTLCounterSampleBuffer`](https://developer.apple.com/documentation/metal/mtlcountersamplebuffer) instance that you create from the same device. See [Sampling GPU data into counter sample buffers](https://developer.apple.com/documentation/metal/sampling-gpu-data-into-counter-sample-buffers) for information about storing counter sample data in a counter sample buffer.
    ///
    ///
    /// The Counter Sample Buffer contains opaque counter samples as well
    /// as state needed to request a sample from the API.
    pub unsafe trait MTLCounterSampleBuffer: NSObjectProtocol {
        #[cfg(feature = "MTLDevice")]
        /// to use the sample buffer with this device.
        #[unsafe(method(device))]
        #[unsafe(method_family = none)]
        fn device(&self) -> Retained<ProtocolObject<dyn MTLDevice>>;

        /// property of the descriptor that is used to create the sample buffer.
        #[unsafe(method(label))]
        #[unsafe(method_family = none)]
        fn label(&self) -> Retained<NSString>;

        #[unsafe(method(sampleCount))]
        #[unsafe(method_family = none)]
        fn sampleCount(&self) -> NSUInteger;

        /// Resolve the counters from the sample buffer to an NSData containing
        /// the counter values.  This may only be used with sample buffers that have
        /// MTLStorageModeShared.
        ///
        /// Parameter `range`: The range of indices in the sample buffer to resolve.
        ///
        /// Returns: The resolved samples.
        ///
        /// Samples that encountered an error during resolve will be set to
        /// MTLCounterErrorValue.
        ///
        /// # Safety
        ///
        /// `range` might not be bounds-checked.
        #[unsafe(method(resolveCounterRange:))]
        #[unsafe(method_family = none)]
        unsafe fn resolveCounterRange(&self, range: NSRange) -> Option<Retained<NSData>>;
    }
);

extern "C" {
    /// The domain for Metal counter sample buffer errors.
    /// NSErrors raised when creating a counter sample buffer.
    pub static MTLCounterErrorDomain: &'static NSErrorDomain;
}

/// The underlying error code type that indicates why a GPU driver can’t create a counter sample buffer.
/// There wasn't enough memory available to allocate the counter sample buffer.
///
///
/// Invalid parameter passed while creating counter sample buffer.
///
///
/// There was some other error in allocating the counter sample buffer.
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct MTLCounterSampleBufferError(pub NSInteger);
impl MTLCounterSampleBufferError {
    /// An error code that indicates the GPU device doesn’t have sufficient memory to create a counter sample buffer.
    #[doc(alias = "MTLCounterSampleBufferErrorOutOfMemory")]
    pub const OutOfMemory: Self = Self(0);
    /// An error code that indicates when a counter-sample buffer descriptor has at least one invalid property.
    ///
    /// ## Discussion
    ///
    /// This error applies to the [`MTLDevice`](https://developer.apple.com/documentation/metal/mtldevice) protocol’s [`newCounterSampleBufferWithDescriptor:error:`](https://developer.apple.com/documentation/metal/mtldevice/makecountersamplebuffer(descriptor:)) method and its [`MTLCounterSampleBufferDescriptor`](https://developer.apple.com/documentation/metal/mtlcountersamplebufferdescriptor) parameter.
    ///
    ///
    #[doc(alias = "MTLCounterSampleBufferErrorInvalid")]
    pub const Invalid: Self = Self(1);
    /// An error code that indicates the Metal framework has an internal problem.
    ///
    /// ## Discussion
    ///
    /// The local description contains the underlying error code. You can report the scenario that generated this error code with [Feedback Assistant](https://feedbackassistant.apple.com).
    ///
    ///
    #[doc(alias = "MTLCounterSampleBufferErrorInternal")]
    pub const Internal: Self = Self(2);
}

unsafe impl Encode for MTLCounterSampleBufferError {
    const ENCODING: Encoding = NSInteger::ENCODING;
}

unsafe impl RefEncode for MTLCounterSampleBufferError {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}
