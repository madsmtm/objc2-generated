//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::cell::UnsafeCell;
use core::ffi::*;
use core::marker::{PhantomData, PhantomPinned};
#[cfg(feature = "objc2")]
use objc2::__framework_prelude::*;

use crate::*;

#[repr(C)]
#[derive(Debug)]
pub struct OpaqueJSContextGroup {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

#[cfg(feature = "objc2")]
unsafe impl RefEncode for OpaqueJSContextGroup {
    const ENCODING_REF: Encoding =
        Encoding::Pointer(&Encoding::Struct("OpaqueJSContextGroup", &[]));
}

/// A group that associates JavaScript contexts with one another.
///
/// ## Discussion
///
/// Contexts in the same group may share and exchange JavaScript objects.
///
///
pub type JSContextGroupRef = *const OpaqueJSContextGroup;

#[repr(C)]
#[derive(Debug)]
pub struct OpaqueJSContext {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

#[cfg(feature = "objc2")]
unsafe impl RefEncode for OpaqueJSContext {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Encoding::Struct("OpaqueJSContext", &[]));
}

/// A JavaScript execution context.
///
/// ## Discussion
///
/// This holds the global object and other execution state.
///
///
pub type JSContextRef = *const OpaqueJSContext;

#[repr(C)]
#[derive(Debug)]
pub struct OpaqueJSString {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

#[cfg(feature = "objc2")]
unsafe impl RefEncode for OpaqueJSString {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Encoding::Struct("OpaqueJSString", &[]));
}

/// A UTF-16 character buffer.
///
/// ## Discussion
///
/// This is the fundamental string representation in JavaScript.
///
///
pub type JSStringRef = *mut OpaqueJSString;

#[repr(C)]
#[derive(Debug)]
pub struct OpaqueJSClass {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

#[cfg(feature = "objc2")]
unsafe impl RefEncode for OpaqueJSClass {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Encoding::Struct("OpaqueJSClass", &[]));
}

/// A JavaScript class.
///
/// ## Discussion
///
/// Use this type with [`JSObjectMake`](https://developer.apple.com/documentation/javascriptcore/jsobjectmake(_:_:_:)) to construct objects with custom behavior.
///
///
pub type JSClassRef = *mut OpaqueJSClass;

#[repr(C)]
#[derive(Debug)]
pub struct OpaqueJSPropertyNameArray {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

#[cfg(feature = "objc2")]
unsafe impl RefEncode for OpaqueJSPropertyNameArray {
    const ENCODING_REF: Encoding =
        Encoding::Pointer(&Encoding::Struct("OpaqueJSPropertyNameArray", &[]));
}

/// An array of JavaScript property names.
pub type JSPropertyNameArrayRef = *mut OpaqueJSPropertyNameArray;

#[repr(C)]
#[derive(Debug)]
pub struct OpaqueJSPropertyNameAccumulator {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

#[cfg(feature = "objc2")]
unsafe impl RefEncode for OpaqueJSPropertyNameAccumulator {
    const ENCODING_REF: Encoding =
        Encoding::Pointer(&Encoding::Struct("OpaqueJSPropertyNameAccumulator", &[]));
}

/// An ordered set of the names of a JavaScript object’s properties.
pub type JSPropertyNameAccumulatorRef = *mut OpaqueJSPropertyNameAccumulator;

/// A function that deallocates bytes that pass to a typed array constructor.
///
/// Parameters:
/// - bytes: A pointer to the bytes that originally pass to the typed array constructor.
///
/// - deallocatorContext  : A pointer to additional information to use when freeing the bytes.
///
pub type JSTypedArrayBytesDeallocator =
    Option<unsafe extern "C-unwind" fn(*mut c_void, *mut c_void)>;

#[repr(C)]
#[derive(Debug)]
pub struct OpaqueJSValue {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

#[cfg(feature = "objc2")]
unsafe impl RefEncode for OpaqueJSValue {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Encoding::Struct("OpaqueJSValue", &[]));
}

/// A JavaScript value.
///
/// ## Discussion
///
/// This is the base type for all JavaScript values, and polymorphic functions on them.
///
///
pub type JSValueRef = *const OpaqueJSValue;

extern "C-unwind" {
    /// Evaluates a string of JavaScript.
    ///
    /// Parameters:
    /// - ctx: The execution context to use.
    ///
    /// - script: A [`JSStringRef`](https://developer.apple.com/documentation/javascriptcore/jsstringref) that contains the script to evaluate.
    ///
    /// - thisObject: The object to use as `this` or `NULL` to use the global object as `this`.
    ///
    /// - sourceURL: A [`JSStringRef`](https://developer.apple.com/documentation/javascriptcore/jsstringref) that contains a URL for the script’s source file. The system only uses this when reporting exceptions. Pass `NULL` to omit source file information in exceptions.
    ///
    /// - startingLineNumber: An integer value that specifies the script’s starting line number in the file at `sourceURL`. The system only uses this when reporting exceptions.
    ///
    /// - exception: A pointer to a [`JSValueRef`](https://developer.apple.com/documentation/javascriptcore/jsvalueref) to store an exception in, if any. Pass `NULL` to discard any exception.
    ///
    ///
    /// ## Return Value
    ///
    /// The value that results from evaluating `script`, or `NULL` if the system throws an exception.
    ///
    ///
    /// Evaluates a string of JavaScript.
    ///
    /// Parameter `ctx`: The execution context to use.
    ///
    /// Parameter `script`: A JSString containing the script to evaluate.
    ///
    /// Parameter `thisObject`: The object to use as "this," or NULL to use the global object as "this."
    ///
    /// Parameter `sourceURL`: A JSString containing a URL for the script's source file. This is used by debuggers and when reporting exceptions. Pass NULL if you do not care to include source file information.
    ///
    /// Parameter `startingLineNumber`: An integer value specifying the script's starting line number in the file located at sourceURL. This is only used when reporting exceptions. The value is one-based, so the first line is line 1 and invalid values are clamped to 1.
    ///
    /// Parameter `exception`: A pointer to a JSValueRef in which to store an exception, if any. Pass NULL if you do not care to store an exception.
    ///
    /// Returns: The JSValue that results from evaluating script, or NULL if an exception is thrown.
    ///
    /// # Safety
    ///
    /// - `ctx` must be a valid pointer.
    /// - `script` must be a valid pointer.
    /// - `this_object` must be a valid pointer.
    /// - `source_url` must be a valid pointer.
    /// - `exception` must be a valid pointer.
    pub fn JSEvaluateScript(
        ctx: JSContextRef,
        script: JSStringRef,
        this_object: JSObjectRef,
        source_url: JSStringRef,
        starting_line_number: c_int,
        exception: *mut JSValueRef,
    ) -> JSValueRef;
}

extern "C-unwind" {
    /// Checks for syntax errors in a string of JavaScript.
    ///
    /// Parameters:
    /// - ctx: The execution context to use.
    ///
    /// - script: A [`JSStringRef`](https://developer.apple.com/documentation/javascriptcore/jsstringref) that contains the script to check for syntax errors.
    ///
    /// - sourceURL: A [`JSStringRef`](https://developer.apple.com/documentation/javascriptcore/jsstringref) that contains a URL for the script’s source file. The system only uses this when reporting exceptions. Pass `NULL` to omit source file information in exceptions.
    ///
    /// - startingLineNumber: An integer value that specifies the script’s starting line number in the file at `sourceURL`. The system only uses this when reporting exceptions.
    ///
    /// - exception: A pointer to a [`JSValueRef`](https://developer.apple.com/documentation/javascriptcore/jsvalueref) to store a syntax error exception in, if any. Pass `NULL` to ignore any syntax error exception.
    ///
    ///
    /// ## Return Value
    ///
    /// [`true`](https://developer.apple.com/documentation/swift/true) if the script is syntactically correct; otherwise, [`false`](https://developer.apple.com/documentation/swift/false).
    ///
    ///
    /// Checks for syntax errors in a string of JavaScript.
    ///
    /// Parameter `ctx`: The execution context to use.
    ///
    /// Parameter `script`: A JSString containing the script to check for syntax errors.
    ///
    /// Parameter `sourceURL`: A JSString containing a URL for the script's source file. This is only used when reporting exceptions. Pass NULL if you do not care to include source file information in exceptions.
    ///
    /// Parameter `startingLineNumber`: An integer value specifying the script's starting line number in the file located at sourceURL. This is only used when reporting exceptions. The value is one-based, so the first line is line 1 and invalid values are clamped to 1.
    ///
    /// Parameter `exception`: A pointer to a JSValueRef in which to store a syntax error exception, if any. Pass NULL if you do not care to store a syntax error exception.
    ///
    /// Returns: true if the script is syntactically correct, otherwise false.
    ///
    /// # Safety
    ///
    /// - `ctx` must be a valid pointer.
    /// - `script` must be a valid pointer.
    /// - `source_url` must be a valid pointer.
    /// - `exception` must be a valid pointer.
    pub fn JSCheckScriptSyntax(
        ctx: JSContextRef,
        script: JSStringRef,
        source_url: JSStringRef,
        starting_line_number: c_int,
        exception: *mut JSValueRef,
    ) -> bool;
}

extern "C-unwind" {
    /// Performs a JavaScript garbage collection.
    ///
    /// Parameters:
    /// - ctx: The execution context to use.
    ///
    ///
    /// ## Discussion
    ///
    /// The system doesn’t collect JavaScript values that are on the machine stack, are in a register, are receiving protection from [`JSValueProtect`](https://developer.apple.com/documentation/javascriptcore/jsvalueprotect(_:_:)), are the global object of an execution context, or are reachable from any such value.
    ///
    /// During JavaScript execution, you don’t have to call this function because the JavaScript engine collects garbage as necessary. The system automatically destroys JavaScript values within a context group when the last reference to the context group releases.
    ///
    ///
    /// Performs a JavaScript garbage collection.
    ///
    /// Parameter `ctx`: The execution context to use.
    ///
    /// JavaScript values that are on the machine stack, in a register,
    /// protected by JSValueProtect, set as the global object of an execution context,
    /// or reachable from any such value will not be collected.
    ///
    /// During JavaScript execution, you are not required to call this function; the
    /// JavaScript engine will garbage collect as needed. JavaScript values created
    /// within a context group are automatically destroyed when the last reference
    /// to the context group is released.
    ///
    /// # Safety
    ///
    /// `ctx` must be a valid pointer.
    pub fn JSGarbageCollect(ctx: JSContextRef);
}
