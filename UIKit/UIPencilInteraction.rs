//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
#[cfg(feature = "objc2-core-foundation")]
use objc2_core_foundation::*;
use objc2_foundation::*;

use crate::*;

/// The actions Apple Pencil can perform after a person performs a double tap or squeeze.
/// Preferred actions available to the user in Settings.
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct UIPencilPreferredAction(pub NSInteger);
impl UIPencilPreferredAction {
    /// An action that does nothing.
    ///
    /// ## Discussion
    ///
    /// The system returns this action if any of the following conditions are true:
    ///
    /// - The Apple Pencil doesn’t have a configured preferred action.
    ///
    /// - The iPad’s accessibility settings disable Apple Pencil interactions.
    ///
    ///
    /// No action, or the user has disabled pencil interactions in Accessibility settings
    #[doc(alias = "UIPencilPreferredActionIgnore")]
    pub const Ignore: Self = Self(0);
    /// An action that switches between the current tool and the eraser.
    /// Switch between the current tool and eraser
    #[doc(alias = "UIPencilPreferredActionSwitchEraser")]
    pub const SwitchEraser: Self = Self(1);
    /// An action that switches between the current tool and the last used tool.
    /// Switch between the current tool and the previously used tool
    #[doc(alias = "UIPencilPreferredActionSwitchPrevious")]
    pub const SwitchPrevious: Self = Self(2);
    /// An action that toggles the display of the color palette.
    /// Show and hide the color palette
    #[doc(alias = "UIPencilPreferredActionShowColorPalette")]
    pub const ShowColorPalette: Self = Self(3);
    /// An action that toggles the display of the selected tool’s ink attributes.
    /// Show the ink attributes palette
    #[doc(alias = "UIPencilPreferredActionShowInkAttributes")]
    pub const ShowInkAttributes: Self = Self(4);
    /// An action that toggles shows a contextual palette of markup tools, or undo and redo options if tools aren’t available.
    /// Show a contextual palette of markup tools, or undo/redo options if tools are not available
    #[doc(alias = "UIPencilPreferredActionShowContextualPalette")]
    pub const ShowContextualPalette: Self = Self(5);
    /// An action that runs a system shortcut.
    /// The user has selected a system shortcut to run
    #[doc(alias = "UIPencilPreferredActionRunSystemShortcut")]
    pub const RunSystemShortcut: Self = Self(6);
}

unsafe impl Encode for UIPencilPreferredAction {
    const ENCODING: Encoding = NSInteger::ENCODING;
}

unsafe impl RefEncode for UIPencilPreferredAction {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// Constants that describe the phases of an interaction on Apple Pencil.
/// The phase of an interaction gesture performed on the pencil.
///
/// If the gesture is discrete, the phase will be ``UIPencilInteractionPhaseEnded``
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct UIPencilInteractionPhase(pub NSUInteger);
impl UIPencilInteractionPhase {
    /// A continuous gesture on the pencil began
    #[doc(alias = "UIPencilInteractionPhaseBegan")]
    pub const Began: Self = Self(0);
    /// A continuous gesture on the pencil changed
    #[doc(alias = "UIPencilInteractionPhaseChanged")]
    pub const Changed: Self = Self(1);
    /// A continuous gesture on the pencil ended, or a discrete gesture on the pencil recognized
    #[doc(alias = "UIPencilInteractionPhaseEnded")]
    pub const Ended: Self = Self(2);
    /// A continuous gesture on the pencil was cancelled
    #[doc(alias = "UIPencilInteractionPhaseCancelled")]
    pub const Cancelled: Self = Self(3);
}

unsafe impl Encode for UIPencilInteractionPhase {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for UIPencilInteractionPhase {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_class!(
    /// An interaction that tells your app when a person double-taps or squeezes Apple Pencil.
    ///
    /// ## Overview
    ///
    /// People can interact with certain models of Apple Pencil with a double tap or squeeze. To detect the double tap or squeeze in your app, create a [`UIPencilInteraction`](https://developer.apple.com/documentation/uikit/uipencilinteraction) object with a corresponding [`delegate`](https://developer.apple.com/documentation/uikit/uipencilinteraction/delegate) object. Then, add the interaction to your app’s view. When a person double-taps or squeezes Apple Pencil, the interaction calls the delegate’s corresponding [`pencilInteraction:didReceiveTap:`](https://developer.apple.com/documentation/uikit/uipencilinteractiondelegate/pencilinteraction(_:didreceivetap:)) or [`pencilInteraction:didReceiveSqueeze:`](https://developer.apple.com/documentation/uikit/uipencilinteractiondelegate/pencilinteraction(_:didreceivesqueeze:)) method.
    ///
    /// For more information, read [Handling double taps from Apple Pencil](https://developer.apple.com/documentation/applepencil/handling-double-taps-from-apple-pencil) and [Handling squeezes from Apple Pencil](https://developer.apple.com/documentation/applepencil/handling-squeezes-from-apple-pencil).
    ///
    ///
    #[unsafe(super(NSObject))]
    #[thread_kind = MainThreadOnly]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct UIPencilInteraction;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for UIPencilInteraction {}
);

#[cfg(feature = "UIInteraction")]
extern_conformance!(
    unsafe impl UIInteraction for UIPencilInteraction {}
);

impl UIPencilInteraction {
    extern_methods!(
        /// The user’s preferred double-tap action as set in Settings app
        #[unsafe(method(preferredTapAction))]
        #[unsafe(method_family = none)]
        pub fn preferredTapAction(mtm: MainThreadMarker) -> UIPencilPreferredAction;

        /// The user’s preferred squeeze action as set in Settings app
        #[unsafe(method(preferredSqueezeAction))]
        #[unsafe(method_family = none)]
        pub fn preferredSqueezeAction(mtm: MainThreadMarker) -> UIPencilPreferredAction;

        /// The user's preference for drawing with pencil only as set in Settings app or the system tool picker
        #[unsafe(method(prefersPencilOnlyDrawing))]
        #[unsafe(method_family = none)]
        pub fn prefersPencilOnlyDrawing(mtm: MainThreadMarker) -> bool;

        /// The user's preference for if hovering with pencil should show a preview of the current drawing tool as set in Settings app
        #[unsafe(method(prefersHoverToolPreview))]
        #[unsafe(method_family = none)]
        pub fn prefersHoverToolPreview(mtm: MainThreadMarker) -> bool;

        /// Initialize an interaction and set the provided delegate
        #[unsafe(method(initWithDelegate:))]
        #[unsafe(method_family = init)]
        pub fn initWithDelegate(
            this: Allocated<Self>,
            delegate: &ProtocolObject<dyn UIPencilInteractionDelegate>,
        ) -> Retained<Self>;

        /// The interaction's delegate
        #[unsafe(method(delegate))]
        #[unsafe(method_family = none)]
        pub fn delegate(&self)
            -> Option<Retained<ProtocolObject<dyn UIPencilInteractionDelegate>>>;

        /// Setter for [`delegate`][Self::delegate].
        ///
        /// This is a [weak property][objc2::topics::weak_property].
        #[unsafe(method(setDelegate:))]
        #[unsafe(method_family = none)]
        pub fn setDelegate(
            &self,
            delegate: Option<&ProtocolObject<dyn UIPencilInteractionDelegate>>,
        );

        /// Whether the interaction is enabled or not
        #[unsafe(method(isEnabled))]
        #[unsafe(method_family = none)]
        pub fn isEnabled(&self) -> bool;

        /// Setter for [`isEnabled`][Self::isEnabled].
        #[unsafe(method(setEnabled:))]
        #[unsafe(method_family = none)]
        pub fn setEnabled(&self, enabled: bool);
    );
}

/// Methods declared on superclass `NSObject`.
impl UIPencilInteraction {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub fn new(mtm: MainThreadMarker) -> Retained<Self>;
    );
}

extern_class!(
    /// An object that describes the hover pose of Apple Pencil during an interaction like double tap or squeeze.
    ///
    /// ## Overview
    ///
    /// Use the hover pose of Apple Pencil to support more complex interactions in response to a double tap or squeeze. Information about the hover pose — such as azimuth, altitude, and hover distance — is available when a person holds a supported model of Apple Pencil close to the screen during a double tap or squeeze.
    ///
    /// The following code example shows how to use the [`location`](https://developer.apple.com/documentation/uikit/uipencilhoverpose/location) of a hover pose to present a contextual palette near the tip of Apple Pencil.
    ///
    /// ```swift
    /// func pencilInteraction(_ interaction: UIPencilInteraction,
    ///                        didReceiveSqueeze squeeze: UIPencilInteraction.Squeeze) {
    ///     let preferredAction = UIPencilInteraction.preferredSqueezeAction
    ///     
    ///     if preferredAction == .showContextualPalette, squeeze.phase == .ended {
    ///         if let anchorPoint = squeeze.hoverPose?.location {
    ///             presentContextualPalette(atLocation: anchorPoint)
    ///         }
    ///     }
    /// }
    /// ```
    ///
    ///
    /// An object that describes the hover pose of the pencil while performing a gesture on the pencil
    #[unsafe(super(NSObject))]
    #[thread_kind = MainThreadOnly]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct UIPencilHoverPose;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for UIPencilHoverPose {}
);

impl UIPencilHoverPose {
    extern_methods!(
        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new(mtm: MainThreadMarker) -> Retained<Self>;

        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[cfg(feature = "objc2-core-foundation")]
        /// The hover location of the pencil in the interaction's view while performing the associated action. If the pencil is removed from hover range during a continuous interaction,
        /// this will be the last reported location.
        #[unsafe(method(location))]
        #[unsafe(method_family = none)]
        pub fn location(&self) -> CGPoint;

        #[cfg(feature = "objc2-core-foundation")]
        /// The normalized distance from the screen of the hovering pencil. This value will be 1 at the maximum distance from the screen and will approach 0 as the pencil gets
        /// closer to the screen.
        #[unsafe(method(zOffset))]
        #[unsafe(method_family = none)]
        pub fn zOffset(&self) -> CGFloat;

        #[cfg(feature = "objc2-core-foundation")]
        /// The azimuth angle in radians of the pencil in the interaction's view while performing the associated action. Zero radians points along the positive X axis.
        #[unsafe(method(azimuthAngle))]
        #[unsafe(method_family = none)]
        pub fn azimuthAngle(&self) -> CGFloat;

        #[cfg(feature = "objc2-core-foundation")]
        /// The azimuth unit vector of the pencil in the interaction's view while performing the associated action. The unit vector points in the direction of the azimuth angle.
        #[unsafe(method(azimuthUnitVector))]
        #[unsafe(method_family = none)]
        pub fn azimuthUnitVector(&self) -> CGVector;

        #[cfg(feature = "objc2-core-foundation")]
        /// The altitude angle in radians of the pencil while performing the associated action. Zero radians indicates that the stylus is parallel to the screen surface, while `M_PI/2`
        /// radians indicates that it is normal to the screen surface.
        #[unsafe(method(altitudeAngle))]
        #[unsafe(method_family = none)]
        pub fn altitudeAngle(&self) -> CGFloat;

        #[cfg(feature = "objc2-core-foundation")]
        /// The roll angle in radians of the pencil while performing the associated action. For pencils that don't support roll, this value will be 0.
        #[unsafe(method(rollAngle))]
        #[unsafe(method_family = none)]
        pub fn rollAngle(&self) -> CGFloat;
    );
}

extern_class!(
    /// An interaction that represents a double tap on Apple Pencil.
    /// An object that describes a tap performed on the pencil
    #[unsafe(super(NSObject))]
    #[thread_kind = MainThreadOnly]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct UIPencilInteractionTap;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for UIPencilInteractionTap {}
);

impl UIPencilInteractionTap {
    extern_methods!(
        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new(mtm: MainThreadMarker) -> Retained<Self>;

        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        /// The time in seconds from system start up when this tap occured
        #[unsafe(method(timestamp))]
        #[unsafe(method_family = none)]
        pub fn timestamp(&self) -> NSTimeInterval;

        /// The hover pose of the pencil while performing a tap. Returns `nil` if the pencil was not in hover range or if hover is not supported on the device.
        #[unsafe(method(hoverPose))]
        #[unsafe(method_family = none)]
        pub fn hoverPose(&self) -> Option<Retained<UIPencilHoverPose>>;
    );
}

extern_class!(
    /// An interaction that represents a squeeze on Apple Pencil.
    /// An object that describes a squeeze performed on the pencil
    #[unsafe(super(NSObject))]
    #[thread_kind = MainThreadOnly]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct UIPencilInteractionSqueeze;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for UIPencilInteractionSqueeze {}
);

impl UIPencilInteractionSqueeze {
    extern_methods!(
        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new(mtm: MainThreadMarker) -> Retained<Self>;

        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        /// The time in seconds from system start up when this squeeze occured
        #[unsafe(method(timestamp))]
        #[unsafe(method_family = none)]
        pub fn timestamp(&self) -> NSTimeInterval;

        /// The phase of the squeeze
        #[unsafe(method(phase))]
        #[unsafe(method_family = none)]
        pub fn phase(&self) -> UIPencilInteractionPhase;

        /// The hover pose of the pencil while performing a squeeze. Returns `nil` if the pencil was not in hover range or if hover is not supported on the device.
        #[unsafe(method(hoverPose))]
        #[unsafe(method_family = none)]
        pub fn hoverPose(&self) -> Option<Retained<UIPencilHoverPose>>;
    );
}

extern_protocol!(
    /// The interface an object implements to handle double taps or squeezes a person makes on Apple Pencil.
    pub unsafe trait UIPencilInteractionDelegate: NSObjectProtocol + MainThreadOnly {
        /// Called when the user taps on the side of the pencil if the interaction's view is in a visible view hierarchy.
        ///
        /// The delegate may do anything in this method.  To perform the user's preferred tap action (as set in Settings), consult the ``preferredTapAction`` class property
        /// of ``UIPencilInteraction``.
        ///
        /// - Note: If ``pencilInteraction(_:didReceiveTap:)`` is implemented, this method will not be called.
        #[deprecated = "Use pencilInteraction(_:didReceiveTap:) instead"]
        #[optional]
        #[unsafe(method(pencilInteractionDidTap:))]
        #[unsafe(method_family = none)]
        fn pencilInteractionDidTap(&self, interaction: &UIPencilInteraction);

        /// Called when the user taps on the side of the pencil if the interaction's view is in a visible view hierarchy.
        ///
        /// The delegate may do anything in this method.  To perform the user's preferred tap action (as set in Settings), consult the ``preferredTapAction`` class property
        /// of ``UIPencilInteraction``.
        ///
        /// - Note: If both this method and the deprecated ``pencilInteractionDidTap(_:)`` are implemented, then only this method will be called.
        #[optional]
        #[unsafe(method(pencilInteraction:didReceiveTap:))]
        #[unsafe(method_family = none)]
        fn pencilInteraction_didReceiveTap(
            &self,
            interaction: &UIPencilInteraction,
            tap: &UIPencilInteractionTap,
        );

        /// Called when the user squeezes side of the pencil if the interaction's view is in a visible view hierarchy.
        ///
        /// The delegate may do anything in this method.  To perform the user's preferred squeeze action (as set in Settings), consult the ``preferredSqueezeAction`` class
        /// property of ``UIPencilInteraction``.
        #[optional]
        #[unsafe(method(pencilInteraction:didReceiveSqueeze:))]
        #[unsafe(method_family = none)]
        fn pencilInteraction_didReceiveSqueeze(
            &self,
            interaction: &UIPencilInteraction,
            squeeze: &UIPencilInteractionSqueeze,
        );
    }
);
