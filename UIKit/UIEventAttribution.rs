//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// An object that contains event attribution information for Web AdAttributionKit.
    ///
    /// ## Overview
    ///
    /// Apps use event attribution objects to send data to the browser when opening an external website that supports Web AdAttributionKit (formerly known as Private Click Measurement, or PCM). For more information on the proposed PCM web standard, see [Introducing Private Click Measurement](https://webkit.org/blog/11529/introducing-private-click-measurement-pcm/) and [Private Click Measurement Draft Community Group Report](https://privacycg.github.io/private-click-measurement/).
    ///
    /// <div class="warning">
    ///
    /// ### Note
    ///  Mac apps built with Mac Catalyst don’t support Web AdAttributionKit.
    ///
    ///
    ///
    /// </div>
    /// You can’t subclass [`UIEventAttribution`](https://developer.apple.com/documentation/uikit/uieventattribution).
    ///
    /// ### Define an endpoint
    ///
    /// In order to use Web AdAttributionKit, your app defines an `Info.plist` key called [`NSAdvertisingAttributionReportEndpoint`](https://developer.apple.com/documentation/bundleresources/information-property-list/nsadvertisingattributionreportendpoint) that contains the URL to which the browser sends event attribution data. When an externally linked website reports that a conversion has occurred, the browser forwards your app’s event attribution data to the endpoint specified in the `Info.plist`. If your app’s `Info.plist` doesn’t contain this key, the browser won’t be able to forward the Web AdAttributionKit data when a conversion occurs.
    ///
    /// Send event attribution data to the browser only when your app opens an external link as a result of a user tapping a control that sits below a [`UIEventAttributionView`](https://developer.apple.com/documentation/uikit/uieventattributionview) in the app’s view hierarchy. The event attribution view verifies that the user tapped a control. If that control doesn’t sit below an event attribution view, the system won’t send the Web AdAttributionKit data to the browser when opening the external link.
    ///
    /// ### Create an event attribution data object
    ///
    /// Here’s how you create a [`UIEventAttribution`](https://developer.apple.com/documentation/uikit/uieventattribution) object:
    ///
    /// (TODO tabnav: TabNavigator { tabs: [TabItem { title: "Swift", content: [CodeListing { syntax: Some("swift"), code: ["let adURL = URL(string: \"https://shop.example/tabletStandDeluxe.html\")!", "let eventAttribution =", "    UIEventAttribution(sourceIdentifier: 4,", "                       destinationURL: adURL,", "                       sourceDescription: \"Banner ad for Tablet Stand Deluxe.\",", "                       purchaser: \"Shop Example, Inc.\")"], metadata: None }] }, TabItem { title: "Objective-C", content: [CodeListing { syntax: Some("objc"), code: ["NSURL *adURL = [NSURL URLWithString:@\"https://shop.example/tabletStandDeluxe.html\"];", "UIEventAttribution *eventAttribution = [[UIEventAttribution alloc]", "                                        initWithSourceIdentifier:4", "                                        destinationURL:adURL", "                                        sourceDescription:@\"Banner ad for Tablet Stand Deluxe.\"", "                                        purchaser:@\"Shop Example, Inc.\"];"], metadata: None }] }] })
    /// ### Send event attribution data to the browser
    ///
    /// Once you create a [`UIEventAttribution`](https://developer.apple.com/documentation/uikit/uieventattribution) object, send it to the browser when your app opens a URL as the result of a user tap. If the external website reports a conversion within 7 days, the browser forwards the data from the [`UIEventAttribution`](https://developer.apple.com/documentation/uikit/uieventattribution) object to the specified remote server sometime between 24 and 48 hours after the conversion.
    ///
    /// There are two different ways to send event attribution data when your app opens an external link, depending on whether your app uses [`UIScene`](https://developer.apple.com/documentation/uikit/uiscene) or [`UIApplication`](https://developer.apple.com/documentation/uikit/uiapplication) for life cycle management. For more information on application life cycle management, see [Managing your app’s life cycle](https://developer.apple.com/documentation/uikit/managing-your-app-s-life-cycle).
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  The browser, and not your app, sends the event attribution data to the remote server. If the user’s selected browser doesn’t support Web AdAttributionKit, the event attribution fails even if the external website reports a conversion.
    ///
    ///
    ///
    /// </div>
    /// If your app uses [`UIScene`](https://developer.apple.com/documentation/uikit/uiscene)-based life cycle management, create a [`UISceneOpenExternalURLOptions`](https://developer.apple.com/documentation/uikit/uiscene/openexternalurloptions) object, assign the event attribution object you created to its [`UIApplicationOpenExternalURLOptionsEventAttributionKey`](https://developer.apple.com/documentation/uikit/uiapplication/openexternalurloptionskey/eventattribution) property, and call [`openURL:options:completionHandler:`](https://developer.apple.com/documentation/uikit/uiscene/open(_:options:completionhandler:)):
    ///
    /// (TODO tabnav: TabNavigator { tabs: [TabItem { title: "Swift", content: [CodeListing { syntax: Some("swift"), code: ["let sceneOpenURLOptions = UIScene.OpenExternalURLOptions()", "sceneOpenURLOptions.eventAttribution = eventAttribution", "", "self.view.window?.windowScene?.open(adURL,", "                                    options: sceneOpenURLOptions,", "                                    completionHandler: nil)"], metadata: None }] }, TabItem { title: "Objective-C", content: [CodeListing { syntax: Some("objc"), code: ["UISceneOpenExternalURLOptions *sceneOpenURLOptions = [[UISceneOpenExternalURLOptions alloc] init];", "sceneOpenURLOptions.eventAttribution = eventAttribution;", "[self.view.window.windowScene openURL:adURL", "                                options:sceneOpenURLOptions", "                    completionHandler:^(BOOL success) {", "    if (success == NO) {", "        // Handle error", "    }", "}];"], metadata: None }] }] })
    /// If your app uses [`UIApplication`](https://developer.apple.com/documentation/uikit/uiapplication)-based life cycle management, create a dictionary that contains the [`UIApplicationOpenURLOptionsEventAttributionKey`](https://developer.apple.com/documentation/uikit/uiapplication/openurloptionskey/eventattribution) key with the [`UIEventAttribution`](https://developer.apple.com/documentation/uikit/uieventattribution) object you created as its value, and call [`openURL:options:completionHandler:`](https://developer.apple.com/documentation/uikit/uiapplication/open(_:options:completionhandler:)), passing the dictionary using the `options` parameter.
    ///
    /// (TODO tabnav: TabNavigator { tabs: [TabItem { title: "Swift", content: [CodeListing { syntax: Some("swift"), code: ["let appOpenURLOptions: [UIApplication.OpenExternalURLOptionsKey : Any] = [", "    .eventAttribution: eventAttribution", "]", "UIApplication.shared.open(adURL,", "                          options: appOpenURLOptions,", "                          completionHandler: nil)"], metadata: None }] }, TabItem { title: "Objective-C", content: [CodeListing { syntax: Some("objc"), code: ["NSDictionary<NSString *, NSObject *> *appOpenURLOptions = [NSDictionary dictionaryWithObject:eventAttribution forKey:UIApplicationOpenURLOptionsEventAttributionKey];", "", "[[UIApplication sharedApplication] openURL:adURL", "                                   options:appOpenURLOptions", "                         completionHandler:^(BOOL success) {", "    if (success == NO) {", "        // Handle error", "    }", "}];"], metadata: None }] }] })
    /// ### Send event attribution data to SFSafariViewController
    ///
    /// If your app displays a web page in [`SFSafariViewController`](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller) after a person taps an ad, add a [`UIEventAttributionView`](https://developer.apple.com/documentation/uikit/uieventattributionview) subview to the ad view or control in order to measure taps. When a person taps the ad, follow these steps:
    ///
    /// 1. Create an [`SFSafariViewControllerConfiguration`](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller/configuration-swift.class) object.
    ///
    /// 2. Assign the [`UIEventAttribution`](https://developer.apple.com/documentation/uikit/uieventattribution) object you created to the [`eventAttribution`](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller/configuration-swift.class/eventattribution) property of the [`SFSafariViewControllerConfiguration`](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller/configuration-swift.class) object.
    ///
    /// 3. Initialize an [`SFSafariViewController`](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller) instance with the configuration object, and present it. [`SFSafariViewController`](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller) validates that a tap on a [`UIEventAttributionView`](https://developer.apple.com/documentation/uikit/uieventattributionview) initiated the navigation to the webpage. If not, it discards the attribution data.
    ///
    ///
    #[unsafe(super(NSObject))]
    #[thread_kind = MainThreadOnly]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct UIEventAttribution;
);

extern_conformance!(
    unsafe impl NSCopying for UIEventAttribution {}
);

unsafe impl CopyingHelper for UIEventAttribution {
    type Result = Self;
}

extern_conformance!(
    unsafe impl NSObjectProtocol for UIEventAttribution {}
);

impl UIEventAttribution {
    extern_methods!(
        /// An identifier that is associated with the source of the attribution. For example, you may choose to use this as a campaign identifier to measure the effectiveness of different advertisement campaigns.
        ///
        /// This field corresponds to `source_id` in the subsequent attribution report.
        #[unsafe(method(sourceIdentifier))]
        #[unsafe(method_family = none)]
        pub fn sourceIdentifier(&self) -> u8;

        /// The destination URL of an attribution. For example, the link opened when an advertisement is tapped.
        ///
        /// This field corresponds to `attributed_on_site` in the subsequent attribution report.
        #[unsafe(method(destinationURL))]
        #[unsafe(method_family = none)]
        pub fn destinationURL(&self) -> Retained<NSURL>;

        /// The URL to which the attribution report will be sent. You do not provide this field at creation time. Instead, you must define the URL
        /// as a string in your app's Info.plist under the `NSAdvertisingAttributionReportEndpoint` key.
        ///
        /// This field corresponds to `source_site` in the subsequent attribution report.
        #[unsafe(method(reportEndpoint))]
        #[unsafe(method_family = none)]
        pub fn reportEndpoint(&self) -> Option<Retained<NSURL>>;

        /// A high-level description of the source of the attribution. For example, this could be a description of the content of an advertisement a user taps on.
        ///
        /// The system may truncate this field if it is too long.
        #[unsafe(method(sourceDescription))]
        #[unsafe(method_family = none)]
        pub fn sourceDescription(&self) -> Retained<NSString>;

        /// The name of the party that purchased the content to be attributed. For example, this could be the name of the party that purchased the placement of an advertisement.
        ///
        /// The system may truncate this field if it is too long.
        #[unsafe(method(purchaser))]
        #[unsafe(method_family = none)]
        pub fn purchaser(&self) -> Retained<NSString>;

        /// Create a `UIEventAttribution` object.
        ///
        ///
        /// Parameter `sourceIdentifier`: An identifier associated with the attribution.
        ///
        /// Parameter `destinationURL`: The destination URL of the attribution.
        ///
        /// Parameter `sourceDescription`: A high-level description of the content to be attributed. Pass in an empty string if no description is available.
        ///
        /// Parameter `purchaser`: The name of the party that purchased the content to be attributed. Pass in an empty string if no name is available.
        ///
        ///
        /// Returns: An instance of `UIEventAttribution` with the specified values for each field.
        ///
        /// The `sourceDescription` and `purchaser` fields may be truncated by the system if they are too long.
        #[unsafe(method(initWithSourceIdentifier:destinationURL:sourceDescription:purchaser:))]
        #[unsafe(method_family = init)]
        pub fn initWithSourceIdentifier_destinationURL_sourceDescription_purchaser(
            this: Allocated<Self>,
            source_identifier: u8,
            destination_url: &NSURL,
            source_description: &NSString,
            purchaser: &NSString,
        ) -> Retained<Self>;

        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new(mtm: MainThreadMarker) -> Retained<Self>;
    );
}
