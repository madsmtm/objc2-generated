//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// A key that defines a custom state for a view.
///
/// ## Overview
///
/// Create a custom state key if you want to define a custom state to include in a configuration state.
///
/// (TODO tabnav: TabNavigator { tabs: [TabItem { title: "Swift", content: [CodeListing { syntax: Some("swift"), code: ["// Declare a custom key for a custom isArchived state. ", "extension UIConfigurationStateCustomKey {", "    static let isArchived = UIConfigurationStateCustomKey(\"com.my-app.MyCell.isArchived\")", "}", "", "// Declare an extension on the cell state structure to provide a typed property for this custom state.", "extension UICellConfigurationState {", "    var isArchived: Bool {", "        get { return self[.isArchived] as? Bool ?? false } ", "        set { self[.isArchived] = newValue }", "    }", "}", "", "class MyCell: UICollectionViewCell {", "    // This is an existing custom property of the cell.", "    var isArchived: Bool { ", "        didSet {", "            // Ensure that an update is performed whenever this property changes.", "            if oldValue != isArchived { ", "                setNeedsUpdateConfiguration()", "            }", "        }", "    }", "", "    override var configurationState: UICellConfigurationState {", "        // Get the structure from UIKit with the system properties set by calling super. ", "        var state = super.configurationState", "", "        // Set the custom property on the state.", "        state.isArchived = self.isArchived ", "        return state", "    }", "", "    override func updateConfiguration(using state: UICellConfigurationState) {", "        // Get the default background configuration styling for the current state based on the system states.", "        var backgroundConfig = UIBackgroundConfiguration.listPlainCell().updated(for: ", "state)", "", "        // Customize the background configuration based on the custom state. ", "        if state.isArchived {", "            backgroundConfig.visualEffect = UIBlurEffect(style: .systemMaterial) ", "        }", "", "        // Apply the background configuration to the cell.", "        self.backgroundConfiguration = backgroundConfig ", "    }", "}"], metadata: None }] }, TabItem { title: "Objective-C", content: [CodeListing { syntax: Some("objc"), code: ["// Declare a custom key for a custom isArchived state (in the .h file). ", "extern NSString* const UICONFIGURATIONSTATECUSTOMKEY_IS_ARCHIVED;", "", "// Assign a value for the custom key for the custom isArchived state (in the .m file). ", "NSString* const UICONFIGURATIONSTATECUSTOMKEY_IS_ARCHIVED = @\"com.my-app.MyCell.isArchived\";", "", "// Declare a category on the cell state structure to provide a typed property for this custom state.", "@interface UICellConfigurationState (MyCellAdditions)", "- (BOOL)isArchived;", "- (void)setIsArchived:(BOOL) isArchived;", "@end", "", "@implementation UICellConfigurationState (MyCellAdditions)", "- (BOOL)isArchived {", "    return [[self valueForKey:UICONFIGURATIONSTATECUSTOMKEY_IS_ARCHIVED] boolValue];", "}", "", "- (void)setIsArchived:(BOOL) isArchived {", "    self[UICONFIGURATIONSTATECUSTOMKEY_IS_ARCHIVED] = @(isArchived);", "}", "@end", "", "@interface MyCell : UICollectionViewCell", "@property (nonatomic) BOOL isArchived;", "@end", "", "@implementation MyCell", "", "// This is an existing custom property of the cell.", "- (void)setIsArchived:(BOOL)isArchived {", "    // Ensure that an update is performed whenever this property changes.", "    if (isArchived != _isArchived) {", "        _isArchived = isArchived;", "        [self setNeedsUpdateConfiguration];", "    }", "}", "", "- (UICellConfigurationState *)configurationState {", "    // Get the structure from UIKit with the system properties set by calling super.", "    UICellConfigurationState *state = [super configurationState];", "    ", "    // Set the custom property on the state.", "    [state setIsArchived: self.isArchived];", "    return state;", "}", "", "- (void)updateConfigurationUsingState:(UICellConfigurationState *)state {", "    // Get the default background configuration styling for the current state based on the system states.", "    UIBackgroundConfiguration *backgroundConfig = [[UIBackgroundConfiguration listPlainCellConfiguration] updatedConfigurationForState:state];", "    ", "    // Customize the background configuration based on the custom state.", "    if (state.isArchived) {", "        [backgroundConfig setVisualEffect:[UIBlurEffect effectWithStyle:UIBlurEffectStyleSystemMaterial]];", "    }", "    ", "    // Apply the background configuration to the cell.", "    [self setBackgroundConfiguration:backgroundConfig];", "}", "", "@end"], metadata: None }] }] })
///
// NS_TYPED_EXTENSIBLE_ENUM
pub type UIConfigurationStateCustomKey = NSString;

extern_protocol!(
    /// The requirements for an object that encapsulates a view’s state.
    ///
    /// ## Overview
    ///
    /// This protocol provides a blueprint for a configuration state object, which encompasses a trait collection along with all of the common states that affect a view’s appearance. A configuration state encapsulates the inputs that configure a view for any possible state or combination of states. You use a configuration state with background and content configurations to obtain the default appearance for a specific state.
    ///
    /// Typically, you don’t create a configuration state yourself. To obtain a configuration state, override the [`updateConfiguration(using:)`](https://developer.apple.com/documentation/uikit/uicollectionviewcell/updateconfiguration(using:)) method in your view subclass and use the state parameter. Outside of this method, you can get a view’s configuration state by using its [`configurationState`](https://developer.apple.com/documentation/uikit/uicollectionviewcell/configurationstate-4u37h) property.
    ///
    /// For more information, see [`UIViewConfigurationState`](https://developer.apple.com/documentation/uikit/uiviewconfigurationstate-c.class) and [`UICellConfigurationState`](https://developer.apple.com/documentation/uikit/uicellconfigurationstate-c.class).
    ///
    ///
    pub unsafe trait UIConfigurationState:
        NSObjectProtocol + NSCopying + NSSecureCoding + MainThreadOnly
    {
        #[cfg(feature = "UITraitCollection")]
        /// Returns a new instance with the specified trait collection.
        #[unsafe(method(initWithTraitCollection:))]
        #[unsafe(method_family = init)]
        fn initWithTraitCollection(
            this: Allocated<Self>,
            trait_collection: &UITraitCollection,
        ) -> Retained<Self>;

        #[cfg(feature = "UITraitCollection")]
        #[unsafe(method(traitCollection))]
        #[unsafe(method_family = none)]
        fn traitCollection(&self) -> Retained<UITraitCollection>;

        #[cfg(feature = "UITraitCollection")]
        /// Setter for [`traitCollection`][Self::traitCollection].
        #[unsafe(method(setTraitCollection:))]
        #[unsafe(method_family = none)]
        fn setTraitCollection(&self, trait_collection: &UITraitCollection);

        /// Returns the custom state for the specified key.
        #[unsafe(method(customStateForKey:))]
        #[unsafe(method_family = none)]
        fn customStateForKey(
            &self,
            key: &UIConfigurationStateCustomKey,
        ) -> Option<Retained<AnyObject>>;

        /// Sets the custom state for the specified key.
        ///
        /// # Safety
        ///
        /// `custom_state` should be of the correct type.
        #[unsafe(method(setCustomState:forKey:))]
        #[unsafe(method_family = none)]
        unsafe fn setCustomState_forKey(
            &self,
            custom_state: Option<&AnyObject>,
            key: &UIConfigurationStateCustomKey,
        );

        #[unsafe(method(objectForKeyedSubscript:))]
        #[unsafe(method_family = none)]
        fn objectForKeyedSubscript(
            &self,
            key: &UIConfigurationStateCustomKey,
        ) -> Option<Retained<AnyObject>>;

        /// # Safety
        ///
        /// `obj` should be of the correct type.
        #[unsafe(method(setObject:forKeyedSubscript:))]
        #[unsafe(method_family = none)]
        unsafe fn setObject_forKeyedSubscript(
            &self,
            obj: Option<&AnyObject>,
            key: &UIConfigurationStateCustomKey,
        );
    }
);
