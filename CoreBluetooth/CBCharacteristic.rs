//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// Values that represent the possible properties of a characteristic.
///
/// ## Overview
///
/// Since you can combine characteristic properties, a characteristic may have multiple property values set.
///
///
/// Characteristic properties determine how the characteristic value can be    used, or how the descriptor(s) can be accessed. Can be combined. Unless
/// otherwise specified, properties are valid for local characteristics published via
///
/// ```text
///  CBPeripheralManager
/// ```
///
/// .
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct CBCharacteristicProperties(pub NSUInteger);
bitflags::bitflags! {
    impl CBCharacteristicProperties: NSUInteger {
/// A property that indicates the characteristic can broadcast its value using a characteristic configuration descriptor.
///
/// ## Discussion
///
/// Don’t use this property for local characteristics published with the [`addService:`](https://developer.apple.com/documentation/corebluetooth/cbperipheralmanager/add(_:)) method of the [`CBPeripheralManager`](https://developer.apple.com/documentation/corebluetooth/cbperipheralmanager) class. You can’t use this property when you initialize a new [`CBMutableCharacteristic`](https://developer.apple.com/documentation/corebluetooth/cbmutablecharacteristic) object with the [`initWithType:properties:value:permissions:`](https://developer.apple.com/documentation/corebluetooth/cbmutablecharacteristic/init(type:properties:value:permissions:)) method of the [`CBMutableCharacteristic`](https://developer.apple.com/documentation/corebluetooth/cbmutablecharacteristic) class.
///
///
        #[doc(alias = "CBCharacteristicPropertyBroadcast")]
        const Broadcast = 0x01;
/// A property that indicates a peripheral can read the characteristic’s value.
///
/// ## Discussion
///
/// Use the [`readValueForCharacteristic:`](https://developer.apple.com/documentation/corebluetooth/cbperipheral/readvalue(for:)-6u2kr) method of the [`CBPeripheral`](https://developer.apple.com/documentation/corebluetooth/cbperipheral) class to read the value of a characteristic.
///
///
        #[doc(alias = "CBCharacteristicPropertyRead")]
        const Read = 0x02;
/// A property that indicates a peripheral can write the characteristic’s value, without a response to indicate that the write succeeded.
///
/// ## Discussion
///
/// Use the [`writeValue:forCharacteristic:type:`](https://developer.apple.com/documentation/corebluetooth/cbperipheral/writevalue(_:for:type:)) method of the [`CBPeripheral`](https://developer.apple.com/documentation/corebluetooth/cbperipheral) class to write to a characteristic’s value, using the [`CBCharacteristicWriteWithoutResponse`](https://developer.apple.com/documentation/corebluetooth/cbcharacteristicwritetype/withoutresponse) constant as the parameter for `type`. If a characteristic has this property set, it doesn’t return an error to the central when it fails to write the characteristic’s value.
///
///
        #[doc(alias = "CBCharacteristicPropertyWriteWithoutResponse")]
        const WriteWithoutResponse = 0x04;
/// A property that indicates a peripheral can write the characteristic’s value, with a response to indicate that the write succeeded.
///
/// ## Discussion
///
/// If a characteristic has this property set, it returns an error to the central when it fails to write the characteristic’s value. This property allows writing values characteristic that are longer than those permitted by the [`CBCharacteristicPropertyWriteWithoutResponse`](https://developer.apple.com/documentation/corebluetooth/cbcharacteristicproperties/writewithoutresponse) constant. Use the [`writeValue:forCharacteristic:type:`](https://developer.apple.com/documentation/corebluetooth/cbperipheral/writevalue(_:for:type:)) method of the [`CBPeripheral`](https://developer.apple.com/documentation/corebluetooth/cbperipheral) class to write to a characteristic’s value, using the [`CBCharacteristicWriteWithResponse`](https://developer.apple.com/documentation/corebluetooth/cbcharacteristicwritetype/withresponse) constant as the parameter for `type`.
///
///
        #[doc(alias = "CBCharacteristicPropertyWrite")]
        const Write = 0x08;
/// A property that indicates the peripheral permits notifications of the characteristic’s value, without a response from the central to indicate receipt of the notification.
        #[doc(alias = "CBCharacteristicPropertyNotify")]
        const Notify = 0x10;
/// A property that indicates the peripheral permits notifications of the characteristic’s value, with a response from the central to indicate receipt of the notification.
        #[doc(alias = "CBCharacteristicPropertyIndicate")]
        const Indicate = 0x20;
/// A property that indicates the perhipheral allows signed writes of the characteristic’s value, without a response to indicate the write succeeded.
///
/// ## Discussion
///
/// If a characteristic has this property set, it returns an error to the central when it fails to write the characteristic’s value.
///
///
        #[doc(alias = "CBCharacteristicPropertyAuthenticatedSignedWrites")]
        const AuthenticatedSignedWrites = 0x40;
/// A property that indicates the characteristic defines additional properties in the extended properties descriptor.
///
/// ## Discussion
///
/// This property is only available for a remote peripheral’s service’s characteristic. You can’t use this property with a local characteristic, that is, a [`CBMutableCharacteristic`](https://developer.apple.com/documentation/corebluetooth/cbmutablecharacteristic) that you publish using the [`addService:`](https://developer.apple.com/documentation/corebluetooth/cbperipheralmanager/add(_:)) method of the [`CBPeripheralManager`](https://developer.apple.com/documentation/corebluetooth/cbperipheralmanager) class.
///
///
        #[doc(alias = "CBCharacteristicPropertyExtendedProperties")]
        const ExtendedProperties = 0x80;
/// A property that indicates that only trusted devices can enable notifications of the characteristic’s value.
        #[doc(alias = "CBCharacteristicPropertyNotifyEncryptionRequired")]
        const NotifyEncryptionRequired = 0x100;
/// A property that indicates only trusted devices can enable indications of the characteristic’s value.
        #[doc(alias = "CBCharacteristicPropertyIndicateEncryptionRequired")]
        const IndicateEncryptionRequired = 0x200;
    }
}

unsafe impl Encode for CBCharacteristicProperties {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for CBCharacteristicProperties {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_class!(
    /// A characteristic of a remote peripheral’s service.
    ///
    /// ## Overview
    ///
    /// [`CBCharacteristic`](https://developer.apple.com/documentation/corebluetooth/cbcharacteristic) and its subclass [`CBMutableCharacteristic`](https://developer.apple.com/documentation/corebluetooth/cbmutablecharacteristic) represent further information about a peripheral’s service. In particular, [`CBCharacteristic`](https://developer.apple.com/documentation/corebluetooth/cbcharacteristic) objects represent the characteristics of a remote peripheral’s service. A characteristic contains a single value and any number of descriptors describing that value. The properties of a characteristic determine how you can use a characteristic’s value, and how you access the descriptors.
    ///
    ///
    /// Represents a service's characteristic.
    #[unsafe(super(CBAttribute, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(feature = "CBAttribute")]
    pub struct CBCharacteristic;
);

#[cfg(feature = "CBAttribute")]
extern_conformance!(
    unsafe impl NSObjectProtocol for CBCharacteristic {}
);

#[cfg(feature = "CBAttribute")]
impl CBCharacteristic {
    extern_methods!(
        #[cfg(feature = "CBService")]
        /// A back-pointer to the service this characteristic belongs to.
        #[unsafe(method(service))]
        #[unsafe(method_family = none)]
        pub unsafe fn service(&self) -> Option<Retained<CBService>>;

        /// The properties of the characteristic.
        #[unsafe(method(properties))]
        #[unsafe(method_family = none)]
        pub unsafe fn properties(&self) -> CBCharacteristicProperties;

        /// The value of the characteristic.
        #[unsafe(method(value))]
        #[unsafe(method_family = none)]
        pub unsafe fn value(&self) -> Option<Retained<NSData>>;

        #[cfg(feature = "CBDescriptor")]
        /// A list of the CBDescriptors that have so far been discovered in this characteristic.
        #[unsafe(method(descriptors))]
        #[unsafe(method_family = none)]
        pub unsafe fn descriptors(&self) -> Option<Retained<NSArray<CBDescriptor>>>;

        /// Whether the characteristic is currently broadcasted or not.
        #[deprecated]
        #[unsafe(method(isBroadcasted))]
        #[unsafe(method_family = none)]
        pub unsafe fn isBroadcasted(&self) -> bool;

        /// Whether the characteristic is currently notifying or not.
        #[unsafe(method(isNotifying))]
        #[unsafe(method_family = none)]
        pub unsafe fn isNotifying(&self) -> bool;
    );
}

/// Methods declared on superclass `CBAttribute`.
#[cfg(feature = "CBAttribute")]
impl CBCharacteristic {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;
    );
}

/// Methods declared on superclass `NSObject`.
#[cfg(feature = "CBAttribute")]
impl CBCharacteristic {
    extern_methods!(
        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}

/// Values that represent the read, write, and encryption permissions for a characteristic’s value.
///
/// ## Overview
///
/// When you initialize a new mutable characteristic, you set the read, write, and encryption permissions for the characteristic’s value. Setting the read and write _permissions_ for a characteristic’s value is different from specifying the read and write _properties_ for a characteristic’s value. When you specify the read and write properties, the client (a central) inspects the read and write permissions of the characteristic’s value. When you specify the read and write permissions for a characteristic’s value, you set the permissions for the server (the peripheral) to allow the type of read or write specified by the characteristic’s properties. Therefore, when you initialize a mutable characteristic, you need to specify read or write properties and their corresponding permissions.
///
/// If you want to enforce encryption requirements for reads and writes on a characteristic’s value, you must specify the relevant permission ([`CBAttributePermissionsReadEncryptionRequired`](https://developer.apple.com/documentation/corebluetooth/cbattributepermissions/readencryptionrequired) or [`CBAttributePermissionsWriteEncryptionRequired`](https://developer.apple.com/documentation/corebluetooth/cbattributepermissions/writeencryptionrequired)). You may set more than one permission for a characteristic’s value.
///
///
/// Read, write, and encryption permissions for an ATT attribute. Can be combined.
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct CBAttributePermissions(pub NSUInteger);
bitflags::bitflags! {
    impl CBAttributePermissions: NSUInteger {
/// A permission that indicates a peripheral can read the attribute’s value.
        #[doc(alias = "CBAttributePermissionsReadable")]
        const Readable = 0x01;
/// A permission that indicates a peripheral can write the attribute’s value.
        #[doc(alias = "CBAttributePermissionsWriteable")]
        const Writeable = 0x02;
/// A permission that indicates only trusted devices can read the attribute’s value.
        #[doc(alias = "CBAttributePermissionsReadEncryptionRequired")]
        const ReadEncryptionRequired = 0x04;
/// A permission that indicates only trusted devices can write the attribute’s value.
        #[doc(alias = "CBAttributePermissionsWriteEncryptionRequired")]
        const WriteEncryptionRequired = 0x08;
    }
}

unsafe impl Encode for CBAttributePermissions {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for CBAttributePermissions {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_class!(
    /// A characteristic of a local peripheral’s service.
    ///
    /// ## Overview
    ///
    /// [`CBMutableCharacteristic`](https://developer.apple.com/documentation/corebluetooth/cbmutablecharacteristic) objects represent the characteristics of a local peripheral’s service. This class adds write access to many of the properties in the [`CBCharacteristic`](https://developer.apple.com/documentation/corebluetooth/cbcharacteristic) class, which it inherits from.
    ///
    /// You use this class to create a characteristic and to set its properties and permissions as desired. After you create and add a characteristic to a local service, you can publish it (and the service) to the peripheral’s local database with the [`addService:`](https://developer.apple.com/documentation/corebluetooth/cbperipheralmanager/add(_:)) method of the [`CBPeripheralManager`](https://developer.apple.com/documentation/corebluetooth/cbperipheralmanager) class. After you publish a characteristic, Core Bluetooth caches the characteristic and you can’t make changes to it.
    ///
    ///
    /// Used to create a local characteristic, which can be added to the local database via
    /// <code>
    /// CBPeripheralManager
    /// </code>
    /// . Once a characteristic
    /// is published, it is cached and can no longer be changed.
    /// If a characteristic value is specified, it will be cached and marked
    /// <code>
    /// CBCharacteristicPropertyRead
    /// </code>
    /// and
    /// <code>
    /// CBAttributePermissionsReadable
    /// </code>
    /// . If a characteristic value needs to be writeable, or may change during the lifetime of the
    /// published
    /// <code>
    /// CBService
    /// </code>
    /// , it is considered a dynamic value and will be requested on-demand. Dynamic values are identified by a
    /// <i>
    /// value
    /// </i>
    /// of
    /// <i>
    /// nil
    /// </i>
    /// .
    #[unsafe(super(CBCharacteristic, CBAttribute, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(feature = "CBAttribute")]
    pub struct CBMutableCharacteristic;
);

#[cfg(feature = "CBAttribute")]
extern_conformance!(
    unsafe impl NSObjectProtocol for CBMutableCharacteristic {}
);

#[cfg(feature = "CBAttribute")]
impl CBMutableCharacteristic {
    extern_methods!(
        /// The permissions of the characteristic value.
        ///
        ///
        /// See: CBAttributePermissions
        #[unsafe(method(permissions))]
        #[unsafe(method_family = none)]
        pub unsafe fn permissions(&self) -> CBAttributePermissions;

        /// Setter for [`permissions`][Self::permissions].
        #[unsafe(method(setPermissions:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setPermissions(&self, permissions: CBAttributePermissions);

        #[cfg(all(feature = "CBCentral", feature = "CBPeer"))]
        /// For notifying characteristics, the set of currently subscribed centrals.
        #[unsafe(method(subscribedCentrals))]
        #[unsafe(method_family = none)]
        pub unsafe fn subscribedCentrals(&self) -> Option<Retained<NSArray<CBCentral>>>;

        #[unsafe(method(properties))]
        #[unsafe(method_family = none)]
        pub unsafe fn properties(&self) -> CBCharacteristicProperties;

        /// Setter for [`properties`][Self::properties].
        #[unsafe(method(setProperties:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setProperties(&self, properties: CBCharacteristicProperties);

        #[unsafe(method(value))]
        #[unsafe(method_family = none)]
        pub unsafe fn value(&self) -> Option<Retained<NSData>>;

        /// Setter for [`value`][Self::value].
        #[unsafe(method(setValue:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setValue(&self, value: Option<&NSData>);

        #[cfg(feature = "CBDescriptor")]
        #[unsafe(method(descriptors))]
        #[unsafe(method_family = none)]
        pub unsafe fn descriptors(&self) -> Option<Retained<NSArray<CBDescriptor>>>;

        #[cfg(feature = "CBDescriptor")]
        /// Setter for [`descriptors`][Self::descriptors].
        #[unsafe(method(setDescriptors:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setDescriptors(&self, descriptors: Option<&NSArray<CBDescriptor>>);

        #[cfg(feature = "CBUUID")]
        /// Parameter `UUID`: The Bluetooth UUID of the characteristic.
        ///
        /// Parameter `properties`: The properties of the characteristic.
        ///
        /// Parameter `value`: The characteristic value to be cached. If
        /// <i>
        /// nil
        /// </i>
        /// , the value will be dynamic and requested on-demand.
        ///
        /// Parameter `permissions`: The permissions of the characteristic value.
        ///
        ///
        /// Returns an initialized characteristic.
        #[unsafe(method(initWithType:properties:value:permissions:))]
        #[unsafe(method_family = init)]
        pub unsafe fn initWithType_properties_value_permissions(
            this: Allocated<Self>,
            uuid: &CBUUID,
            properties: CBCharacteristicProperties,
            value: Option<&NSData>,
            permissions: CBAttributePermissions,
        ) -> Retained<Self>;
    );
}

/// Methods declared on superclass `CBAttribute`.
#[cfg(feature = "CBAttribute")]
impl CBMutableCharacteristic {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;
    );
}

/// Methods declared on superclass `NSObject`.
#[cfg(feature = "CBAttribute")]
impl CBMutableCharacteristic {
    extern_methods!(
        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
