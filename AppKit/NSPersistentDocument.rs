//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
#[cfg(feature = "objc2-core-data")]
#[cfg(target_vendor = "apple")]
use objc2_core_data::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// A document object that can integrate with Core Data.
    ///
    /// ## Overview
    ///
    /// The [`NSPersistentDocument`](https://developer.apple.com/documentation/appkit/nspersistentdocument) class is a subclass of [`NSDocument`](https://developer.apple.com/documentation/appkit/nsdocument) that is designed to easily integrate into the Core Data framework. It provides methods to access a document-wide [`NSManagedObjectContext`](https://developer.apple.com/documentation/coredata/nsmanagedobjectcontext) object, and provides default implementations of methods to read and write files using the persistence framework. In a persistent document, the undo manager functionality is taken over by managed object context.
    ///
    /// Standard document behavior is implemented as follows:
    ///
    /// - Opening a document invokes [`configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:`](https://developer.apple.com/documentation/appkit/nspersistentdocument/configurepersistentstorecoordinator(for:oftype:modelconfiguration:storeoptions:)) with the new URL, and adds a store of the default type (XML). Objects are loaded from the persistent store on demand through the document’s context.
    ///
    /// - Saving a new document adds a store of the default type with the chosen URL and invokes save: on the context. For an existing document, a save just invokes [`save:`](https://developer.apple.com/documentation/coredata/nsmanagedobjectcontext/save()) on the context.
    ///
    /// - Save As for a new document simply invokes save. For an opened document, it migrates the persistent store to the new URL and invokes [`save:`](https://developer.apple.com/documentation/coredata/nsmanagedobjectcontext/save()) on the context.
    ///
    /// - Revert resets the document’s managed object context. Objects are subsequently loaded from the persistent store on demand, as with opening a new document.
    ///
    /// By default an [`NSPersistentDocument`](https://developer.apple.com/documentation/appkit/nspersistentdocument) instance creates its own ready-to-use persistence stack including managed object context, persistent object store coordinator and persistent store. There is a one-to-one mapping between the document and the backing object store.
    ///
    /// You can customize the architecture of the persistence stack by overriding the [`managedObjectModel`](https://developer.apple.com/documentation/appkit/nspersistentdocument/managedobjectmodel) property and [`configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:`](https://developer.apple.com/documentation/appkit/nspersistentdocument/configurepersistentstorecoordinator(for:oftype:modelconfiguration:storeoptions:)) method. You might wish to do this, for example, to specify a particular managed object model.
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  [`NSPersistentDocument`](https://developer.apple.com/documentation/appkit/nspersistentdocument) does not support some document behaviors:
    ///
    /// - File wrappers.
    ///
    /// - [`NSSaveToOperation`](https://developer.apple.com/documentation/appkit/nsdocument/saveoperationtype/savetooperation) operation type.
    ///
    /// Core Data does not support saving changes to a new document while maintaining the unsaved state in the current document.
    ///
    /// - Asynchronous saving.
    ///
    /// [`NSPersistentDocument`](https://developer.apple.com/documentation/appkit/nspersistentdocument) does not support the asynchronous saving API of [`NSDocument`](https://developer.apple.com/documentation/appkit/nsdocument) because that API requires accessing the document’s state on multiple threads and that violates the requirements of the [`NSManagedObjectContext`](https://developer.apple.com/documentation/coredata/nsmanagedobjectcontext) class. Do not override [`canAsynchronouslyWriteToURL:ofType:forSaveOperation:`](https://developer.apple.com/documentation/appkit/nsdocument/canasynchronouslywrite(to:oftype:for:)).
    ///
    ///
    ///
    /// </div>
    /// ### Undo Support
    ///
    /// The persistent document uses the managed object context’s undo manager.
    ///
    /// <div class="warning">
    ///
    /// ### Important
    /// Do not override the following properties, their getters, or their setters:
    ///
    /// - [`hasUndoManager`](https://developer.apple.com/documentation/appkit/nsdocument/hasundomanager)
    ///
    /// - [`undoManager`](https://developer.apple.com/documentation/appkit/nsdocument/undomanager)
    ///
    ///
    ///
    /// </div>
    /// The [`documentEdited`](https://developer.apple.com/documentation/appkit/nsdocument/isdocumentedited) method returns [`true`](https://developer.apple.com/documentation/swift/true) if the persistent document’s managed object context, or editors registered with the context, have uncommitted changes, otherwise it returns [`false`](https://developer.apple.com/documentation/swift/false).
    ///
    ///
    #[unsafe(super(NSDocument, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(feature = "NSDocument")]
    pub struct NSPersistentDocument;
);

#[cfg(all(feature = "NSDocument", feature = "NSKeyValueBinding"))]
extern_conformance!(
    unsafe impl NSEditorRegistration for NSPersistentDocument {}
);

#[cfg(feature = "NSDocument")]
extern_conformance!(
    unsafe impl NSFilePresenter for NSPersistentDocument {}
);

#[cfg(all(feature = "NSDocument", feature = "NSMenu"))]
extern_conformance!(
    unsafe impl NSMenuItemValidation for NSPersistentDocument {}
);

#[cfg(feature = "NSDocument")]
extern_conformance!(
    unsafe impl NSObjectProtocol for NSPersistentDocument {}
);

#[cfg(all(feature = "NSDocument", feature = "NSUserInterfaceValidation"))]
extern_conformance!(
    unsafe impl NSUserInterfaceValidations for NSPersistentDocument {}
);

#[cfg(feature = "NSDocument")]
impl NSPersistentDocument {
    extern_methods!(
        #[cfg(feature = "objc2-core-data")]
        #[cfg(target_vendor = "apple")]
        #[unsafe(method(managedObjectContext))]
        #[unsafe(method_family = none)]
        pub fn managedObjectContext(&self) -> Option<Retained<NSManagedObjectContext>>;

        #[cfg(feature = "objc2-core-data")]
        #[cfg(target_vendor = "apple")]
        /// Setter for [`managedObjectContext`][Self::managedObjectContext].
        #[unsafe(method(setManagedObjectContext:))]
        #[unsafe(method_family = none)]
        pub fn setManagedObjectContext(
            &self,
            managed_object_context: Option<&NSManagedObjectContext>,
        );

        #[cfg(feature = "objc2-core-data")]
        #[cfg(target_vendor = "apple")]
        #[unsafe(method(managedObjectModel))]
        #[unsafe(method_family = none)]
        pub fn managedObjectModel(&self) -> Option<Retained<NSManagedObjectModel>>;

        /// # Safety
        ///
        /// `store_options` generic should be of the correct type.
        #[unsafe(method(configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:_))]
        #[unsafe(method_family = none)]
        pub unsafe fn configurePersistentStoreCoordinatorForURL_ofType_modelConfiguration_storeOptions_error(
            &self,
            url: &NSURL,
            file_type: &NSString,
            configuration: Option<&NSString>,
            store_options: Option<&NSDictionary<NSString, AnyObject>>,
        ) -> Result<(), Retained<NSError>>;

        #[unsafe(method(persistentStoreTypeForFileType:))]
        #[unsafe(method_family = none)]
        pub fn persistentStoreTypeForFileType(&self, file_type: &NSString) -> Retained<NSString>;

        #[unsafe(method(writeToURL:ofType:forSaveOperation:originalContentsURL:error:_))]
        #[unsafe(method_family = none)]
        pub fn writeToURL_ofType_forSaveOperation_originalContentsURL_error(
            &self,
            absolute_url: &NSURL,
            type_name: &NSString,
            save_operation: NSSaveOperationType,
            absolute_original_contents_url: Option<&NSURL>,
        ) -> Result<(), Retained<NSError>>;

        #[unsafe(method(readFromURL:ofType:error:_))]
        #[unsafe(method_family = none)]
        pub fn readFromURL_ofType_error(
            &self,
            absolute_url: &NSURL,
            type_name: &NSString,
        ) -> Result<(), Retained<NSError>>;

        #[unsafe(method(revertToContentsOfURL:ofType:error:_))]
        #[unsafe(method_family = none)]
        pub fn revertToContentsOfURL_ofType_error(
            &self,
            in_absolute_url: &NSURL,
            in_type_name: &NSString,
        ) -> Result<(), Retained<NSError>>;
    );
}

/// Methods declared on superclass `NSDocument`.
#[cfg(feature = "NSDocument")]
impl NSPersistentDocument {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(initWithType:error:_))]
        #[unsafe(method_family = init)]
        pub fn initWithType_error(
            this: Allocated<Self>,
            type_name: &NSString,
        ) -> Result<Retained<Self>, Retained<NSError>>;

        #[unsafe(method(initWithContentsOfURL:ofType:error:_))]
        #[unsafe(method_family = init)]
        pub fn initWithContentsOfURL_ofType_error(
            this: Allocated<Self>,
            url: &NSURL,
            type_name: &NSString,
        ) -> Result<Retained<Self>, Retained<NSError>>;

        #[unsafe(method(initForURL:withContentsOfURL:ofType:error:_))]
        #[unsafe(method_family = init)]
        pub fn initForURL_withContentsOfURL_ofType_error(
            this: Allocated<Self>,
            url_or_nil: Option<&NSURL>,
            contents_url: &NSURL,
            type_name: &NSString,
        ) -> Result<Retained<Self>, Retained<NSError>>;
    );
}

/// Methods declared on superclass `NSObject`.
#[cfg(feature = "NSDocument")]
impl NSPersistentDocument {
    extern_methods!(
        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub fn new(mtm: MainThreadMarker) -> Retained<Self>;
    );
}

/// NSDeprecated.
#[cfg(feature = "NSDocument")]
impl NSPersistentDocument {
    extern_methods!(
        /// # Safety
        ///
        /// - `url` might not allow `None`.
        /// - `file_type` might not allow `None`.
        #[deprecated]
        #[unsafe(method(configurePersistentStoreCoordinatorForURL:ofType:error:_))]
        #[unsafe(method_family = none)]
        pub unsafe fn configurePersistentStoreCoordinatorForURL_ofType_error(
            &self,
            url: Option<&NSURL>,
            file_type: Option<&NSString>,
        ) -> Result<(), Retained<NSError>>;
    );
}
