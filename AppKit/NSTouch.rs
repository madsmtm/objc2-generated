//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// The possible phases of a touch.
///
/// ## Overview
///
/// These constants are used by [`phase`](https://developer.apple.com/documentation/appkit/nstouch/phase-swift.property).
///
///
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct NSTouchPhase(pub NSUInteger);
bitflags::bitflags! {
    impl NSTouchPhase: NSUInteger {
/// A finger touched the device. Or, a resting touch transitioned to an active touch and resting touches are not wanted by the view hierarchy.
        #[doc(alias = "NSTouchPhaseBegan")]
        const Began = 1<<0;
/// A finger moved on the device.
        #[doc(alias = "NSTouchPhaseMoved")]
        const Moved = 1<<1;
/// A finger is touching the device, but hasn’t moved since the previous event.
        #[doc(alias = "NSTouchPhaseStationary")]
        const Stationary = 1<<2;
/// A finger was lifted from the screen. Or, an active touch transitioned to a resting touch and resting touches are not wanted by the view hierarchy.
        #[doc(alias = "NSTouchPhaseEnded")]
        const Ended = 1<<3;
/// The system cancelled tracking for the touch, as when (for example) the window associated with the touch resigns key or is deactivated.
        #[doc(alias = "NSTouchPhaseCancelled")]
        const Cancelled = 1<<4;
/// Matches the [`NSTouchPhaseBegan`](https://developer.apple.com/documentation/appkit/nstouch/phase-swift.struct/began), [`NSTouchPhaseMoved`](https://developer.apple.com/documentation/appkit/nstouch/phase-swift.struct/moved), or [`NSTouchPhaseStationary`](https://developer.apple.com/documentation/appkit/nstouch/phase-swift.struct/stationary) phases of a touch.
        #[doc(alias = "NSTouchPhaseTouching")]
        const Touching = NSTouchPhase::Began.0|NSTouchPhase::Moved.0|NSTouchPhase::Stationary.0;
/// Matches any phase of a touch.
        #[doc(alias = "NSTouchPhaseAny")]
        const Any = NSUIntegerMax as _;
    }
}

unsafe impl Encode for NSTouchPhase {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for NSTouchPhase {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// A bit mask identifying a direct or indirect touch type.
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct NSTouchType(pub NSInteger);
impl NSTouchType {
    /// A direct touch from a user’s finger on a screen.
    #[doc(alias = "NSTouchTypeDirect")]
    pub const Direct: Self = Self(0);
    /// An indirect touch that is not on a screen, like a digitizer touch.
    #[doc(alias = "NSTouchTypeIndirect")]
    pub const Indirect: Self = Self(1);
}

unsafe impl Encode for NSTouchType {
    const ENCODING: Encoding = NSInteger::ENCODING;
}

unsafe impl RefEncode for NSTouchType {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// A bit mask identifying a direct or indirect touch type.
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct NSTouchTypeMask(pub NSUInteger);
bitflags::bitflags! {
    impl NSTouchTypeMask: NSUInteger {
/// A direct touch from a user’s finger on a screen.
        #[doc(alias = "NSTouchTypeMaskDirect")]
        const Direct = 1<<NSTouchType::Direct.0;
/// An indirect touch that is not on a screen, like a digitizer touch.
        #[doc(alias = "NSTouchTypeMaskIndirect")]
        const Indirect = 1<<NSTouchType::Indirect.0;
    }
}

unsafe impl Encode for NSTouchTypeMask {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for NSTouchTypeMask {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

impl NSTouchTypeMask {
    // TODO: pub fn NSTouchTypeMaskFromType(r#type: NSTouchType,) -> NSTouchTypeMask;
}

extern_class!(
    /// A snapshot of a particular touch at an instant in time.
    ///
    /// ## Overview
    ///
    /// A touch event is not persistent throughout the touch. A touch creates new instances as it progresses. Use the identity property to follow a specific touch across its lifetime.
    ///
    /// Touches do not have a corresponding screen location. The first touch of a touch collection latches to the view underlying the cursor using the same hit detection as mouse events. Additional touches on the same device latch to the same view. Latches remain on views until the user ends a touch or an event cancels it.
    ///
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct NSTouch;
);

unsafe impl Send for NSTouch {}

unsafe impl Sync for NSTouch {}

extern_conformance!(
    unsafe impl NSCopying for NSTouch {}
);

unsafe impl CopyingHelper for NSTouch {
    type Result = Self;
}

extern_conformance!(
    unsafe impl NSObjectProtocol for NSTouch {}
);

impl NSTouch {
    extern_methods!(
        #[unsafe(method(identity))]
        #[unsafe(method_family = none)]
        pub fn identity(&self) -> Retained<AnyObject /* NSObjectProtocol+ NSCopying */>;

        #[unsafe(method(phase))]
        #[unsafe(method_family = none)]
        pub fn phase(&self) -> NSTouchPhase;

        #[unsafe(method(normalizedPosition))]
        #[unsafe(method_family = none)]
        pub fn normalizedPosition(&self) -> NSPoint;

        #[unsafe(method(isResting))]
        #[unsafe(method_family = none)]
        pub fn isResting(&self) -> bool;

        #[unsafe(method(device))]
        #[unsafe(method_family = none)]
        pub fn device(&self) -> Option<Retained<AnyObject>>;

        #[unsafe(method(deviceSize))]
        #[unsafe(method_family = none)]
        pub fn deviceSize(&self) -> NSSize;
    );
}

/// Methods declared on superclass `NSObject`.
impl NSTouch {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub fn new() -> Retained<Self>;
    );
}

impl DefaultRetained for NSTouch {
    #[inline]
    fn default_retained() -> Retained<Self> {
        Self::new()
    }
}

/// NSTouchBar.
impl NSTouch {
    extern_methods!(
        #[unsafe(method(type))]
        #[unsafe(method_family = none)]
        pub fn r#type(&self) -> NSTouchType;

        #[cfg(all(feature = "NSResponder", feature = "NSView"))]
        #[unsafe(method(locationInView:))]
        #[unsafe(method_family = none)]
        pub fn locationInView(&self, view: Option<&NSView>) -> NSPoint;

        #[cfg(all(feature = "NSResponder", feature = "NSView"))]
        #[unsafe(method(previousLocationInView:))]
        #[unsafe(method_family = none)]
        pub fn previousLocationInView(&self, view: Option<&NSView>) -> NSPoint;
    );
}
