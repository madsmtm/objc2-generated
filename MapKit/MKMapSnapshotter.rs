//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
#[cfg(feature = "dispatch2")]
use dispatch2::*;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// A block that processes the results of a snapshot request.
///
/// Parameters:
/// - snapshot: The image data that the snapshotter generates, or `nil` if an error occurs.
///
/// - error: The error that occurs, or `nil` if the framework generates the snapshot successfully.
///
#[cfg(all(feature = "MKMapSnapshot", feature = "block2"))]
pub type MKMapSnapshotCompletionHandler =
    *mut block2::DynBlock<dyn Fn(*mut MKMapSnapshot, *mut NSError)>;

extern_class!(
    /// A utility class for capturing a map and its content into an image.
    ///
    /// ## Overview
    ///
    /// Use an [`MKMapSnapshotter`](https://developer.apple.com/documentation/mapkit/mkmapsnapshotter) object when you want to capture the system-provided map content, including the map tiles and imagery. The snapshotter object captures the best image possible by loading all of the available map tiles before capturing the image.
    ///
    /// Configure a snapshotter object using an [`MKMapSnapshotOptions`](https://developer.apple.com/documentation/mapkit/mkmapsnapshotter/options) object. The snapshot options specify the appearance of the map, including which portion of the map the snapshotter captures.
    ///
    /// <div class="warning">
    ///
    /// ### Note
    ///  Snapshotter objects donâ€™t capture the visual representations of any overlays or annotations that your app creates. If you want those items to appear in the final snapshot, you must draw them on the resulting snapshot image. For more information about drawing custom content on map snapshots, see [`MKMapSnapshot`](https://developer.apple.com/documentation/mapkit/mkmapsnapshotter/snapshot).
    ///
    ///
    ///
    /// </div>
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct MKMapSnapshotter;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for MKMapSnapshotter {}
);

impl MKMapSnapshotter {
    extern_methods!(
        #[cfg(feature = "MKMapSnapshotOptions")]
        #[unsafe(method(initWithOptions:))]
        #[unsafe(method_family = init)]
        pub unsafe fn initWithOptions(
            this: Allocated<Self>,
            options: &MKMapSnapshotOptions,
        ) -> Retained<Self>;

        #[cfg(all(feature = "MKMapSnapshot", feature = "block2"))]
        /// # Safety
        ///
        /// `completion_handler` must be a valid pointer.
        #[unsafe(method(startWithCompletionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn startWithCompletionHandler(
            &self,
            completion_handler: MKMapSnapshotCompletionHandler,
        );

        #[cfg(all(feature = "MKMapSnapshot", feature = "block2", feature = "dispatch2"))]
        /// # Safety
        ///
        /// - `queue` possibly has additional threading requirements.
        /// - `completion_handler` must be a valid pointer.
        #[unsafe(method(startWithQueue:completionHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn startWithQueue_completionHandler(
            &self,
            queue: &DispatchQueue,
            completion_handler: MKMapSnapshotCompletionHandler,
        );

        #[unsafe(method(cancel))]
        #[unsafe(method_family = none)]
        pub unsafe fn cancel(&self);

        #[unsafe(method(isLoading))]
        #[unsafe(method_family = none)]
        pub unsafe fn isLoading(&self) -> bool;
    );
}

/// Methods declared on superclass `NSObject`.
impl MKMapSnapshotter {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
