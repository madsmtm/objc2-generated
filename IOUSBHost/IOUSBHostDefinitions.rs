//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// The completion handler for asynchronous control, bulk, and interrupt transfers.
///
/// Parameters:
/// - status: The result for the transfer.
///
/// - bytesTransferred: The number of bytes the request transferred.
///
#[cfg(feature = "block2")]
pub type IOUSBHostCompletionHandler = *mut block2::DynBlock<dyn Fn(IOReturn, NSUInteger)>;

/// The absolute time.
/// AbsoluteTime represented as a uint64_t.
pub type IOUSBHostTime = u64;

/// A structure that represents a single frame in an isochronous transfer.
/// Structure representing a single frame in an isochronous transfer. Use of this
/// structure is discouraged, use
///
/// ```text
///  IOUSBHostIsochronousTransaction
/// ```
///
/// instead.
/// Field: status Completion status for this individual frame. IOUSBHostFamily will initialize
/// this to kIOReturnInvalid and will update the field with a valid status code upon
/// completion of the frame.
/// Field: requestCount The number of bytes requested to transfer for this frame.
/// This field must be initialized by the caller before the structure is submitted.
/// Field: completeCount The number of bytes actually transferred for this frame.
/// IOUSBHostFamily will update this field upon completion of the frame.
/// Field: reserved Reserved for future use.
/// Field: timeStamp The observed IOUSBHostTime for this frame's completion.  Note that
/// interrupt latency and system load may result in more than one frame completing with
/// the same timestamp.
#[repr(C, packed)]
#[derive(Clone, Copy, Debug, PartialEq, Default)]
pub struct IOUSBHostIsochronousFrame {
    pub status: IOReturn,
    pub requestCount: u32,
    pub completeCount: u32,
    pub reserved: u32,
    pub timeStamp: IOUSBHostTime,
}

unsafe impl Encode for IOUSBHostIsochronousFrame {
    const ENCODING: Encoding = Encoding::Struct(
        "IOUSBHostIsochronousFrame",
        &[
            <IOReturn>::ENCODING,
            <u32>::ENCODING,
            <u32>::ENCODING,
            <u32>::ENCODING,
            <IOUSBHostTime>::ENCODING,
        ],
    );
}

unsafe impl RefEncode for IOUSBHostIsochronousFrame {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// Options for
/// <code>
/// sendIORequestWithData:transactionList:transactionListCount:firstFrameNumber:options:error
/// </code>
/// and
/// <code>
/// sendIORequestWithData:transactionList:transactionListCount:firstFrameNumber:options:error:completionHandler
/// </code>
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct IOUSBHostIsochronousTransferOptions(pub u32);
bitflags::bitflags! {
    impl IOUSBHostIsochronousTransferOptions: u32 {
        #[doc(alias = "IOUSBHostIsochronousTransferOptionsNone")]
        const None = 0;
    }
}

unsafe impl Encode for IOUSBHostIsochronousTransferOptions {
    const ENCODING: Encoding = u32::ENCODING;
}

unsafe impl RefEncode for IOUSBHostIsochronousTransferOptions {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// Options for
/// <code>
/// sendIORequestWithData:transactionList:transactionListCount:firstFrameNumber:error
/// </code>
/// and
/// <code>
/// sendIORequestWithData:transactionList:transactionListCount:firstFrameNumber:error:completionHandler
/// </code>
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct IOUSBHostIsochronousTransactionOptions(pub u32);
bitflags::bitflags! {
    impl IOUSBHostIsochronousTransactionOptions: u32 {
        #[doc(alias = "IOUSBHostIsochronousTransactionOptionsNone")]
        const None = 0;
        #[doc(alias = "IOUSBHostIsochronousTransactionOptionsWrap")]
        const Wrap = 1<<0;
    }
}

unsafe impl Encode for IOUSBHostIsochronousTransactionOptions {
    const ENCODING: Encoding = u32::ENCODING;
}

unsafe impl RefEncode for IOUSBHostIsochronousTransactionOptions {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// Structure representing a single frame or microframe in an isochronous transfer.
/// Field: status Completion status for this individual transaction. IOUSBHostFamily will
/// initialize this to kIOReturnInvalid and will update the field with a valid status
/// code upon completion of the transaction.
/// Field: requestCount The number of bytes requested to transfer for this transaction.
/// This field must be initialized by the caller before the structure is submitted.
/// Field: offset The number of bytes between the start of the memory descriptor in which this
/// transaction resides and the start of the transaction.  The offset cannot exceed 4GB.
/// Field: completeCount The number of bytes actually transferred for this transaction.
/// IOUSBHostFamily will update this field upon completion of the transaction.
/// Field: timeStamp The observed IOUSBHostTime for this transaction's completion.  Note that
/// interrupt latency and system load may result in more than one transaction completing
/// with the same timestamp.
/// Field: options Flags that specify additional transaction behavior.  See
///
/// ```text
///  IOUSBHostIsochronousTransactionOptions
/// ```
///
/// for more details.
#[repr(C, packed)]
#[derive(Clone, Copy, Debug, PartialEq, Default)]
pub struct IOUSBHostIsochronousTransaction {
    pub status: IOReturn,
    pub requestCount: u32,
    pub offset: u32,
    pub completeCount: u32,
    pub timeStamp: IOUSBHostTime,
    pub options: IOUSBHostIsochronousTransactionOptions,
}

unsafe impl Encode for IOUSBHostIsochronousTransaction {
    const ENCODING: Encoding = Encoding::Struct(
        "IOUSBHostIsochronousTransaction",
        &[
            <IOReturn>::ENCODING,
            <u32>::ENCODING,
            <u32>::ENCODING,
            <u32>::ENCODING,
            <IOUSBHostTime>::ENCODING,
            <IOUSBHostIsochronousTransactionOptions>::ENCODING,
        ],
    );
}

unsafe impl RefEncode for IOUSBHostIsochronousTransaction {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// A completion handler for asynchronous isochronous transfers.
///
/// Parameters:
/// - status: The result code for isochronous transfer.
///
/// - frameList: The frame list of [`IOUSBHostIsochronousFrame`](https://developer.apple.com/documentation/iousbhost/iousbhostisochronousframe) that [`enqueueIORequestWithData:frameList:frameListCount:firstFrameNumber:error:completionHandler:`](https://developer.apple.com/documentation/iousbhost/iousbhostpipe/enqueueiorequest(with:framelist:framelistcount:firstframenumber:completionhandler:)) passes.
///
/// Isochronous IO completion handler.
///
/// Parameter `status`: IOReturn result code for isochronous transfer.
///
/// Parameter `frameList`: Frame list for isochronous transfer.
#[cfg(feature = "block2")]
pub type IOUSBHostIsochronousCompletionHandler =
    *mut block2::DynBlock<dyn Fn(IOReturn, NonNull<IOUSBHostIsochronousFrame>)>;

/// Isochronous IO completion handler.
///
/// Parameter `status`: IOReturn result code for isochronous transfer.
///
/// Parameter `transactionList`: Transaction list for isochronous transfer.
#[cfg(feature = "block2")]
pub type IOUSBHostIsochronousTransactionCompletionHandler =
    *mut block2::DynBlock<dyn Fn(IOReturn, NonNull<IOUSBHostIsochronousTransaction>)>;

extern "C" {
    /// The error domain for the framework.
    /// NSErrorDomain for IOUSBHostFamily. Error codes are IOKit IOReturn codes.
    pub static IOUSBHostErrorDomain: &'static NSErrorDomain;
}

/// Options for aborting pending input/output requests.
/// Options for
/// <code>
/// abort
/// </code>
///
/// waiting for the aborted IO to complete
///
/// IO has completed
///
/// To be used with
///
/// ```text
///  abortDeviceRequestsWithOption:error:
/// ```
///
///
/// ```text
///  abortWithOption:error:
/// ```
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct IOUSBHostAbortOption(pub NSUInteger);
impl IOUSBHostAbortOption {
    /// The option to abort input/output requests asynchronously.
    #[doc(alias = "IOUSBHostAbortOptionAsynchronous")]
    pub const Asynchronous: Self = Self(0);
    /// The option to abort input/output requests synchronously.
    ///
    /// ## Discussion
    ///
    /// This is the default argument for functions that abort pending input/output requests. All input/output requests must abort before functions can return.
    ///
    ///
    #[doc(alias = "IOUSBHostAbortOptionSynchronous")]
    pub const Synchronous: Self = Self(1);
}

unsafe impl Encode for IOUSBHostAbortOption {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for IOUSBHostAbortOption {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// Options for initializing the host object.
/// Options for
/// <code>
/// initWithIOService:options:queue:error:interestHandler
/// </code>
///
/// and the IOUSBHostDevice IOService object needs to have successfully been authorized by IOServiceAuthorize().
/// If the caller has root privelages the entitlement and authorization is not needed. Using this option
/// will terminate all clients and drivers of the IOUSBHostDevice and associated IOUSBHostInterface clients
/// besides the caller.
/// Upon
/// <code>
/// destroy
/// </code>
/// of the IOUSBHostDevice, the device will be reset and drivers will be re-registered
/// for matching. This option is only valid for macOS
///
/// service to close via
/// <code>
/// kUSBHostMessageDeviceIsRequestingClose
/// </code>
/// message.  The message will include
/// the registry entry ID of the requesting service.
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct IOUSBHostObjectInitOptions(pub NSUInteger);
bitflags::bitflags! {
    impl IOUSBHostObjectInitOptions: NSUInteger {
/// The default argument for initializing the host object.
        #[doc(alias = "IOUSBHostObjectInitOptionsNone")]
        const None = 0;
/// The option to capture the device and terminate existing drivers.
///
/// ## Discussion
///
/// Callers must have either the com.apple.vm.device-access entitlement and the [`IOUSBHostDevice`](https://developer.apple.com/documentation/iousbhost/iousbhostdevice) object from [`IOServiceAuthorize`](https://developer.apple.com/documentation/iokit/1514533-ioserviceauthorize) authorization, or have root privileges. Using this option terminates all clients and drivers of the [`IOUSBHostDevice`](https://developer.apple.com/documentation/iousbhost/iousbhostdevice) and associated [`IOUSBHostInterface`](https://developer.apple.com/documentation/kernel/iousbhostinterface) clients, as well as the caller. Upon [`destroy`](https://developer.apple.com/documentation/iousbhost/iousbhostobject/destroy()) of the [`IOUSBHostDevice`](https://developer.apple.com/documentation/iousbhost/iousbhostdevice), the device resets and [`IOUSBHostInterface`](https://developer.apple.com/documentation/kernel/iousbhostinterface) reregisters for [`IOKit`](https://developer.apple.com/documentation/iokit) matching.
///
///
        #[doc(alias = "IOUSBHostObjectInitOptionsDeviceCapture")]
        const DeviceCapture = 1<<0;
        #[doc(alias = "IOUSBHostObjectInitOptionsDeviceSeize")]
        const DeviceSeize = 1<<1;
    }
}

unsafe impl Encode for IOUSBHostObjectInitOptions {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for IOUSBHostObjectInitOptions {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

///
/// ## Overview
///
/// Options for destroyWithOptions
///
/// ```text
///          the device will not be reset and drivers will not be re-registered for matching.  This allows for IOUSBHostDevice
///          objects that were initialized with <code>IOUSBHostObjectInitOptionsDeviceCapture</code> to honor the
///          <code>kUSBHostMessageDeviceIsRequestingClose</code> message.
///
///          This option is only valid for macOS
/// ```
///
///
/// Options for
/// <code>
/// destroyWithOptions
/// </code>
///
/// the device will not be reset and drivers will not be re-registered for matching.  This allows for IOUSBHostDevice
/// objects that were initialized with
/// <code>
/// IOUSBHostObjectInitOptionsDeviceCapture
/// </code>
/// to honor the
/// <code>
/// kUSBHostMessageDeviceIsRequestingClose
/// </code>
/// message.
///
/// This option is only valid for macOS
// NS_OPTIONS
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct IOUSBHostObjectDestroyOptions(pub NSUInteger);
bitflags::bitflags! {
    impl IOUSBHostObjectDestroyOptions: NSUInteger {
        #[doc(alias = "IOUSBHostObjectDestroyOptionsNone")]
        const None = 0;
        #[doc(alias = "IOUSBHostObjectDestroyOptionsDeviceSurrender")]
        const DeviceSurrender = 1<<0;
    }
}

unsafe impl Encode for IOUSBHostObjectDestroyOptions {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for IOUSBHostObjectDestroyOptions {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

// TODO: pub fn IOUSBHostDeviceRequestType(direction: tIOUSBDeviceRequestDirectionValue,r#type: tIOUSBDeviceRequestTypeValue,recipient: tIOUSBDeviceRequestRecipientValue,) -> u8;

/// Properties for implementing the matching service.
// NS_TYPED_ENUM
pub type IOUSBHostMatchingPropertyKey = NSString;

extern "C" {
    /// The matching property for the device’s vendor ID.
    pub static IOUSBHostMatchingPropertyKeyVendorID: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the device’s product ID.
    pub static IOUSBHostMatchingPropertyKeyProductID: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property on a list of product IDs.
    pub static IOUSBHostMatchingPropertyKeyProductIDArray: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the device’s interface number.
    pub static IOUSBHostMatchingPropertyKeyInterfaceNumber: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the device’s current configuration value.
    pub static IOUSBHostMatchingPropertyKeyConfigurationValue:
        &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the device’s release number.
    pub static IOUSBHostMatchingPropertyKeyDeviceReleaseNumber:
        &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the interface’s class ID.
    pub static IOUSBHostMatchingPropertyKeyInterfaceClass: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the interface’s subclass ID.
    pub static IOUSBHostMatchingPropertyKeyInterfaceSubClass: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the interface’s protocol.
    pub static IOUSBHostMatchingPropertyKeyInterfaceProtocol: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the device’s class.
    pub static IOUSBHostMatchingPropertyKeyDeviceClass: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the device’s subclass.
    pub static IOUSBHostMatchingPropertyKeyDeviceSubClass: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the device’s protocol.
    pub static IOUSBHostMatchingPropertyKeyDeviceProtocol: &'static IOUSBHostMatchingPropertyKey;
}

extern "C" {
    /// The matching property for the device’s enumeration speed.
    pub static IOUSBHostMatchingPropertyKeySpeed: &'static IOUSBHostMatchingPropertyKey;
}

/// Properties that the USB host device and interface classes share.
pub type IOUSBHostPropertyKey = NSString;

extern "C" {
    /// The location ID of the USB host device.
    pub static IOUSBHostPropertyKeyLocationID: &'static IOUSBHostPropertyKey;
}

/// Properties of a USB device that describe its state.
// NS_TYPED_ENUM
pub type IOUSBHostDevicePropertyKey = NSString;

extern "C" {
    /// The device’s vendor name.
    pub static IOUSBHostDevicePropertyKeyVendorString: &'static IOUSBHostDevicePropertyKey;
}

extern "C" {
    /// The device’s serial number as a string.
    pub static IOUSBHostDevicePropertyKeySerialNumberString: &'static IOUSBHostDevicePropertyKey;
}

extern "C" {
    /// The device’s container ID.
    ///
    /// ## Discussion
    ///
    /// See USB 3.2, 9.6.2.3 for more information.
    ///
    ///
    pub static IOUSBHostDevicePropertyKeyContainerID: &'static IOUSBHostDevicePropertyKey;
}

extern "C" {
    /// The device’s current configuration value.
    pub static IOUSBHostDevicePropertyKeyCurrentConfiguration: &'static IOUSBHostDevicePropertyKey;
}

/// Properties of a USB interface that describe its state.
// NS_TYPED_ENUM
pub type IOUSBHostInterfacePropertyKey = NSString;

extern "C" {
    /// The USB interface’s current alternative setting value.
    pub static IOUSBHostInterfacePropertyKeyAlternateSetting:
        &'static IOUSBHostInterfacePropertyKey;
}

extern "C" {
    /// The default completion timeout for input/output requests.
    pub static IOUSBHostDefaultControlCompletionTimeout: NSTimeInterval;
}
