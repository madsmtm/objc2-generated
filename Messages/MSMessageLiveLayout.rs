//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// A layout that provides a custom, interactive view inside the transcript.
    ///
    /// ## Overview
    ///
    /// Use a live layout instance to create custom, interactive messages in the transcript (or input field). An alternative layout is required to represent your message on devices that don’t have your iMessage app installed, or on devices that aren’t running iOS 11 or later. Note: this could be either the receiver’s or the sender’s device; the sender may have a second device that doesn’t have your app installed.
    ///
    /// Set the alternative layout when you instantiate your [`MSMessageLiveLayout`](https://developer.apple.com/documentation/messages/msmessagelivelayout) object. Use an [`MSMessageTemplateLayout`](https://developer.apple.com/documentation/messages/msmessagetemplatelayout) instance. The template layout automatically provides support for devices that do not support iMessage apps (macOS, iOS 9 and earlier, and SMS devices). See below for an example.
    ///
    /// Listing 1. Sending a live message.
    ///
    /// ```swift
    /// let alternateMessageLayout = MSMessageTemplateLayout()
    /// // Configure the template layout here...
    ///
    ///
    /// let messageLayout = MSMessageLiveLayout(alternateLayout: alternateMessageLayout)
    ///
    /// let message = MSMessage()
    /// message.layout = messageLayout
    ///
    /// conversation.send(message) { (errorOrNil) in
    ///     if let error = errorOrNil {
    ///         // Handle the error here...
    ///     }
    /// }
    /// ```
    ///
    /// When an [`MSMessage`](https://developer.apple.com/documentation/messages/msmessage) object with a live layout is added to the transcript (or input field), the system instantiates a new instance of your [`MSMessagesAppViewController`](https://developer.apple.com/documentation/messages/msmessagesappviewcontroller) subclass, with its [`presentationStyle`](https://developer.apple.com/documentation/messages/msmessagesappviewcontroller/presentationstyle) property set to the [`MSMessagesAppPresentationStyleTranscript`](https://developer.apple.com/documentation/messages/msmessagesapppresentationstyle/transcript) value.
    ///
    /// The view controller’s [`selectedMessage`](https://developer.apple.com/documentation/messages/msconversation/selectedmessage) property is set to the interactive message just before the controller’s [`willBecomeActiveWithConversation:`](https://developer.apple.com/documentation/messages/msmessagesappviewcontroller/willbecomeactive(with:)) method is called. Use the [`selectedMessage`](https://developer.apple.com/documentation/messages/msconversation/selectedmessage) property to access the message and display its contents.
    ///
    /// The Messages app renders your controller’s view inside a bubble in the transcript.  Your controller must check its presentation style and display an appropriate user interface for the message. You can define the message’s size by overriding your view controller’s [`contentSizeThatFits:`](https://developer.apple.com/documentation/messages/msmessagesapptranscriptpresentation/contentsizethatfits(_:)) method.
    ///
    /// There can be multiple live messages (from multiple iMessage apps) in the transcript at the same time. This means your app may have multiple instances of its [`MSMessagesAppViewController`](https://developer.apple.com/documentation/messages/msmessagesappviewcontroller) subclass running concurrently:
    ///
    /// - One instance for each message in the transcript
    ///
    /// - One instance for a message in the input field (when you stage the message by calling [`insertMessage:completionHandler:`](https://developer.apple.com/documentation/messages/msconversation/insert(_:completionhandler:)-3g248))
    ///
    /// - One instance for the app’s main interface if your iMessage app is currently active
    ///
    ///
    /// The MSMessageLiveLayout is used to indicate a message should be rendered in Messages using an instance of `MSMessagesAppViewController` with a `presentationStyle` of `MSMessagesAppPresentationStyleTranscript`.
    #[unsafe(super(MSMessageLayout, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(feature = "MSMessageLayout")]
    pub struct MSMessageLiveLayout;
);

#[cfg(feature = "MSMessageLayout")]
extern_conformance!(
    unsafe impl NSCopying for MSMessageLiveLayout {}
);

#[cfg(feature = "MSMessageLayout")]
unsafe impl CopyingHelper for MSMessageLiveLayout {
    type Result = Self;
}

#[cfg(feature = "MSMessageLayout")]
extern_conformance!(
    unsafe impl NSObjectProtocol for MSMessageLiveLayout {}
);

#[cfg(feature = "MSMessageLayout")]
impl MSMessageLiveLayout {
    extern_methods!(
        #[cfg(feature = "MSMessageTemplateLayout")]
        /// Parameter `alternateLayout`: The alternate layout of the message. This layout will be used on devices that don't support live layout or don't have the iMessage app installed.
        #[unsafe(method(initWithAlternateLayout:))]
        #[unsafe(method_family = init)]
        pub unsafe fn initWithAlternateLayout(
            this: Allocated<Self>,
            alternate_layout: &MSMessageTemplateLayout,
        ) -> Retained<Self>;

        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[cfg(feature = "MSMessageTemplateLayout")]
        /// The alternate layout of the message. This layout will be used on devices that don't support live layout or don't have the iMessage app installed.
        #[unsafe(method(alternateLayout))]
        #[unsafe(method_family = none)]
        pub unsafe fn alternateLayout(&self) -> Retained<MSMessageTemplateLayout>;
    );
}

/// Methods declared on superclass `NSObject`.
#[cfg(feature = "MSMessageLayout")]
impl MSMessageLiveLayout {
    extern_methods!(
        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
