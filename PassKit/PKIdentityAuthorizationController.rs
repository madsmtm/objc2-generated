//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// An object that presents a sheet that prompts the user to allow a request for identity information.
    ///
    /// ## Overview
    ///
    /// Use this class to request [`PKIdentityElement`](https://developer.apple.com/documentation/passkit/pkidentityelement) objects from a mobile driverâ€™s license or state identification card. When you request identity information, the system prompts the user for approval.
    ///
    /// ```swift
    /// // Create an authorization controller.
    /// let controller = PKIdentityAuthorizationController()
    ///
    /// // Describe the elements you request.
    /// let descriptor = PKIdentityDriversLicenseDescriptor()
    /// descriptor.addElements([.age(atLeast: 18)],
    ///                         intentToStore: .willNotStore)
    /// descriptor.addElements([.givenName, .portrait],
    ///                         intentToStore: .mayStore(days: 30))
    ///
    /// // Create the request.
    /// let request = PKIdentityRequest()
    /// request.descriptor = descriptor
    /// request.merchantIdentifier = // A merchant identifier you configure in the developer portal.
    /// request.nonce = // Generate a nonce to verify a request is only made once.
    ///
    /// // Prompt the user for approval.
    /// controller.requestDocument(request) { document, error in
    ///     // Handle the document response or error, if necessary.
    /// }
    /// ```
    ///
    /// The system returns response data as an encoded concise binary object representation (CBOR) blob; CBOR is a binary format similar to JSON. You must decrypt the response on your server.
    ///
    /// For design guidance, see [Human Interface Guidelines > Technologies > Wallet](https://developer.apple.com/design/human-interface-guidelines/technologies/wallet/introduction).
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  This API only works on iPhone and returns an error if you access it on iPad. This framework requires a special entitlement from Apple. This entitlement is not yet available.
    ///
    ///
    ///
    /// </div>
    ///
    /// Used to request information from an identity document stored as a Wallet pass.
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct PKIdentityAuthorizationController;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for PKIdentityAuthorizationController {}
);

impl PKIdentityAuthorizationController {
    extern_methods!(
        #[cfg(all(feature = "PKIdentityDocumentDescriptor", feature = "block2"))]
        /// Determines if a document can be requested, taking into account the entitlement of the
        /// calling process as well as the state of this device.
        #[unsafe(method(checkCanRequestDocument:completion:))]
        #[unsafe(method_family = none)]
        pub unsafe fn checkCanRequestDocument_completion(
            &self,
            descriptor: &ProtocolObject<dyn PKIdentityDocumentDescriptor>,
            completion: &block2::DynBlock<dyn Fn(Bool)>,
        );

        #[cfg(all(
            feature = "PKIdentityDocument",
            feature = "PKIdentityRequest",
            feature = "block2"
        ))]
        /// Requests identity document information from the user. The user will be prompted to approve
        /// the request before any data is released.
        /// If the user approves, the document will be returned through the completion handler.
        /// If the user does not approve, PKIdentityErrorUserCancelled will be returned through
        /// the completion handler.
        /// If the request is cancelled by the calling app through cancelRequest, PKIdentityErrorAppCancelled
        /// will be returned.
        /// Only one request can be in progress at a time, otherwise PKIdentityErrorRequestAlreadyInProgress
        /// will be returned.
        #[unsafe(method(requestDocument:completion:))]
        #[unsafe(method_family = none)]
        pub unsafe fn requestDocument_completion(
            &self,
            request: &PKIdentityRequest,
            completion: &block2::DynBlock<dyn Fn(*mut PKIdentityDocument, *mut NSError)>,
        );

        /// If there is a request in progress through requestDocument, this will cancel that request
        /// if possible. If the request is cancelled, PKIdentityErrorAppCancelled will be returned in the
        /// requestDocument:completion: completion handler. Cancellation is not guaranteed; even if
        /// this method is called, it is possible that requestDocument:completion: will return a document
        /// response if a response was already in flight.
        #[unsafe(method(cancelRequest))]
        #[unsafe(method_family = none)]
        pub unsafe fn cancelRequest(&self);
    );
}

/// Methods declared on superclass `NSObject`.
impl PKIdentityAuthorizationController {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
