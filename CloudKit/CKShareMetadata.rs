//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// An object that describes a shared record’s metadata.
    ///
    /// ## Overview
    ///
    /// A share’s metadata is an intermediary object that provides access to the share, its owner, and, for a shared record hierarchy, its root record. Metadata also includes details about the current user’s participation in the share.
    ///
    /// You don’t create metadata. CloudKit provides it to your app when the user taps or clicks a share’s [`URL`](https://developer.apple.com/documentation/cloudkit/ckshare/url), such as in an email or a message. The method CloudKit calls varies by platform and app configuration, and includes the following:
    ///
    /// - For a scene-based iOS app in a running or suspended state, CloudKit calls the [`windowScene:userDidAcceptCloudKitShareWithMetadata:`](https://developer.apple.com/documentation/uikit/uiwindowscenedelegate/windowscene(_:userdidacceptcloudkitsharewith:)) method on your window scene delegate.
    ///
    /// - For a scene-based iOS app that’s not running, the system launches your app in response to the tap or click, and calls the [`scene:willConnectToSession:options:`](https://developer.apple.com/documentation/uikit/uiscenedelegate/scene(_:willconnectto:options:)) method on your scene delegate. The `connectionOptions` parameter contains the metadata. Use its [`cloudKitShareMetadata`](https://developer.apple.com/documentation/uikit/uiscene/connectionoptions/cloudkitsharemetadata) property to access it.
    ///
    /// - For an iOS app that doesn’t use scenes, CloudKit calls your app delegate’s [`application:userDidAcceptCloudKitShareWithMetadata:`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/application(_:userdidacceptcloudkitsharewith:)) method.
    ///
    /// - For a macOS app, CloudKit calls your app delegate’s [`application:userDidAcceptCloudKitShareWithMetadata:`](https://developer.apple.com/documentation/appkit/nsapplicationdelegate/application(_:userdidacceptcloudkitsharewith:)) method.
    ///
    /// - For a watchOS app, CloudKit calls the [`userDidAcceptCloudKitShareWithMetadata:`](https://developer.apple.com/documentation/watchkit/wkextensiondelegate/userdidacceptcloudkitshare(with:)) method on your watch extension delegate.
    ///
    /// Respond by checking the [`participantStatus`](https://developer.apple.com/documentation/cloudkit/ckshare/metadata/participantstatus) of the provided metadata. If the status is `pending`, use [`CKAcceptSharesOperation`](https://developer.apple.com/documentation/cloudkit/ckacceptsharesoperation) to accept participation in the share. You can also fetch metadata independent of this flow using [`CKFetchShareMetadataOperation`](https://developer.apple.com/documentation/cloudkit/ckfetchsharemetadataoperation).
    ///
    /// For a shared record hierarchy, the [`hierarchicalRootRecordID`](https://developer.apple.com/documentation/cloudkit/ckshare/metadata/hierarchicalrootrecordid) property contains the ID of the share’s root record. When using [`CKFetchShareMetadataOperation`](https://developer.apple.com/documentation/cloudkit/ckfetchsharemetadataoperation) to fetch metadata, you can include the entire root record by setting the operation’s [`shouldFetchRootRecord`](https://developer.apple.com/documentation/cloudkit/ckfetchsharemetadataoperation/shouldfetchrootrecord) property to [`true`](https://developer.apple.com/documentation/swift/true). CloudKit then populates the [`rootRecord`](https://developer.apple.com/documentation/cloudkit/ckshare/metadata/rootrecord) property before it returns the metadata. You can further customize this behavior using the operation’s [`rootRecordDesiredKeys`](https://developer.apple.com/documentation/cloudkit/ckfetchsharemetadataoperation/rootrecorddesiredkeys-3xrex) property to specify which fields to return. This functionality isn’t applicable for a shared record zone because, unlike a shared record hierarchy, it doesn’t have a nominated root record.
    ///
    /// The participant properties provide the current user’s acceptance status, permissions, and role. Use these values to determine what functionality to provide to the user. For example, only display editing controls for accepted participants with `readWrite` permissions.
    ///
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct CKShareMetadata;
);

extern_conformance!(
    unsafe impl NSCoding for CKShareMetadata {}
);

extern_conformance!(
    unsafe impl NSCopying for CKShareMetadata {}
);

unsafe impl CopyingHelper for CKShareMetadata {
    type Result = Self;
}

extern_conformance!(
    unsafe impl NSObjectProtocol for CKShareMetadata {}
);

extern_conformance!(
    unsafe impl NSSecureCoding for CKShareMetadata {}
);

impl CKShareMetadata {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;

        #[unsafe(method(containerIdentifier))]
        #[unsafe(method_family = none)]
        pub unsafe fn containerIdentifier(&self) -> Retained<NSString>;

        #[cfg(all(feature = "CKRecord", feature = "CKShare"))]
        #[unsafe(method(share))]
        #[unsafe(method_family = none)]
        pub unsafe fn share(&self) -> Retained<CKShare>;

        #[cfg(feature = "CKRecordID")]
        #[unsafe(method(hierarchicalRootRecordID))]
        #[unsafe(method_family = none)]
        pub unsafe fn hierarchicalRootRecordID(&self) -> Option<Retained<CKRecordID>>;

        #[cfg(feature = "CKShareParticipant")]
        /// These properties reflect the participant properties of the user invoking CKFetchShareMetadataOperation
        #[unsafe(method(participantRole))]
        #[unsafe(method_family = none)]
        pub unsafe fn participantRole(&self) -> CKShareParticipantRole;

        #[cfg(feature = "CKShareParticipant")]
        #[unsafe(method(participantStatus))]
        #[unsafe(method_family = none)]
        pub unsafe fn participantStatus(&self) -> CKShareParticipantAcceptanceStatus;

        #[cfg(feature = "CKShareParticipant")]
        #[unsafe(method(participantPermission))]
        #[unsafe(method_family = none)]
        pub unsafe fn participantPermission(&self) -> CKShareParticipantPermission;

        #[cfg(feature = "CKUserIdentity")]
        #[unsafe(method(ownerIdentity))]
        #[unsafe(method_family = none)]
        pub unsafe fn ownerIdentity(&self) -> Retained<CKUserIdentity>;

        #[cfg(feature = "CKRecord")]
        /// This is only present if the share metadata was returned from a CKFetchShareMetadataOperation with shouldFetchRootRecord set to YES
        #[unsafe(method(rootRecord))]
        #[unsafe(method_family = none)]
        pub unsafe fn rootRecord(&self) -> Option<Retained<CKRecord>>;

        #[cfg(feature = "CKShareParticipant")]
        #[deprecated]
        #[unsafe(method(participantType))]
        #[unsafe(method_family = none)]
        pub unsafe fn participantType(&self) -> CKShareParticipantType;

        #[cfg(feature = "CKRecordID")]
        #[deprecated]
        #[unsafe(method(rootRecordID))]
        #[unsafe(method_family = none)]
        pub unsafe fn rootRecordID(&self) -> Retained<CKRecordID>;
    );
}
