//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
#[cfg(feature = "objc2-core-foundation")]
use objc2_core_foundation::*;
use objc2_foundation::*;

use crate::*;

/// The interpolation formulas for blending between target geometries.
///
/// ## Overview
///
/// A morpher computes its current surface by summing weighted geometry elements from the base geometry and all target geometries. The position of a vertex on the surface is produced by adding the position vector of a point on the base geometry to the position vectors of the corresponding points on all target geometries. The morpher’s [`calculationMode`](https://developer.apple.com/documentation/scenekit/scnmorpher/calculationmode) property selects the formula used to calculate this sum.
///
/// If the mode is [`SCNMorpherCalculationModeNormalized`](https://developer.apple.com/documentation/scenekit/scnmorphercalculationmode/normalized), the position from the base geometry is weighted by one minus the sum of all target weights, as in the following formula:
///
/// ```objc
/// Position = (1 - weight0 - weight1 - ...) * Base + weight0 * Target0 + weight1 * Target1 + ...
/// ```
///
/// If the mode is [`SCNMorpherCalculationModeAdditive`](https://developer.apple.com/documentation/scenekit/scnmorphercalculationmode/additive), the position from the base geometry is not weighted, and SceneKit uses the following formula instead:
///
/// ```objc
/// Position = Base + weight0 * Target0 + weight1 * Target1 + ...
/// ```
///
///
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct SCNMorpherCalculationMode(pub NSInteger);
impl SCNMorpherCalculationMode {
    /// Target weights must be in the range between `0.0` and `1.0`, and the contribution of the base geometry to the morphed surface is related to the sum of target weights. This is the default mode.
    #[doc(alias = "SCNMorpherCalculationModeNormalized")]
    pub const Normalized: Self = Self(0);
    /// Target weights may take on any value, and weighted contributions for each target are added to the base geometry,
    #[doc(alias = "SCNMorpherCalculationModeAdditive")]
    pub const Additive: Self = Self(1);
}

unsafe impl Encode for SCNMorpherCalculationMode {
    const ENCODING: Encoding = NSInteger::ENCODING;
}

unsafe impl RefEncode for SCNMorpherCalculationMode {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_class!(
    /// An object that manages smooth transitions between a node’s base geometry and one or more target geometries.
    ///
    /// ## Overview
    ///
    ///
    /// ![](https://docs-assets.developer.apple.com/published/68916ebf85cf5b3fb1d8c3a2d75abf89/media-2929789%402x.png)
    ///
    ///
    /// You control these transitions by associating an [`SCNMorpher`](https://developer.apple.com/documentation/scenekit/scnmorpher) object with a node using its [`morpher`](https://developer.apple.com/documentation/scenekit/scnnode/morpher) property. The morpher maintains an array of target geometries and a set of weights associated with each. When all weights are zero, the surface takes the form of the base geometry (from the node’s [`geometry`](https://developer.apple.com/documentation/scenekit/scnnode/geometry) property). When you use the [`setWeight:forTargetAtIndex:`](https://developer.apple.com/documentation/scenekit/scnmorpher/setweight(_:fortargetat:)) method to increase a weight to `1.0`, the surface takes the form of the geometry at the corresponding index in the morpher’s [`targets`](https://developer.apple.com/documentation/scenekit/scnmorpher/targets) array. If you use a variety of weight values for several targets, the surface takes a form that proportionally interpolates between the target geometries.
    ///
    /// You can also animate weights implicitly or explicitly using keypath animations. For example, the following code creates a morph animation that transitions one target weight back and forth repeatedly:
    ///
    /// ```objc
    /// CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"morpher.weights[0]"];
    /// animation.fromValue = @0.0;
    /// animation.toValue = @1.0;
    /// animation.autoreverses = YES;
    /// animation.repeatCount = INFINITY;
    /// animation.duration = 5;
    /// [node addAnimation:animation forKey:nil];
    /// ```
    ///
    /// A morpher and its target geometries may be loaded from a scene file or created programmatically. The base geometry and all target geometries must be topologically identical—that is, they must contain the same number and structural arrangement of vertices.
    ///
    ///
    /// SCNMorpher controls the deformation of morphed geometries
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct SCNMorpher;
);

extern_conformance!(
    unsafe impl NSCoding for SCNMorpher {}
);

extern_conformance!(
    unsafe impl NSObjectProtocol for SCNMorpher {}
);

extern_conformance!(
    unsafe impl NSSecureCoding for SCNMorpher {}
);

#[cfg(feature = "SCNAnimation")]
extern_conformance!(
    unsafe impl SCNAnimatable for SCNMorpher {}
);

impl SCNMorpher {
    extern_methods!(
        #[cfg(feature = "SCNGeometry")]
        /// Specifies the morph targets as an array of SCNGeometry.
        ///
        /// The target geometries must have the same number of entries in their geometry sources and the same topology as the base geometry.
        #[unsafe(method(targets))]
        #[unsafe(method_family = none)]
        pub unsafe fn targets(&self) -> Retained<NSArray<SCNGeometry>>;

        #[cfg(feature = "SCNGeometry")]
        /// Setter for [`targets`][Self::targets].
        ///
        /// This is [copied][objc2_foundation::NSCopying::copy] when set.
        #[unsafe(method(setTargets:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setTargets(&self, targets: &NSArray<SCNGeometry>);

        /// Access to all the weights of all the targets.
        #[unsafe(method(weights))]
        #[unsafe(method_family = none)]
        pub unsafe fn weights(&self) -> Retained<NSArray<NSNumber>>;

        /// Setter for [`weights`][Self::weights].
        #[unsafe(method(setWeights:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setWeights(&self, weights: &NSArray<NSNumber>);

        #[cfg(feature = "objc2-core-foundation")]
        /// Sets the weight for the target at the specified index. Animatable implicitly or explicitly with the keyPath "weights[index]" or "weights["targetName"]" (targetName is the name of the target geometry).
        #[unsafe(method(setWeight:forTargetAtIndex:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setWeight_forTargetAtIndex(&self, weight: CGFloat, target_index: NSUInteger);

        #[cfg(feature = "objc2-core-foundation")]
        /// Retrieves the weight for the target at the specified index.
        #[unsafe(method(weightForTargetAtIndex:))]
        #[unsafe(method_family = none)]
        pub unsafe fn weightForTargetAtIndex(&self, target_index: NSUInteger) -> CGFloat;

        #[cfg(feature = "objc2-core-foundation")]
        /// Sets the weight for the target with the specified name (targetName is the name of the target geometry).
        #[unsafe(method(setWeight:forTargetNamed:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setWeight_forTargetNamed(&self, weight: CGFloat, target_name: &NSString);

        #[cfg(feature = "objc2-core-foundation")]
        /// Retrieves the weight for the target with the specified name (targetName is the name of the target geometry).
        #[unsafe(method(weightForTargetNamed:))]
        #[unsafe(method_family = none)]
        pub unsafe fn weightForTargetNamed(&self, target_name: &NSString) -> CGFloat;

        /// Specifies how the morph result is calculated by the receiver. Defaults to SCNMorpherCalculationModeNormalized.
        #[unsafe(method(calculationMode))]
        #[unsafe(method_family = none)]
        pub unsafe fn calculationMode(&self) -> SCNMorpherCalculationMode;

        /// Setter for [`calculationMode`][Self::calculationMode].
        #[unsafe(method(setCalculationMode:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setCalculationMode(&self, calculation_mode: SCNMorpherCalculationMode);

        /// When set to YES the normals are not morphed but are recomputed after morphing the vertex instead. When set to NO, the morpher will morph the normals if the geometry targets have normals. Defaults to NO.
        #[unsafe(method(unifiesNormals))]
        #[unsafe(method_family = none)]
        pub unsafe fn unifiesNormals(&self) -> bool;

        /// Setter for [`unifiesNormals`][Self::unifiesNormals].
        #[unsafe(method(setUnifiesNormals:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setUnifiesNormals(&self, unifies_normals: bool);
    );
}

/// Methods declared on superclass `NSObject`.
impl SCNMorpher {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
