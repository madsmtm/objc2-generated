//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// An object that manages the relationship between skeletal animations and the nodes and geometries they animate.
    ///
    /// ## Overview
    ///
    /// Skeletal animation is a technique for simplifying the animation of complex geometries, such as humanoid characters in a game. An animation skeleton is a simple hierarchy of control nodes, which themselves have no visible geometry. Associating the skeleton with a geometry (also called “skinning” the skeleton or creating a skinned model) allows SceneKit to automatically deform the geometry when you move the skeleton’s control nodes, as shown below.
    ///
    ///
    /// ![](https://docs-assets.developer.apple.com/published/171656cd5d3d3b9b2e3c16e67e23641f/media-2929790%402x.png)
    ///
    ///
    /// ### Working with an Animation Skeleton
    ///
    /// Typically, an artist creates a skinned model using external 3D authoring tools and saves it, along with animations that use the skeleton, in a scene file. You load the model from the scene file and pose or animate it in your app, either by using animation objects also loaded from the scene file or by directly manipulating the nodes in the skeleton.
    ///
    /// You can also create a skinned model from separately defined geometry and skeleton data using the [`skinnerWithBaseGeometry:bones:boneInverseBindTransforms:boneWeights:boneIndices:`](https://developer.apple.com/documentation/scenekit/scnskinner/init(basegeometry:bones:boneinversebindtransforms:boneweights:boneindices:)) method.
    ///
    /// ### Sharing a Skinner Object
    ///
    /// To work with a skinned model’s skeleton, use the [`skinner`](https://developer.apple.com/documentation/scenekit/scnnode/skinner) property of the model’s root node. For example, one file might contain an animated game character, and other files might contain accessories (such as hats or backpacks) for the character to wear. An artist using 3D authoring tools can specify that the character and the accessories be animated using identical skeletons. To attach a hat to the character so that they animate together, you link the skinner object responsible for animating the hat to the skeleton associated with the animated character, as in the following example:
    ///
    /// ```objc
    /// SCNNode *hero = [SCNScene sceneNamed:@"Hero"].rootNode;
    /// SCNNode *hat = [SCNScene sceneNamed:@"FancyFedora"].rootNode;
    /// hat.skinner.skeleton = hero.skinner.skeleton;
    /// ```
    ///
    ///
    /// SCNSkinner controls the deformation of skinned geometries
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct SCNSkinner;
);

extern_conformance!(
    unsafe impl NSCoding for SCNSkinner {}
);

extern_conformance!(
    unsafe impl NSObjectProtocol for SCNSkinner {}
);

extern_conformance!(
    unsafe impl NSSecureCoding for SCNSkinner {}
);

impl SCNSkinner {
    extern_methods!(
        #[cfg(feature = "SCNNode")]
        /// Specifies the skeleton of the receiver.
        ///
        /// When setting a new skeleton, the new skeleton must have the same hierarchy of joints.
        #[unsafe(method(skeleton))]
        #[unsafe(method_family = none)]
        pub unsafe fn skeleton(&self) -> Option<Retained<SCNNode>>;

        #[cfg(feature = "SCNNode")]
        /// Setter for [`skeleton`][Self::skeleton].
        ///
        /// This is a [weak property][objc2::topics::weak_property].
        #[unsafe(method(setSkeleton:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setSkeleton(&self, skeleton: Option<&SCNNode>);

        #[cfg(all(feature = "SCNGeometry", feature = "SCNNode"))]
        /// Creates and initialize a skinner instance with the specified parameters.
        ///
        /// Parameter `baseGeometry`: Specifies the base geometry used by the skinner
        ///
        /// Parameter `bones`: Specifies the array of bones.
        ///
        /// Parameter `boneInverseBindTransforms`: The inverse of the bone’s bind-space transformation matrix at the time the bind shape was bound to this bone.
        ///
        /// Parameter `boneWeights`: A buffer of weights. This contains the weights of every influence of every vertex. The number of influence per vertex is controlled by the number of component in the geometry source.
        ///
        /// Parameter `boneIndices`: A buffer of bone indexes. This buffer contains the corresponding index in the bones array for every weight in the weights buffer.
        #[unsafe(method(skinnerWithBaseGeometry:bones:boneInverseBindTransforms:boneWeights:boneIndices:))]
        #[unsafe(method_family = none)]
        pub unsafe fn skinnerWithBaseGeometry_bones_boneInverseBindTransforms_boneWeights_boneIndices(
            base_geometry: Option<&SCNGeometry>,
            bones: &NSArray<SCNNode>,
            bone_inverse_bind_transforms: Option<&NSArray<NSValue>>,
            bone_weights: &SCNGeometrySource,
            bone_indices: &SCNGeometrySource,
        ) -> Retained<Self>;

        #[cfg(feature = "SCNGeometry")]
        /// Specifies the base geometry of the receiver.
        ///
        /// Updating this will change the geometry of all the nodes sharing the skinner.
        /// Access the node's geometry if you want to update this specific skinner properties (materials for example).
        /// Access this property if you want a whole new geometry (which will necessarily be shared among the skinner instances), with
        /// different sources, for instance.
        #[unsafe(method(baseGeometry))]
        #[unsafe(method_family = none)]
        pub unsafe fn baseGeometry(&self) -> Option<Retained<SCNGeometry>>;

        #[cfg(feature = "SCNGeometry")]
        /// Setter for [`baseGeometry`][Self::baseGeometry].
        #[unsafe(method(setBaseGeometry:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setBaseGeometry(&self, base_geometry: Option<&SCNGeometry>);

        #[cfg(all(feature = "SceneKitTypes", feature = "objc2-quartz-core"))]
        #[cfg(not(target_os = "watchos"))]
        /// Specifies the transform of the baseGeometry at the time when the mesh was bound to a skeleton. This transforms the baseGeometry from object space to a space on which the skinning then applies.
        #[unsafe(method(baseGeometryBindTransform))]
        #[unsafe(method_family = none)]
        pub unsafe fn baseGeometryBindTransform(&self) -> SCNMatrix4;

        #[cfg(all(feature = "SceneKitTypes", feature = "objc2-quartz-core"))]
        #[cfg(not(target_os = "watchos"))]
        /// Setter for [`baseGeometryBindTransform`][Self::baseGeometryBindTransform].
        #[unsafe(method(setBaseGeometryBindTransform:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setBaseGeometryBindTransform(&self, base_geometry_bind_transform: SCNMatrix4);

        /// The inverse of the bone’s bind-space transformation matrix at the time the bind shape was bound to this bone.
        ///
        /// boneInverseBindTransforms is an array of SCNMatrix4 wrapped into instances of NSValue.
        #[unsafe(method(boneInverseBindTransforms))]
        #[unsafe(method_family = none)]
        pub unsafe fn boneInverseBindTransforms(&self) -> Option<Retained<NSArray<NSValue>>>;

        #[cfg(feature = "SCNNode")]
        /// The bones of the skinner.
        #[unsafe(method(bones))]
        #[unsafe(method_family = none)]
        pub unsafe fn bones(&self) -> Retained<NSArray<SCNNode>>;

        #[cfg(feature = "SCNGeometry")]
        /// The bone weights of the receiver.
        #[unsafe(method(boneWeights))]
        #[unsafe(method_family = none)]
        pub unsafe fn boneWeights(&self) -> Retained<SCNGeometrySource>;

        #[cfg(feature = "SCNGeometry")]
        /// The bone indices of the receiver.
        #[unsafe(method(boneIndices))]
        #[unsafe(method_family = none)]
        pub unsafe fn boneIndices(&self) -> Retained<SCNGeometrySource>;
    );
}

/// Methods declared on superclass `NSObject`.
impl SCNSkinner {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
