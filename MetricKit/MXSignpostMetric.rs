//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// A data object representing the captured data for a custom metric.
    /// A class that encapsulates metrics associated with app specific signpost intervals.
    ///
    /// These metrics will be collected and aggregated if the associated signposts were emit using MXSignpost or MXSignpostAnimation APIs
    ///
    /// To limit on-device overhead, the system will automatically limit the number of signposts (emitted using the MetricKit log handle) processed.
    ///
    /// Avoid losing telemetry by limiting usage of signposts (emitted using the MetricKit log handle) to critical sections of code.
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct MXSignpostIntervalData;
);

extern_conformance!(
    unsafe impl NSCoding for MXSignpostIntervalData {}
);

extern_conformance!(
    unsafe impl NSObjectProtocol for MXSignpostIntervalData {}
);

extern_conformance!(
    unsafe impl NSSecureCoding for MXSignpostIntervalData {}
);

impl MXSignpostIntervalData {
    extern_methods!(
        #[cfg(feature = "MXHistogram")]
        /// A histogram of signpost intervals durations associated with the given signposts with signpostName and signpostCategory.
        #[unsafe(method(histogrammedSignpostDuration))]
        #[unsafe(method_family = none)]
        pub unsafe fn histogrammedSignpostDuration(&self) -> Retained<MXHistogram<NSUnitDuration>>;

        /// Cumulative CPU time aggregated over the MXSignpost intervals.
        ///
        /// This property is null when signposts with the associated signpostName and signpostCategory contain no interval metric data.
        #[unsafe(method(cumulativeCPUTime))]
        #[unsafe(method_family = none)]
        pub unsafe fn cumulativeCPUTime(&self) -> Option<Retained<NSMeasurement<NSUnitDuration>>>;

        #[cfg(feature = "MXAverage")]
        /// Average value of memory snapshots taken at beginning and end of MXSignpost intervals
        ///
        /// This property is null when signposts with the associated signpostName and signpostCategory contain no interval metric data.
        #[unsafe(method(averageMemory))]
        #[unsafe(method_family = none)]
        pub unsafe fn averageMemory(&self)
            -> Option<Retained<MXAverage<NSUnitInformationStorage>>>;

        /// Cumulative logical writes aggregated over the MXSignpost intervals.
        ///
        /// This property is null when signposts with the associated signpostName and signpostCategory contain no interval metric data.
        #[unsafe(method(cumulativeLogicalWrites))]
        #[unsafe(method_family = none)]
        pub unsafe fn cumulativeLogicalWrites(
            &self,
        ) -> Option<Retained<NSMeasurement<NSUnitInformationStorage>>>;

        /// Cumulative hitch time ratio aggregated over the MXSignpostAnimation intervals.
        ///
        /// This property is null when signposts with the associated signpostName and signpostCategory contain no interval metric data.
        #[unsafe(method(cumulativeHitchTimeRatio))]
        #[unsafe(method_family = none)]
        pub unsafe fn cumulativeHitchTimeRatio(&self) -> Option<Retained<NSMeasurement<NSUnit>>>;
    );
}

/// Methods declared on superclass `NSObject`.
impl MXSignpostIntervalData {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}

extern_class!(
    /// An object representing a custom metric.
    ///
    /// ## Overview
    ///
    /// A custom metric is an event type with a developer-defined name and category. You can add custom metrics to daily reports to capture information specific to your app.
    ///
    /// Custom metrics are a type of signpost saved to custom OS logs created using [`makeLogHandleWithCategory:`](https://developer.apple.com/documentation/metrickit/mxmetricmanager/makeloghandle(category:)). The daily report contains information about the number and duration of custom events, as well as the power and performance impact of those events. Only custom metric events logged using MetricKit utility functions capture additional power and performance data.
    ///
    /// <div class="warning">
    ///
    /// ### Note
    ///  The system limits the number of custom signpost metrics saved to the log in order to reduce on-device memory overhead. Limit use of custom metrics to critical sections of code.
    ///
    ///
    ///
    /// </div>
    ///
    /// An MXMetric subclass that encapsulates signpost metrics.
    ///
    /// Signposts emit using the os_log_t generated by makeLogHandleWithCategory: in MXMetricManger can be flagged for aggregation and reported back in MXMetricPayload.
    #[unsafe(super(MXMetric, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(feature = "MXMetric")]
    pub struct MXSignpostMetric;
);

#[cfg(feature = "MXMetric")]
extern_conformance!(
    unsafe impl NSCoding for MXSignpostMetric {}
);

#[cfg(feature = "MXMetric")]
extern_conformance!(
    unsafe impl NSObjectProtocol for MXSignpostMetric {}
);

#[cfg(feature = "MXMetric")]
extern_conformance!(
    unsafe impl NSSecureCoding for MXSignpostMetric {}
);

#[cfg(feature = "MXMetric")]
impl MXSignpostMetric {
    extern_methods!(
        /// The name associated with this aggregated signpost.
        #[unsafe(method(signpostName))]
        #[unsafe(method_family = none)]
        pub unsafe fn signpostName(&self) -> Retained<NSString>;

        /// The category associated with this aggregated signpost.
        #[unsafe(method(signpostCategory))]
        #[unsafe(method_family = none)]
        pub unsafe fn signpostCategory(&self) -> Retained<NSString>;

        /// A class that encapsulates metrics associated with app specific signpost intervals.
        ///
        /// This property is null when signposts with the associated signpostName and signpostCategory contain no intervals.
        #[unsafe(method(signpostIntervalData))]
        #[unsafe(method_family = none)]
        pub unsafe fn signpostIntervalData(&self) -> Option<Retained<MXSignpostIntervalData>>;

        /// The total number of signposts emit with the given signpostName in the aggregation period of the parent payload.
        #[unsafe(method(totalCount))]
        #[unsafe(method_family = none)]
        pub unsafe fn totalCount(&self) -> NSUInteger;
    );
}

/// Methods declared on superclass `NSObject`.
#[cfg(feature = "MXMetric")]
impl MXSignpostMetric {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
