//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// The type of vision prescription, for example a prescription for glasses or for contacts.
/// Represents a vision prescription type
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord)]
pub struct HKVisionPrescriptionType(pub NSUInteger);
impl HKVisionPrescriptionType {
    /// A prescription for glasses.
    #[doc(alias = "HKVisionPrescriptionTypeGlasses")]
    pub const Glasses: Self = Self(1);
    /// A prescription for contacts.
    #[doc(alias = "HKVisionPrescriptionTypeContacts")]
    pub const Contacts: Self = Self(2);
}

unsafe impl Encode for HKVisionPrescriptionType {
    const ENCODING: Encoding = NSUInteger::ENCODING;
}

unsafe impl RefEncode for HKVisionPrescriptionType {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_class!(
    /// A sample that stores a vision prescription.
    ///
    /// ## Overview
    ///
    /// Use this class to create an image-only prescription. Here, you attach the prescription as an image or PDF to a simple sample. The sample contains only basic information about the prescription, such as the issue and expiration dates. To see the prescription data, people must view the attached image or PDF.
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  Some regions may require an image of the original prescription to validate the prescription record.
    ///
    ///
    ///
    /// </div>
    /// To create an image-only prescription, start by creating an [`HKVisionPrescription`](https://developer.apple.com/documentation/healthkit/hkvisionprescription) sample object.
    ///
    /// ```swift
    /// // Create a minimal prescription sample that just holds an image attachment.
    /// let prescription = HKVisionPrescription(type: .glasses,
    ///                                         dateIssued: Date(),
    ///                                         expirationDate: nil,
    ///                                         device: HKDevice.local(),
    ///                                         metadata: nil)
    /// ```
    ///
    /// Next, save the sample to the HealthKit store.
    ///
    /// ```swift
    /// // Save the sample to the HealthKit store.
    /// do {
    ///     try await store.save(prescription)
    /// } catch {
    ///     // Handle the error here.
    ///     fatalError("*** An error occurred while saving the prescription sample to the HealthKit store \(error.localizedDescription) ***")
    /// }
    /// ```
    ///
    /// Then, you can attach the image or PDF to the sample.
    ///
    /// ```swift
    /// // Get the attachment store.
    /// let attachmentStore = HKAttachmentStore(healthStore: store)
    ///
    /// // Attach the image to the sample.
    /// do {
    ///     _ = try await attachmentStore.addAttachment(to: prescription,
    ///                                                 name: "Glasses Prescription",
    ///                                                 contentType: type,
    ///                                                 url: url)
    /// } catch {
    ///     // Handle the error.
    ///     fatalError("*** An error occurred while attaching the image: \(error.localizedDescription) ***")
    /// }
    /// ```
    ///
    /// For more information about adding images or pdfs as attachments, see [`HKAttachmentStore`](https://developer.apple.com/documentation/healthkit/hkattachmentstore). To create a vision prescription sample that contains the full data for the prescription, use [`HKGlassesPrescription`](https://developer.apple.com/documentation/healthkit/hkglassesprescription) or [`HKContactsPrescription`](https://developer.apple.com/documentation/healthkit/hkcontactsprescription) instead.
    ///
    ///
    /// HKSample subclass representing a vision prescription
    #[unsafe(super(HKSample, HKObject, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(all(feature = "HKObject", feature = "HKSample"))]
    pub struct HKVisionPrescription;
);

#[cfg(all(feature = "HKObject", feature = "HKSample"))]
unsafe impl Send for HKVisionPrescription {}

#[cfg(all(feature = "HKObject", feature = "HKSample"))]
unsafe impl Sync for HKVisionPrescription {}

#[cfg(all(feature = "HKObject", feature = "HKSample"))]
extern_conformance!(
    unsafe impl NSCoding for HKVisionPrescription {}
);

#[cfg(all(feature = "HKObject", feature = "HKSample"))]
extern_conformance!(
    unsafe impl NSCopying for HKVisionPrescription {}
);

#[cfg(all(feature = "HKObject", feature = "HKSample"))]
unsafe impl CopyingHelper for HKVisionPrescription {
    type Result = Self;
}

#[cfg(all(feature = "HKObject", feature = "HKSample"))]
extern_conformance!(
    unsafe impl NSObjectProtocol for HKVisionPrescription {}
);

#[cfg(all(feature = "HKObject", feature = "HKSample"))]
extern_conformance!(
    unsafe impl NSSecureCoding for HKVisionPrescription {}
);

#[cfg(all(feature = "HKObject", feature = "HKSample"))]
impl HKVisionPrescription {
    extern_methods!(
        /// A vision prescription type (glasses or contacts)
        ///
        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[unsafe(method(prescriptionType))]
        #[unsafe(method_family = none)]
        pub unsafe fn prescriptionType(&self) -> HKVisionPrescriptionType;

        /// The date the prescription was issued
        ///
        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[unsafe(method(dateIssued))]
        #[unsafe(method_family = none)]
        pub unsafe fn dateIssued(&self) -> Retained<NSDate>;

        /// The date the prescription will expire
        ///
        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[unsafe(method(expirationDate))]
        #[unsafe(method_family = none)]
        pub unsafe fn expirationDate(&self) -> Option<Retained<NSDate>>;

        #[cfg(feature = "HKDevice")]
        /// Parameter `type`: The prescription type
        ///
        /// Parameter `dateIssued`: The date the prescription was issued
        ///
        /// Parameter `expirationDate`: The date the prescription expires
        ///
        /// Parameter `device`: The device that generated the sample
        ///
        /// Parameter `metadata`: The metadata for the sample
        ///
        /// # Safety
        ///
        /// `metadata` generic should be of the correct type.
        #[unsafe(method(prescriptionWithType:dateIssued:expirationDate:device:metadata:))]
        #[unsafe(method_family = none)]
        pub unsafe fn prescriptionWithType_dateIssued_expirationDate_device_metadata(
            r#type: HKVisionPrescriptionType,
            date_issued: &NSDate,
            expiration_date: Option<&NSDate>,
            device: Option<&HKDevice>,
            metadata: Option<&NSDictionary<NSString, AnyObject>>,
        ) -> Retained<Self>;

        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
