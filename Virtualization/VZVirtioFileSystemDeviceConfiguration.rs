//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// An object that represents the configuration of a Virtio file system device.
    ///
    /// ## Overview
    ///
    /// Use `VZVirtioFileSystemDeviceConfiguration` to create a Virtio file system device which allows the host to expose directories to a guest using a [`tag`](https://developer.apple.com/documentation/virtualization/vzvirtiofilesystemdeviceconfiguration/tag) label.
    ///
    /// The example below shows the creation of a `VZVirtioFileSystemDeviceConfiguration` that shares a single directory that the user can manually mount after creating a mount point in the guest VM:
    ///
    /// (TODO tabnav: TabNavigator { tabs: [TabItem { title: "Swift", content: [CodeListing { syntax: Some("swift"), code: ["// Define a URL to a specific file path, in this case the ", "// \"Projects\" directory in the user's home directory.", "let projectsURL = URL(fileURLWithPath: NSHomeDirectory() + \"Projects\")", "", "static func createSingleDirectoryShareDeviceConfiguration() -> VZVirtioFileSystemDeviceConfiguration {", "    let sharedDirectory = VZSharedDirectory(url: projectsURL, readOnly: false)", "    let singleDirectoryShare = VZSingleDirectoryShare(directory: sharedDirectory)", "", "    // Create the VZVirtioFileSystemDeviceConfiguration and assign it a unique tag. ", "    let sharingConfiguration = VZVirtioFileSystemDeviceConfiguration(tag: \"Projects\")", "    sharingConfiguration.share = singleDirectoryShare", "", "    return sharingConfiguration", "}"], metadata: None }] }, TabItem { title: "Objective-C", content: [CodeListing { syntax: Some("objc"), code: ["    // Define a URL to a specific file path, in this case the", "    // \"Projects\" directory in the user's home directory.", "    NSString *projectsPath = [NSHomeDirectory() stringByAppendingPathComponent:@\"Projects\"];", "    NSURL *projectsURL = [NSURL fileURLWithPath:projectsPath];", "", "    VZSharedDirectory *sharedDirectory = [[VZSharedDirectory alloc] initWithURL:projectsURL readOnly:NO];", "    VZSingleDirectoryShare *singleDirectoryShare = [[VZSingleDirectoryShare alloc] initWithDirectory:sharedDirectory];", "", "    // Create the VZVirtioFileSystemDeviceConfiguration and assign it a unique tag.", "    VZVirtioFileSystemDeviceConfiguration *sharingConfiguration = [[VZVirtioFileSystemDeviceConfiguration alloc] initWithTag:@\"Projects\"];", "    sharingConfiguration.share = singleDirectoryShare;"], metadata: None }] }] })
    /// A `VZVirtioFileSystemDeviceConfiguration` can also share multiple directories. The example below demonstrates sharing the `~/Invoices` and `~/Projects` directories from the user’s home directory to the guest VM:
    ///
    /// (TODO tabnav: TabNavigator { tabs: [TabItem { title: "Swift", content: [CodeListing { syntax: Some("swift"), code: ["// Define URLs at specific file paths, in this case the ", "// \"Projects\" and \"Invoices\" directories in the user's home directory.", "let projectsURL = URL(fileURLWithPath: NSHomeDirectory() + \"Projects\")", "let invoicesURL = URL(fileURLWithPath: NSHomeDirectory() + \"Invoices\")", "", "static func createMultipleDirectoryShareDeviceConfiguration() -> VZVirtioFileSystemDeviceConfiguration {", "    let sharedProjectsDirectory = VZSharedDirectory(url: projectsURL, readOnly: false)", "", "    // It's also possible to share directories that are read-only: ", "    let sharedInvoicesDirectory = VZSharedDirectory(url: invoicesURL, readOnly: true)", "", "    // Associate each shared directory with a name, which is how the framework lists them under the mount point.", "    let directoriesToShare = [\"My Projects\": sharedProjectsDirectory, \"Invoices\": sharedInvoicesDirectory]", "    let multipleDirectoryShare = VZMultipleDirectoryShare(directories: directoriesToShare)", "", "    // Create the VZVirtioFileSystemDeviceConfiguration and assign it a unique tag. ", "    let sharingConfiguration = VZVirtioFileSystemDeviceConfiguration(tag: \"myfiles\")", "    sharingConfiguration.share = multipleDirectoryShare", "", "    return sharingConfiguration", "}"], metadata: None }] }, TabItem { title: "Objective-C", content: [CodeListing { syntax: Some("objc"), code: ["    // Define URLs at specific file paths, in this case the    ", "    // \"Projects\" and \"Invoices\" directories in the user's home directory.", "    NSString *projectsPath = [NSHomeDirectory() stringByAppendingPathComponent:@\"Projects\"];", "    NSString *invoicesPath = [NSHomeDirectory() stringByAppendingPathComponent:@\"Invoices\"];", "    NSURL *projectsURL = [NSURL fileURLWithPath:projectsPath];", "    NSURL *invoicesURL = [NSURL fileURLWithPath:invoicesPath];", "", "    VZSharedDirectory *sharedProjectsDirectory = [[VZSharedDirectory alloc] initWithURL:projectsURL readOnly:NO];", "", "    // It's also possible to share directories that are read-only:", "    VZSharedDirectory *sharedInvoicesDirectory = [[VZSharedDirectory alloc] initWithURL:invoicesURL readOnly:YES];", "", "    // Associate each shared directory with a name, which is how the framework lists them under the mount point.", "    VZMultipleDirectoryShare *multipleDirectoryShare = [[VZMultipleDirectoryShare alloc] initWithDirectories:@{", "        @\"My Projects\": sharedProjectsDirectory,", "        @\"Invoices\": sharedInvoicesDirectory,", "    }];", "", "    // Create the VZVirtioFileSystemDeviceConfiguration and assign it a unique tag.", "    VZVirtioFileSystemDeviceConfiguration *sharingConfiguration = [[VZVirtioFileSystemDeviceConfiguration alloc] initWithTag:@\"myfiles\"];", "    sharingConfiguration.share = multipleDirectoryShare;"], metadata: None }] }] })
    /// ### Mounting shared directories
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  The commands required to mount shared directories in a guest VM aren’t commands that your app can execute or that you can script from inside your application to a VM; the user must perform them either interactively or as part of a script while logged in to the guest. You must communicate these requirements to the user of your app.
    ///
    ///
    ///
    /// </div>
    /// Mounting a shared directory requires the user to execute a command in a terminal window, the specific mount command depends on the guest VM’s operating system:
    ///
    /// - In macOS guests, use `mount_virtiofs tag directory`.
    ///
    /// - In Linux guests, use `mount -t virtiofs tag directory`.
    ///
    /// The `tag` argument is the file system device configuration label — `Projects` in the single directory case and `myfiles` in the multiple directory case in these examples — and `directory` is the mount point in the guest file system to which the framework attaches the shared directories.
    ///
    /// ### Automounting shared directories in macOS VMs
    ///
    /// In macOS 13 and later, it’s possible to specify a file system device that macOS 13 or later guest VMs automount using the [`macOSGuestAutomountTag`](https://developer.apple.com/documentation/virtualization/vzvirtiofilesystemdeviceconfiguration/macosguestautomounttag) property. The example below demonstrates sharing a single macOS directory, to a macOS guest:
    ///
    /// ```swift
    /// // Define a URL to a specific file path, in this case the
    /// // "Projects" directory in the user's home directory.
    /// let projectsURL = URL(fileURLWithPath: NSHomeDirectory() + "Projects")
    ///
    /// static func createAutomountSingleDirectoryShareDeviceConfiguration() -> VZVirtioFileSystemDeviceConfiguration {
    ///     let sharedDirectory = VZSharedDirectory(url: projectsURL, readOnly: false)
    ///     let singleDirectoryShare = VZSingleDirectoryShare(directory: sharedDirectory)
    ///
    ///     // Assign the automount tag to this share. macOS shares automounted directories automatically under /Volumes in the guest.  
    ///     let sharingConfiguration = VZVirtioFileSystemDeviceConfiguration(tag: VZVirtioFileSystemDeviceConfiguration.macOSGuestAutomountTag)
    ///     sharingConfiguration.share = singleDirectoryShare
    ///
    ///     return sharingConfiguration
    /// }
    /// ```
    ///
    /// The macOS guest automounts the user’s `~/Projects` directory from the host and shares it under `/Volumes/My Shared Files/` in the macOS guest.
    ///
    /// It’s also possible to automount multiple directories in macOS guests. The example below demonstrates sharing the `~/Invoices` and `~/Projects` directories from the user’s home directory to the macOS guest VM:
    ///
    /// ```swift
    /// // Define URLs at specific file paths, in this case the
    /// // "Projects" and "Invoices" directories in the user's home directory.
    /// let projectsURL = URL(fileURLWithPath: NSHomeDirectory() + "Projects")
    /// let invoicesURL = URL(fileURLWithPath: NSHomeDirectory() + "Invoices")
    ///
    /// static func createAutomountMultipleDirectoryShareDeviceConfiguration() -> VZVirtioFileSystemDeviceConfiguration {
    ///     // Share the contents of ~/Projects, which is writeable.
    ///     let sharedProjectsDirectory = VZSharedDirectory(url: projectsURL, readOnly: false)
    ///
    ///     // Share the contents of ~/Invoices, but make it read only.
    ///     let sharedInvoicesDirectory = VZSharedDirectory(url: invoicesURL, readOnly: true)
    ///
    ///     // Associate each shared directory with a name, which is how the framework lists them under the mount point in the guest.
    ///     let directoriesToShare = ["My Projects": sharedProjectsDirectory, "Invoices": sharedInvoicesDirectory]
    ///     let multipleDirectoryShare = VZMultipleDirectoryShare(directories: directoriesToShare)
    ///
    ///     // Assign the automount tag to this share. macOS will automatically mount each shared directory at /Volumes/My Shared Files.
    ///     let sharingConfiguration = VZVirtioFileSystemDeviceConfiguration(tag: VZVirtioFileSystemDeviceConfiguration.macOSGuestAutomountTag)
    ///     sharingConfiguration.share = multipleDirectoryShare
    ///
    ///     return sharingConfiguration
    /// }
    /// ```
    ///
    /// In the guest, the framework lists each shared directory by its specified name under `/Volumes/My Shared Files`. Here, the shared directories in the macOS guest are `/Volumes/My Shared Files/My Projects` and `/Volumes/My Shared Files/Invoices`.
    ///
    ///
    /// Configuration of a Virtio file system device.
    ///
    /// This configuration creates a Virtio file system device which allows for exposing
    /// directories on the host to a guest via a tag label.
    #[unsafe(super(VZDirectorySharingDeviceConfiguration, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(feature = "VZDirectorySharingDeviceConfiguration")]
    pub struct VZVirtioFileSystemDeviceConfiguration;
);

#[cfg(feature = "VZDirectorySharingDeviceConfiguration")]
extern_conformance!(
    unsafe impl NSCopying for VZVirtioFileSystemDeviceConfiguration {}
);

#[cfg(feature = "VZDirectorySharingDeviceConfiguration")]
unsafe impl CopyingHelper for VZVirtioFileSystemDeviceConfiguration {
    type Result = Self;
}

#[cfg(feature = "VZDirectorySharingDeviceConfiguration")]
extern_conformance!(
    unsafe impl NSObjectProtocol for VZVirtioFileSystemDeviceConfiguration {}
);

#[cfg(feature = "VZDirectorySharingDeviceConfiguration")]
impl VZVirtioFileSystemDeviceConfiguration {
    extern_methods!(
        /// Configuration of the Virtio file system device.
        ///
        /// Parameter `tag`: The label identifying this device in the guest.
        ///
        /// The tag is presented as a label in the guest identifying this device for mounting. The tag must be valid, which can be checked with +[VZVirtioFileSystemDeviceConfiguration validateTag:error:].
        ///
        /// See: +[VZVirtioFileSystemDeviceConfiguration validateTag:error:]
        #[unsafe(method(initWithTag:))]
        #[unsafe(method_family = init)]
        pub unsafe fn initWithTag(this: Allocated<Self>, tag: &NSString) -> Retained<Self>;

        /// Check if tag is a valid Virtio file system tag.
        ///
        /// Parameter `tag`: The tag to validate.
        ///
        /// Parameter `error`: If not nil, assigned with an error describing why the tag is not valid.
        ///
        /// The tag must be non-empty and less than 36 bytes when encoded in UTF-8.
        #[unsafe(method(validateTag:error:_))]
        #[unsafe(method_family = none)]
        pub unsafe fn validateTag_error(tag: &NSString) -> Result<(), Retained<NSError>>;

        /// The tag is a string identifying the device.
        ///
        /// The tag is presented as a label in the guest identifying this device for mounting. The tag must be valid, which can be checked with +[VZVirtioFileSystemDeviceConfiguration validateTag:error:].
        ///
        /// See: +[VZVirtioFileSystemDeviceConfiguration validateTag:error:]
        #[unsafe(method(tag))]
        #[unsafe(method_family = none)]
        pub unsafe fn tag(&self) -> Retained<NSString>;

        /// Setter for [`tag`][Self::tag].
        ///
        /// This is [copied][objc2_foundation::NSCopying::copy] when set.
        #[unsafe(method(setTag:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setTag(&self, tag: &NSString);

        #[cfg(feature = "VZDirectoryShare")]
        /// Directory share. Defines how host resources are exposed to the guest virtual machine.
        ///
        /// See: VZSingleDirectoryShare
        ///
        /// See: VZMultipleDirectoryShare
        ///
        /// See: VZLinuxRosettaDirectoryShare
        #[unsafe(method(share))]
        #[unsafe(method_family = none)]
        pub unsafe fn share(&self) -> Option<Retained<VZDirectoryShare>>;

        #[cfg(feature = "VZDirectoryShare")]
        /// Setter for [`share`][Self::share].
        #[unsafe(method(setShare:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setShare(&self, share: Option<&VZDirectoryShare>);

        /// The macOS automount tag.
        ///
        /// A device configured with this tag will be automatically mounted in a macOS guest.
        #[unsafe(method(macOSGuestAutomountTag))]
        #[unsafe(method_family = none)]
        pub unsafe fn macOSGuestAutomountTag() -> Retained<NSString>;
    );
}

/// Methods declared on superclass `VZDirectorySharingDeviceConfiguration`.
#[cfg(feature = "VZDirectorySharingDeviceConfiguration")]
impl VZVirtioFileSystemDeviceConfiguration {
    extern_methods!(
        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;

        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;
    );
}
