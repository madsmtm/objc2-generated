//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::cell::UnsafeCell;
use core::marker::{PhantomData, PhantomPinned};
use core::ptr::NonNull;
#[cfg(feature = "objc2")]
use objc2::__framework_prelude::*;
use objc2_core_foundation::*;
#[cfg(feature = "objc2-core-graphics")]
use objc2_core_graphics::*;

use crate::*;

/// Generate text frames.
///
/// ## Overview
///
/// `CTFramesetter` is an object factory for [`CTFrameRef`](https://developer.apple.com/documentation/coretext/ctframe) objects.
///
/// The framesetter takes an attributed string object and a shape descriptor object and calls into the typesetter to create line objects that fill that shape. The output is a frame object containing an array of lines. The frame can then draw itself directly into the current graphic context.
///
///
#[doc(alias = "CTFramesetterRef")]
#[repr(C)]
pub struct CTFramesetter {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

cf_type!(
    unsafe impl CTFramesetter {}
);
#[cfg(feature = "objc2")]
cf_objc2_type!(
    unsafe impl RefEncode<"__CTFramesetter"> for CTFramesetter {}
);

unsafe impl ConcreteType for CTFramesetter {
    /// Returns the Core Foundation type identifier of the framesetter object.
    /// Returns the CFType of the framesetter object
    #[doc(alias = "CTFramesetterGetTypeID")]
    #[inline]
    fn type_id() -> CFTypeID {
        extern "C-unwind" {
            fn CTFramesetterGetTypeID() -> CFTypeID;
        }
        unsafe { CTFramesetterGetTypeID() }
    }
}

impl CTFramesetter {
    /// Creates a framesetter directly from a typesetter.
    ///
    /// Parameters:
    /// - typesetter: The typesetter that the framesetter uses to lay out text.
    ///
    ///
    /// ## Return Value
    ///
    /// This function returns a reference to a `CTFramesetter` object.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// Each framesetter uses a typesetter internally to perform line breaking and other contextual analysis according to the characters in a string. This function allows the framesetter to use a typesetter that the system constructs using specific options.
    ///
    ///
    /// Creates a framesetter directly from a typesetter.
    ///
    ///
    /// Each framesetter uses a typesetter internally to perform
    /// line breaking and other contextual analysis based on the
    /// characters in a string. This function allows use of a
    /// typesetter that was constructed using specific options.
    ///
    ///
    /// Parameter `typesetter`: The typesetter to be used by the newly-created framesetter.
    ///
    ///
    /// Returns: This function will return a reference to a CTFramesetter object.
    ///
    ///
    /// See also: CTTypesetterCreateWithAttributedStringAndOptions
    #[doc(alias = "CTFramesetterCreateWithTypesetter")]
    #[cfg(feature = "CTTypesetter")]
    #[inline]
    pub fn with_typesetter(typesetter: &CTTypesetter) -> CFRetained<CTFramesetter> {
        extern "C-unwind" {
            fn CTFramesetterCreateWithTypesetter(
                typesetter: &CTTypesetter,
            ) -> Option<NonNull<CTFramesetter>>;
        }
        let ret = unsafe { CTFramesetterCreateWithTypesetter(typesetter) };
        let ret =
            ret.expect("function was marked as returning non-null, but actually returned NULL");
        unsafe { CFRetained::from_raw(ret) }
    }

    /// Creates an immutable framesetter object from an attributed string.
    ///
    /// Parameters:
    /// - attrString: The attributed string for constructing the framesetter object.
    ///
    ///
    /// ## Return Value
    ///
    /// A reference to a framesetter object if the call is successful; otherwise, `NULL`.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// Use the framesetter object to create and fill text frames with the [`CTFramesetterCreateFrame`](https://developer.apple.com/documentation/coretext/ctframesettercreateframe(_:_:_:_:)) call.
    ///
    /// <div class="warning">
    ///
    /// ### Note
    ///  By default, the text system doesnâ€™t typeset text that requires an unreasonable amount of effort. To create a framesetter that supports typesetting text regardless of the amount of effort necessary, create a [`CTTypesetterRef`](https://developer.apple.com/documentation/coretext/cttypesetter) with the [`kCTTypesetterOptionAllowUnboundedLayout`](https://developer.apple.com/documentation/coretext/kcttypesetteroptionallowunboundedlayout) option set to [`kCFBooleanTrue`](https://developer.apple.com/documentation/corefoundation/kcfbooleantrue), then use [`CTFramesetterCreateWithTypesetter`](https://developer.apple.com/documentation/coretext/ctframesettercreatewithtypesetter(_:)) instead.
    ///
    ///
    ///
    /// </div>
    ///
    /// Creates an immutable framesetter object from an attributed
    /// string.
    ///
    ///
    /// The resultant framesetter object can be used to create and
    /// fill text frames with the CTFramesetterCreateFrame call.
    ///
    ///
    /// Parameter `attrString`: The attributed string to construct the framesetter with.
    ///
    ///
    /// Returns: This function will return a reference to a CTFramesetter object.
    #[doc(alias = "CTFramesetterCreateWithAttributedString")]
    #[inline]
    pub fn with_attributed_string(attr_string: &CFAttributedString) -> CFRetained<CTFramesetter> {
        extern "C-unwind" {
            fn CTFramesetterCreateWithAttributedString(
                attr_string: &CFAttributedString,
            ) -> Option<NonNull<CTFramesetter>>;
        }
        let ret = unsafe { CTFramesetterCreateWithAttributedString(attr_string) };
        let ret =
            ret.expect("function was marked as returning non-null, but actually returned NULL");
        unsafe { CFRetained::from_raw(ret) }
    }

    /// Creates an immutable frame using a framesetter.
    ///
    /// Parameters:
    /// - framesetter: The framesetter used to create the frame.
    ///
    /// - stringRange: The range, of the attributed string that was used to create the framesetter, that is to be typeset in lines fitted into the frame. If the length portion of the range is set to `0`, then the framesetter continues to add lines until it runs out of text or space.
    ///
    /// - path: A CGPath object that specifies the shape of the frame. The path may be non-rectangular in versions of macOS 10.7 or later and versions of iOS 4.2 or later.
    ///
    /// - frameAttributes: Additional attributes that control the frame filling process can be specified here, or `NULL` if there are no such attributes.
    ///
    ///
    /// ## Return Value
    ///
    /// A reference to a new CTFrame object if the call was successful; otherwise, `NULL`.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// This call creates a frame full of glyphs in the shape of the path provided by the `path` parameter. The framesetter continues to fill the frame until it either runs out of text or it finds that text no longer fits.
    ///
    /// ### Special Considerations
    ///
    /// In versions of macOS prior to 10.7 and versions of iOS prior to 4.2, this function returns `NULL` if the CGPath specified by the `path` parameter is not rectangular.
    ///
    ///
    /// Creates an immutable frame from a framesetter.
    ///
    ///
    /// This call will create a frame full of glyphs in the shape of
    /// the path provided by the "path" parameter. The framesetter
    /// will continue to fill the frame until it either runs out of
    /// text or it finds that text no longer fits.
    ///
    ///
    /// Parameter `framesetter`: The framesetter that will be used to create the frame.
    ///
    ///
    /// Parameter `stringRange`: The string range which the new frame will be based on. The
    /// string range is a range over the string that was used to
    /// create the framesetter. If the length portion of the range
    /// is set to 0, then the framesetter will continue to add lines
    /// until it runs out of text or space.
    ///
    ///
    /// Parameter `path`: A CGPath object that specifies the shape which the frame will
    /// take on.
    ///
    ///
    /// Parameter `frameAttributes`: Additional attributes that control the frame filling process
    /// can be specified here, or NULL if there are no such attributes.
    /// See CTFrame.h for available attributes.
    ///
    ///
    /// Returns: This function will return a reference to a new CTFrame object.
    ///
    /// # Safety
    ///
    /// - `frame_attributes` generic must be of the correct type.
    /// - `frame_attributes` generic must be of the correct type.
    #[doc(alias = "CTFramesetterCreateFrame")]
    #[cfg(all(feature = "CTFrame", feature = "objc2-core-graphics"))]
    #[inline]
    pub unsafe fn frame(
        &self,
        string_range: CFRange,
        path: &CGPath,
        frame_attributes: Option<&CFDictionary>,
    ) -> CFRetained<CTFrame> {
        extern "C-unwind" {
            fn CTFramesetterCreateFrame(
                framesetter: &CTFramesetter,
                string_range: CFRange,
                path: &CGPath,
                frame_attributes: Option<&CFDictionary>,
            ) -> Option<NonNull<CTFrame>>;
        }
        let ret = unsafe { CTFramesetterCreateFrame(self, string_range, path, frame_attributes) };
        let ret =
            ret.expect("function was marked as returning non-null, but actually returned NULL");
        unsafe { CFRetained::from_raw(ret) }
    }

    /// Returns the typesetter object being used by the framesetter.
    ///
    /// Parameters:
    /// - framesetter: The framesetter from which a typesetter is requested.
    ///
    ///
    /// ## Return Value
    ///
    /// A reference to a CTTypesetter object if the call was successful; otherwise, `NULL`. The framesetter maintains a reference to the returned object, which should not be released by the caller.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// Each framesetter uses a typesetter internally to perform line breaking and other contextual analysis based on the characters in a string; this function returns the typesetter being used by a particular framesetter in case the caller would like to perform other operations on that typesetter.
    ///
    ///
    /// Returns the typesetter object being used by the framesetter.
    ///
    ///
    /// Each framesetter uses a typesetter internally to perform
    /// line breaking and other contextual analysis based on the
    /// characters in a string; this function returns the typesetter
    /// being used by a particular framesetter if the caller would
    /// like to perform other operations on that typesetter.
    ///
    ///
    /// Parameter `framesetter`: The framesetter from which a typesetter is being requested.
    ///
    ///
    /// Returns: This function will return a reference to a CTTypesetter
    /// object, which should not be released by the caller.
    #[doc(alias = "CTFramesetterGetTypesetter")]
    #[cfg(feature = "CTTypesetter")]
    #[inline]
    pub fn typesetter(&self) -> CFRetained<CTTypesetter> {
        extern "C-unwind" {
            fn CTFramesetterGetTypesetter(
                framesetter: &CTFramesetter,
            ) -> Option<NonNull<CTTypesetter>>;
        }
        let ret = unsafe { CTFramesetterGetTypesetter(self) };
        let ret =
            ret.expect("function was marked as returning non-null, but actually returned NULL");
        unsafe { CFRetained::retain(ret) }
    }

    /// Determines the frame size needed for a string range.
    ///
    /// Parameters:
    /// - framesetter: The framesetter used for measuring the frame size.
    ///
    /// - stringRange: The string range to which the frame size applies. The string range is a range over the string used to create the framesetter. If the length portion of the range is set to `0`, then the framesetter continues to add lines until it runs out of text or space.
    ///
    /// - frameAttributes: Additional attributes that control the frame filling process, or `NULL` if there are no such attributes.
    ///
    /// - constraints: The width and height to which the frame size is constrained. A value of [`CGFLOAT_MAX`](https://developer.apple.com/documentation/corefoundation/cgfloat_max) for either dimension indicates that it should be treated as unconstrained.
    ///
    /// - fitRange: On return, contains the range of the string that actually fit in the constrained size.
    ///
    ///
    /// ## Return Value
    ///
    /// The actual dimensions for the given string range and constraints.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// This function can be used to determine how much space is needed to display a string, optionally by constraining the space along either dimension.
    ///
    ///
    /// Determines the frame size needed for a string range.
    ///
    ///
    /// This function may be used to determine how much space is needed
    /// to display a string, optionally by constraining the space along
    /// either dimension.
    ///
    ///
    /// Parameter `framesetter`: The framesetter that will be used for measuring the frame size.
    ///
    ///
    /// Parameter `stringRange`: The string range to which the frame size will apply. The
    /// string range is a range over the string that was used to
    /// create the framesetter. If the length portion of the range
    /// is set to 0, then the framesetter will continue to add lines
    /// until it runs out of text or space.
    ///
    ///
    /// Parameter `frameAttributes`: Additional attributes that control the frame filling process
    /// can be specified here, or NULL if there are no such attributes.
    ///
    ///
    /// Parameter `constraints`: The width and height to which the frame size will be constrained,
    /// A value of CGFLOAT_MAX for either dimension indicates that it
    /// should be treated as unconstrained.
    ///
    ///
    /// Parameter `fitRange`: The range of the string that actually fit in the constrained size.
    ///
    ///
    /// Returns: The actual dimensions for the given string range and constraints.
    ///
    /// # Safety
    ///
    /// - `frame_attributes` generic must be of the correct type.
    /// - `frame_attributes` generic must be of the correct type.
    /// - `fit_range` must be a valid pointer or null.
    #[doc(alias = "CTFramesetterSuggestFrameSizeWithConstraints")]
    #[inline]
    pub unsafe fn suggest_frame_size_with_constraints(
        &self,
        string_range: CFRange,
        frame_attributes: Option<&CFDictionary>,
        constraints: CGSize,
        fit_range: *mut CFRange,
    ) -> CGSize {
        extern "C-unwind" {
            fn CTFramesetterSuggestFrameSizeWithConstraints(
                framesetter: &CTFramesetter,
                string_range: CFRange,
                frame_attributes: Option<&CFDictionary>,
                constraints: CGSize,
                fit_range: *mut CFRange,
            ) -> CGSize;
        }
        unsafe {
            CTFramesetterSuggestFrameSizeWithConstraints(
                self,
                string_range,
                frame_attributes,
                constraints,
                fit_range,
            )
        }
    }
}

#[cfg(feature = "CTTypesetter")]
#[deprecated = "renamed to `CTFramesetter::with_typesetter`"]
#[inline]
pub extern "C-unwind" fn CTFramesetterCreateWithTypesetter(
    typesetter: &CTTypesetter,
) -> CFRetained<CTFramesetter> {
    extern "C-unwind" {
        fn CTFramesetterCreateWithTypesetter(
            typesetter: &CTTypesetter,
        ) -> Option<NonNull<CTFramesetter>>;
    }
    let ret = unsafe { CTFramesetterCreateWithTypesetter(typesetter) };
    let ret = ret.expect("function was marked as returning non-null, but actually returned NULL");
    unsafe { CFRetained::from_raw(ret) }
}

#[deprecated = "renamed to `CTFramesetter::with_attributed_string`"]
#[inline]
pub extern "C-unwind" fn CTFramesetterCreateWithAttributedString(
    attr_string: &CFAttributedString,
) -> CFRetained<CTFramesetter> {
    extern "C-unwind" {
        fn CTFramesetterCreateWithAttributedString(
            attr_string: &CFAttributedString,
        ) -> Option<NonNull<CTFramesetter>>;
    }
    let ret = unsafe { CTFramesetterCreateWithAttributedString(attr_string) };
    let ret = ret.expect("function was marked as returning non-null, but actually returned NULL");
    unsafe { CFRetained::from_raw(ret) }
}

#[cfg(all(feature = "CTFrame", feature = "objc2-core-graphics"))]
#[deprecated = "renamed to `CTFramesetter::frame`"]
#[inline]
pub unsafe extern "C-unwind" fn CTFramesetterCreateFrame(
    framesetter: &CTFramesetter,
    string_range: CFRange,
    path: &CGPath,
    frame_attributes: Option<&CFDictionary>,
) -> CFRetained<CTFrame> {
    extern "C-unwind" {
        fn CTFramesetterCreateFrame(
            framesetter: &CTFramesetter,
            string_range: CFRange,
            path: &CGPath,
            frame_attributes: Option<&CFDictionary>,
        ) -> Option<NonNull<CTFrame>>;
    }
    let ret =
        unsafe { CTFramesetterCreateFrame(framesetter, string_range, path, frame_attributes) };
    let ret = ret.expect("function was marked as returning non-null, but actually returned NULL");
    unsafe { CFRetained::from_raw(ret) }
}

#[cfg(feature = "CTTypesetter")]
#[deprecated = "renamed to `CTFramesetter::typesetter`"]
#[inline]
pub extern "C-unwind" fn CTFramesetterGetTypesetter(
    framesetter: &CTFramesetter,
) -> CFRetained<CTTypesetter> {
    extern "C-unwind" {
        fn CTFramesetterGetTypesetter(framesetter: &CTFramesetter)
            -> Option<NonNull<CTTypesetter>>;
    }
    let ret = unsafe { CTFramesetterGetTypesetter(framesetter) };
    let ret = ret.expect("function was marked as returning non-null, but actually returned NULL");
    unsafe { CFRetained::retain(ret) }
}

extern "C-unwind" {
    #[deprecated = "renamed to `CTFramesetter::suggest_frame_size_with_constraints`"]
    pub fn CTFramesetterSuggestFrameSizeWithConstraints(
        framesetter: &CTFramesetter,
        string_range: CFRange,
        frame_attributes: Option<&CFDictionary>,
        constraints: CGSize,
        fit_range: *mut CFRange,
    ) -> CGSize;
}
