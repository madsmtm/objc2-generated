//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ptr::NonNull;
use objc2::__framework_prelude::*;

use crate::*;

extern_class!(
    /// A helper class for managing the objects you organize in an octree.
    ///
    /// ## Overview
    ///
    /// You don’t create instances of this class directly; instead, a [`GKOctree`](https://developer.apple.com/documentation/gameplaykit/gkoctree) object provides you with a [`GKOctreeNode`](https://developer.apple.com/documentation/gameplaykit/gkoctreenode) instance when you add an element to a tree. If you plan to remove elements from the tree, keep references to the corresponding nodes so you can use the [`removeElement:withNode:`](https://developer.apple.com/documentation/gameplaykit/gkoctree/remove(_:using:)) method for better performance.
    ///
    ///
    /// The individual node(s) that make up a GKOctree.
    /// Used as a hint for faster removal via [GKOctree removeData:WithNode:]
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct GKOctreeNode;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for GKOctreeNode {}
);

impl GKOctreeNode {
    extern_methods!();
}

/// Methods declared on superclass `NSObject`.
impl GKOctreeNode {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}

extern_class!(
    /// A data structure for organizing objects based on their locations in a three-dimensional space.
    ///
    /// ## Overview
    ///
    /// An octree manages its structure to optimize for spatial searches—unlike a basic data structure such as an array or dictionary, an octree can find all elements occupying a specific position or volume very quickly. The octree partitioning strategy divides space into eight octants at each level, as illustrated in [Figure 1](/documentation/gameplaykit/gkoctree#1965708). When an octant contains more than one object, the tree subdivides that region into eight smaller octants, adding a level to the tree.
    ///
    ///
    /// ![](https://docs-assets.developer.apple.com/published/7438d4db9a93c3bf5caf8148b6562337/media-1965708%402x.png)
    ///
    ///
    /// Octrees can be useful for many tasks in game design. For example:
    ///
    /// - Deciding which game characters are close enough to each other for interaction
    ///
    /// - Deciding which portions of a large game world need to be processed at a given time
    ///
    /// The [`GKOctree`](https://developer.apple.com/documentation/gameplaykit/gkoctree) class is one of three spatial partitioning data structures that GameplayKit provides, and the only one suited to three-dimensional data. See the `GKQuadTree` class for the two-dimensional analogue of an octree, and the [`GKRTree`](https://developer.apple.com/documentation/gameplaykit/gkrtree) class for different ways to organize two-dimensional data.
    ///
    ///
    /// A tree data structure where each level has 8 children that subdivide a given space into the eight octants.
    /// Stores arbitrary NSObject elements via points and boxes.
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct GKOctree<ElementType: ?Sized = AnyObject>;
);

impl<ElementType: ?Sized + Message + AsRef<NSObject>> GKOctree<ElementType> {
    /// Unchecked conversion of the generic parameter.
    ///
    /// # Safety
    ///
    /// The generic must be valid to reinterpret as the given type.
    #[inline]
    pub unsafe fn cast_unchecked<NewElementType: ?Sized + Message + AsRef<NSObject>>(
        &self,
    ) -> &GKOctree<NewElementType> {
        unsafe { &*((self as *const Self).cast()) }
    }
}

extern_conformance!(
    unsafe impl<ElementType: ?Sized + AsRef<NSObject>> NSObjectProtocol for GKOctree<ElementType> {}
);

impl<ElementType: Message + AsRef<NSObject>> GKOctree<ElementType> {
    extern_methods!(
        /// Removes the given NSObject from this octree
        /// Note that this is an exhaustive search and is can be slow for larger trees.
        /// Cache the relevant GKOctreeNode and use removeElement:WithNode: for better performance.
        ///
        ///
        /// Parameter `element`: the element to be removed
        ///
        /// Returns: returns YES if the data was removed, NO otherwise
        #[unsafe(method(removeElement:))]
        #[unsafe(method_family = none)]
        pub unsafe fn removeElement(&self, element: &ElementType) -> bool;

        /// Removes the given NSObject from the given node
        /// Note that this is not an exhaustive search and is faster than removeData:
        ///
        ///
        /// Parameter `element`: the element to be removed
        ///
        /// Parameter `node`: the node in which this data resides
        ///
        /// Returns: returns YES if the element was removed, NO otherwise
        #[unsafe(method(removeElement:withNode:))]
        #[unsafe(method_family = none)]
        pub unsafe fn removeElement_withNode(
            &self,
            element: &ElementType,
            node: &GKOctreeNode,
        ) -> bool;
    );
}

/// Methods declared on superclass `NSObject`.
impl<ElementType: Message + AsRef<NSObject>> GKOctree<ElementType> {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
