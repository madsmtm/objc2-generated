//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::cell::UnsafeCell;
use core::marker::{PhantomData, PhantomPinned};
use objc2::__framework_prelude::*;

use crate::*;

#[repr(C)]
#[derive(Debug)]
pub struct cp_frame_timing {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

unsafe impl RefEncode for cp_frame_timing {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Encoding::Struct("cp_frame_timing", &[]));
}

/// A type that stores information about a frame’s encoding, rendering, and presentation deadlines.
///
/// ## Discussion
///
/// Before you start drawing your frame’s content, retrieve the frame’s timing information using [`cp_frame_predict_timing`](https://developer.apple.com/documentation/compositorservices/cp_frame_predict_timing). That function returns the latest predicted values for you to use during planning. After you retrieve the [`cp_drawable_t`](https://developer.apple.com/documentation/compositorservices/cp_drawable_t) type for the frame, get the timing information from the drawable instead using [`frameTiming`](https://developer.apple.com/documentation/compositorservices/layerrenderer/drawable/frametiming).
///
///
/// An opaque type that stores information about a frame’s
/// encoding, rendering, and presentation deadlines.
///
/// Before you start drawing, call the ``cp_frame_predict_timing``
/// function to update and retrieve the frame’s timing information.
/// After you access the frame’s ``cp_drawable_t`` type, get the
/// timing information using the ``cp_drawable_get_frame_timing`` function.
pub type cp_frame_timing_t = *mut cp_frame_timing;

impl cp_frame_timing {
    /// Returns the optimal time to start the frame submission process.
    ///
    /// Parameters:
    /// - frame_timing: The frame’s timing information. Fetch this information using the [`cp_frame_predict_timing`](https://developer.apple.com/documentation/compositorservices/cp_frame_predict_timing) function. After you retrieve the frame’s drawable type, get the information using [`frameTiming`](https://developer.apple.com/documentation/compositorservices/layerrenderer/drawable/frametiming) instead.
    ///
    ///
    /// ## Return Value
    ///
    /// The Mach absolute time at which to query the input for your frame.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// The optimal input time is the time at which to call the [`startSubmission()`](https://developer.apple.com/documentation/compositorservices/layerrenderer/frame/startsubmission()) function. Use the time before the input time to update your app’s data structures and prepare for rendering. Call [`cp_time_wait_until`](https://developer.apple.com/documentation/compositorservices/cp_time_wait_until) to suspend your app until the optimal time arrives. When it does, fetch the current device pose and finish rendering and the frame and commit your Metal command buffers.
    ///
    ///
    /// Returns the optimal time to query the input for a frame.
    ///
    /// - Parameters:
    /// - timing_information: The frame’s timing information. Fetch this
    /// information using the ``cp_frame_predict_timing`` function. If
    /// you already called that function once for the frame, you can call
    /// the ``cp_drawable_get_frame_timing`` function to get the information
    /// instead.
    /// - Returns: The Mach absolute time at which to query the input for your frame.
    ///
    /// The returned value indicates the optimal time for you to query the input
    /// for your frame.
    ///
    /// # Safety
    ///
    /// `frame_timing` must be a valid pointer.
    #[doc(alias = "cp_frame_timing_get_optimal_input_time")]
    #[cfg(feature = "cp_types")]
    #[inline]
    pub unsafe fn optimal_input_time(frame_timing: cp_frame_timing_t) -> cp_time_t {
        extern "C-unwind" {
            fn cp_frame_timing_get_optimal_input_time(frame_timing: cp_frame_timing_t)
                -> cp_time_t;
        }
        unsafe { cp_frame_timing_get_optimal_input_time(frame_timing) }
    }

    /// Returns the time at which you must finish all work for the specified frame.
    ///
    /// Parameters:
    /// - frame_timing: The frame’s timing information. Fetch this information using the [`cp_frame_predict_timing`](https://developer.apple.com/documentation/compositorservices/cp_frame_predict_timing) function. After you retrieve the frame’s drawable type, get the information using [`frameTiming`](https://developer.apple.com/documentation/compositorservices/layerrenderer/drawable/frametiming) instead.
    ///
    ///
    /// ## Return Value
    ///
    /// The Mach absolute time at which you must finish all work and commit your command buffers to the GPU.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// This value reflects the time you need to finish your work and deliver the frame to the system. Finish all CPU tasks, commit your Metal command buffers, and call [`endSubmission()`](https://developer.apple.com/documentation/compositorservices/layerrenderer/frame/endsubmission()) by the specified time. This time is before the actual presentation time of the frame, because it accounts for the Compositor Services overhead needed to render your frame and display it.
    ///
    ///
    /// Returns the time at which you must finish all work for the specified
    /// frame.
    ///
    /// - Parameters:
    /// - timing_information: The frame’s timing information. Fetch this
    /// information using the ``cp_frame_predict_timing`` function. If you
    /// already called that function once for the frame, you can call the
    /// ``cp_drawable_get_frame_timing`` function to get the information
    /// instead.
    /// - Returns: The Mach absolute time at which you must finish all work
    /// for the frame. This value reflects the total presentation time minus
    /// the overhead for the compositor to render your frame and display it
    /// onscreen.
    ///
    /// Finish all CPU and GPU work by the returned time to ensure the timely
    /// display of the frame onscreen.
    ///
    /// # Safety
    ///
    /// `frame_timing` must be a valid pointer.
    #[doc(alias = "cp_frame_timing_get_rendering_deadline")]
    #[cfg(feature = "cp_types")]
    #[inline]
    pub unsafe fn rendering_deadline(frame_timing: cp_frame_timing_t) -> cp_time_t {
        extern "C-unwind" {
            fn cp_frame_timing_get_rendering_deadline(frame_timing: cp_frame_timing_t)
                -> cp_time_t;
        }
        unsafe { cp_frame_timing_get_rendering_deadline(frame_timing) }
    }

    /// Returns the time at which the system displays the frame.
    ///
    /// Parameters:
    /// - frame_timing: The frame’s timing information. Fetch this information using the [`cp_frame_predict_timing`](https://developer.apple.com/documentation/compositorservices/cp_frame_predict_timing) function. After you retrieve the frame’s drawable type, get the information using [`frameTiming`](https://developer.apple.com/documentation/compositorservices/layerrenderer/drawable/frametiming) instead.
    ///
    ///
    /// ## Return Value
    ///
    /// The Mach absolute time at which the layer presents the frame.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// You can use the presentation time as a synchronization point for other parts of your app. For example, if you play an audio clip when the frame appears, configure your code to start playing the clip at the specified time.
    ///
    ///
    /// Returns the time at which the system will display the frame
    /// onscreen.
    ///
    /// - Parameters:
    /// - timing_information: The frame’s timing information. Fetch
    /// this information using the ``cp_frame_predict_timing`` function.
    /// If you already called that function once for the frame, you
    /// can call the ``cp_drawable_get_frame_timing`` function to get
    /// the information instead.
    /// - Returns: The Mach absolute time at which the layer presents the
    /// frame onscreen.
    ///
    /// You can use the presentation time as a synchronization point for
    /// other parts of your app. For example, you might play a specific
    /// audio clip when the frame appears.
    ///
    /// # Safety
    ///
    /// `frame_timing` must be a valid pointer.
    #[doc(alias = "cp_frame_timing_get_presentation_time")]
    #[cfg(feature = "cp_types")]
    #[inline]
    pub unsafe fn presentation_time(frame_timing: cp_frame_timing_t) -> cp_time_t {
        extern "C-unwind" {
            fn cp_frame_timing_get_presentation_time(frame_timing: cp_frame_timing_t) -> cp_time_t;
        }
        unsafe { cp_frame_timing_get_presentation_time(frame_timing) }
    }

    /// Returns the time to used to predict transform of trackable anchors to provide best
    /// content registration with the frame.
    ///
    /// - Parameters:
    /// - timing_information: The frame’s timing information. Fetch
    /// this information using the ``cp_frame_predict_timing`` function.
    /// If you already called that function once for the frame, you
    /// can call the ``cp_drawable_get_frame_timing`` function to get
    /// the information instead.
    /// - Returns: The Mach absolute time to use to predict transform of a trackable anchor.
    ///
    /// You can use trackable anchor prediction time for prediction of ARKit trackable anchors
    /// to register rendered anchored content to the real-world objects. The offset of this time
    /// to presentation time is variable, so it is recommended to query this per-frame.
    ///
    /// - note: For predicting ARKit device anchor use presentation time, see
    /// ``cp_frame_timing_get_presentation_time``
    ///
    /// # Safety
    ///
    /// `frame_timing` must be a valid pointer.
    #[doc(alias = "cp_frame_timing_get_trackable_anchor_time")]
    #[cfg(feature = "cp_types")]
    #[inline]
    pub unsafe fn trackable_anchor_time(frame_timing: cp_frame_timing_t) -> cp_time_t {
        extern "C-unwind" {
            fn cp_frame_timing_get_trackable_anchor_time(
                frame_timing: cp_frame_timing_t,
            ) -> cp_time_t;
        }
        unsafe { cp_frame_timing_get_trackable_anchor_time(frame_timing) }
    }
}

extern "C-unwind" {
    #[cfg(feature = "cp_types")]
    #[deprecated = "renamed to `cp_frame_timing::optimal_input_time`"]
    pub fn cp_frame_timing_get_optimal_input_time(frame_timing: cp_frame_timing_t) -> cp_time_t;
}

extern "C-unwind" {
    #[cfg(feature = "cp_types")]
    #[deprecated = "renamed to `cp_frame_timing::rendering_deadline`"]
    pub fn cp_frame_timing_get_rendering_deadline(frame_timing: cp_frame_timing_t) -> cp_time_t;
}

extern "C-unwind" {
    #[cfg(feature = "cp_types")]
    #[deprecated = "renamed to `cp_frame_timing::presentation_time`"]
    pub fn cp_frame_timing_get_presentation_time(frame_timing: cp_frame_timing_t) -> cp_time_t;
}

extern "C-unwind" {
    #[cfg(feature = "cp_types")]
    #[deprecated = "renamed to `cp_frame_timing::trackable_anchor_time`"]
    pub fn cp_frame_timing_get_trackable_anchor_time(frame_timing: cp_frame_timing_t) -> cp_time_t;
}
