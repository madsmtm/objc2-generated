//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// Values representing the state of a transaction.
// NS_ENUM
#[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct SKPaymentTransactionState(pub NSInteger);
impl SKPaymentTransactionState {
    /// A transaction that is being processed by the App Store.
    #[doc(alias = "SKPaymentTransactionStatePurchasing")]
    #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
    pub const Purchasing: Self = Self(0);
    /// A successfully processed transaction.
    ///
    /// ## Discussion
    ///
    /// Your application should provide the content the user purchased.
    ///
    ///
    #[doc(alias = "SKPaymentTransactionStatePurchased")]
    #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
    pub const Purchased: Self = Self(1);
    /// A failed transaction.
    ///
    /// ## Discussion
    ///
    /// Check the [`error`](https://developer.apple.com/documentation/storekit/skpaymenttransaction/error) property to determine what happened.
    ///
    ///
    #[doc(alias = "SKPaymentTransactionStateFailed")]
    #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
    pub const Failed: Self = Self(2);
    /// A transaction that restores content previously purchased by the user.
    ///
    /// ## Discussion
    ///
    /// Read the [`originalTransaction`](https://developer.apple.com/documentation/storekit/skpaymenttransaction/original) property to obtain information about the original purchase.
    ///
    ///
    #[doc(alias = "SKPaymentTransactionStateRestored")]
    #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
    pub const Restored: Self = Self(3);
    /// A transaction that is in the queue, but its final status is pending external action such as Ask to Buy.
    ///
    /// ## Discussion
    ///
    /// Update your UI to show the deferred state, and wait for another callback that indicates the final status.
    ///
    ///
    #[doc(alias = "SKPaymentTransactionStateDeferred")]
    #[deprecated = "Use PurchaseResult.pending from Product.purchase(confirmIn:options:)"]
    pub const Deferred: Self = Self(4);
}

unsafe impl Encode for SKPaymentTransactionState {
    const ENCODING: Encoding = NSInteger::ENCODING;
}

unsafe impl RefEncode for SKPaymentTransactionState {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_class!(
    /// An object in the payment queue.
    ///
    /// ## Overview
    ///
    /// A payment transaction is created whenever a payment is added to the payment queue. The system delivers transactions to your app when the App Store finishes processing the payment. Completed transactions provide a receipt and transaction identifier that your app can use to save a permanent record of the processed payment.
    ///
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
    pub struct SKPaymentTransaction;
);

unsafe impl Send for SKPaymentTransaction {}

unsafe impl Sync for SKPaymentTransaction {}

extern_conformance!(
    unsafe impl NSObjectProtocol for SKPaymentTransaction {}
);

impl SKPaymentTransaction {
    extern_methods!(
        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
        #[unsafe(method(error))]
        #[unsafe(method_family = none)]
        pub unsafe fn error(&self) -> Option<Retained<NSError>>;

        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
        #[unsafe(method(originalTransaction))]
        #[unsafe(method_family = none)]
        pub unsafe fn originalTransaction(&self) -> Option<Retained<SKPaymentTransaction>>;

        #[cfg(feature = "SKPayment")]
        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
        #[unsafe(method(payment))]
        #[unsafe(method_family = none)]
        pub unsafe fn payment(&self) -> Retained<SKPayment>;

        #[cfg(feature = "SKDownload")]
        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(downloads))]
        #[unsafe(method_family = none)]
        pub unsafe fn downloads(&self) -> Retained<NSArray<SKDownload>>;

        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
        #[unsafe(method(transactionDate))]
        #[unsafe(method_family = none)]
        pub unsafe fn transactionDate(&self) -> Option<Retained<NSDate>>;

        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
        #[unsafe(method(transactionIdentifier))]
        #[unsafe(method_family = none)]
        pub unsafe fn transactionIdentifier(&self) -> Option<Retained<NSString>>;

        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated]
        #[unsafe(method(transactionReceipt))]
        #[unsafe(method_family = none)]
        pub unsafe fn transactionReceipt(&self) -> Option<Retained<NSData>>;

        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated = "Use PurchaseResult from Product.purchase(confirmIn:options:)"]
        #[unsafe(method(transactionState))]
        #[unsafe(method_family = none)]
        pub unsafe fn transactionState(&self) -> SKPaymentTransactionState;
    );
}

/// Methods declared on superclass `NSObject`.
impl SKPaymentTransaction {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
