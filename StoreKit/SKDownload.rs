//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// The states that a download operation can be in.
// NS_CLOSED_ENUM
#[deprecated = "Hosted content is no longer supported"]
#[repr(isize)] // NSInteger
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub enum SKDownloadState {
    /// Indicates that the download has not started yet.
    #[doc(alias = "SKDownloadStateWaiting")]
    #[deprecated = "Hosted content is no longer supported"]
    #[default]
    Waiting = 0,
    /// Indicates that the content is currently being downloaded.
    #[doc(alias = "SKDownloadStateActive")]
    #[deprecated = "Hosted content is no longer supported"]
    Active = 1,
    /// Indicates that your app paused the download.
    #[doc(alias = "SKDownloadStatePaused")]
    #[deprecated = "Hosted content is no longer supported"]
    Paused = 2,
    /// Indicates that the content was successfully downloaded.
    #[doc(alias = "SKDownloadStateFinished")]
    #[deprecated = "Hosted content is no longer supported"]
    Finished = 3,
    /// Indicates that an error occurred while the file was being downloaded.
    #[doc(alias = "SKDownloadStateFailed")]
    #[deprecated = "Hosted content is no longer supported"]
    Failed = 4,
    /// Indicates that your app canceled the download.
    #[doc(alias = "SKDownloadStateCancelled")]
    #[deprecated = "Hosted content is no longer supported"]
    Cancelled = 5,
}

unsafe impl Encode for SKDownloadState {
    const ENCODING: Encoding = NSInteger::ENCODING;
}

unsafe impl RefEncode for SKDownloadState {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern "C" {
    /// Indicates that the system cannot determine how much time is needed to finish downloading the content.
    #[deprecated = "Hosted content is no longer supported"]
    pub static SKDownloadTimeRemainingUnknown: NSTimeInterval;
}

extern_class!(
    /// Downloadable content associated with a product.
    ///
    /// ## Overview
    ///
    /// When you create a product in App Store Connect, you can associate one or more pieces of downloadable content with it. At runtime, when a product is purchased by a user, your app uses [`SKDownload`](https://developer.apple.com/documentation/storekit/skdownload) objects to download the content from the App Store.
    ///
    /// Your app never directly creates a [`SKDownload`](https://developer.apple.com/documentation/storekit/skdownload) object. Instead, after a payment is processed, your app reads the transaction object’s [`downloads`](https://developer.apple.com/documentation/storekit/skpaymenttransaction/downloads) property to retrieve an array of [`SKDownload`](https://developer.apple.com/documentation/storekit/skdownload) objects associated with the transaction.
    ///
    /// To download the content, you queue a download object on the payment queue and wait for the content to be downloaded. After a download completes, read the download object’s [`contentURL`](https://developer.apple.com/documentation/storekit/skdownload/contenturl) property to get a URL to the downloaded content. Your app must process the downloaded file before completing the transaction. For example, it might copy the file into a directory whose contents are persistent. When all downloads are complete, you finish the transaction. After the transaction is finished, the download objects cannot be queued to the payment queue and any URLs to the downloaded content are invalid.
    ///
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[deprecated = "Hosted content is no longer supported"]
    pub struct SKDownload;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for SKDownload {}
);

impl SKDownload {
    extern_methods!(
        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(state))]
        #[unsafe(method_family = none)]
        pub unsafe fn state(&self) -> SKDownloadState;

        #[deprecated]
        #[unsafe(method(downloadState))]
        #[unsafe(method_family = none)]
        pub unsafe fn downloadState(&self) -> SKDownloadState;

        #[deprecated]
        #[unsafe(method(contentLength))]
        #[unsafe(method_family = none)]
        pub unsafe fn contentLength(&self) -> Retained<NSNumber>;

        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(expectedContentLength))]
        #[unsafe(method_family = none)]
        pub unsafe fn expectedContentLength(&self) -> c_longlong;

        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(contentIdentifier))]
        #[unsafe(method_family = none)]
        pub unsafe fn contentIdentifier(&self) -> Retained<NSString>;

        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(contentURL))]
        #[unsafe(method_family = none)]
        pub unsafe fn contentURL(&self) -> Option<Retained<NSURL>>;

        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(contentVersion))]
        #[unsafe(method_family = none)]
        pub unsafe fn contentVersion(&self) -> Retained<NSString>;

        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(error))]
        #[unsafe(method_family = none)]
        pub unsafe fn error(&self) -> Option<Retained<NSError>>;

        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(progress))]
        #[unsafe(method_family = none)]
        pub unsafe fn progress(&self) -> c_float;

        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(timeRemaining))]
        #[unsafe(method_family = none)]
        pub unsafe fn timeRemaining(&self) -> NSTimeInterval;

        #[cfg(feature = "SKPaymentTransaction")]
        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(transaction))]
        #[unsafe(method_family = none)]
        pub unsafe fn transaction(&self) -> Retained<SKPaymentTransaction>;

        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(contentURLForProductID:))]
        #[unsafe(method_family = none)]
        pub unsafe fn contentURLForProductID(product_id: &NSString) -> Option<Retained<NSURL>>;

        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(deleteContentForProductID:))]
        #[unsafe(method_family = none)]
        pub unsafe fn deleteContentForProductID(product_id: &NSString);
    );
}

/// Methods declared on superclass `NSObject`.
impl SKDownload {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
