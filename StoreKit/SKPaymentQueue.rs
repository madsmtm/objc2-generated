//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// A queue of payment transactions for the App Store to process.
    ///
    /// ## Overview
    ///
    /// The payment queue communicates with the App Store and presents a user interface so that the user can authorize payment. The contents of the queue are persistent between launches of your app.
    ///
    /// To process a payment, first add at least one observer object ([`SKPaymentTransactionObserver`](https://developer.apple.com/documentation/storekit/skpaymenttransactionobserver)) to the queue (see [`addTransactionObserver:`](https://developer.apple.com/documentation/storekit/skpaymentqueue/add(_:)-5ciz2)). Then, add a payment object ([`SKPayment`](https://developer.apple.com/documentation/storekit/skpayment)) for the item the user wants to purchase. Each time you add a payment object, the queue creates a transaction object ([`SKPaymentTransaction`](https://developer.apple.com/documentation/storekit/skpaymenttransaction)) to process that payment and enqueues it to be processed. After payment is fulfilled, the queue updates the transaction object and then calls any observer objects to provide them the updated transaction. Your observer should process the transaction and then remove it from the queue.
    ///
    /// The exact mechanism you use to process a processed transaction depends on the design of your app and the product being purchased. Here are a few common examples:
    ///
    /// - If the product is a feature already built into your app, your app enables the feature to process the transaction.
    ///
    /// - If the product includes downloadable content provided by the App Store, your app retrieves the [`SKDownload`](https://developer.apple.com/documentation/storekit/skdownload) objects from the transaction and ask the payment queue to download them. You provide the actual content files to be served by the App Store to App Store Connect when you create the product information.
    ///
    /// - If the product represents downloadable content provided by your own server, your app might open a network connection to your server and download the content from there.
    ///
    /// For more information on designing the payment processing portion of your app, see [In-App Purchase Programming Guide](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction.html#//apple_ref/doc/uid/TP40008267).
    ///
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[deprecated = "No longer supported"]
    pub struct SKPaymentQueue;
);

unsafe impl Send for SKPaymentQueue {}

unsafe impl Sync for SKPaymentQueue {}

extern_conformance!(
    unsafe impl NSObjectProtocol for SKPaymentQueue {}
);

impl SKPaymentQueue {
    extern_methods!(
        #[deprecated = "No longer supported"]
        #[unsafe(method(delegate))]
        #[unsafe(method_family = none)]
        pub unsafe fn delegate(
            &self,
        ) -> Option<Retained<ProtocolObject<dyn SKPaymentQueueDelegate>>>;

        /// Setter for [`delegate`][Self::delegate].
        ///
        /// This is a [weak property][objc2::topics::weak_property].
        #[deprecated = "No longer supported"]
        #[unsafe(method(setDelegate:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setDelegate(
            &self,
            delegate: Option<&ProtocolObject<dyn SKPaymentQueueDelegate>>,
        );

        #[cfg(feature = "SKStorefront")]
        #[deprecated = "Use Storefront.current"]
        #[unsafe(method(storefront))]
        #[unsafe(method_family = none)]
        pub unsafe fn storefront(&self) -> Option<Retained<SKStorefront>>;

        #[deprecated = "No longer supported"]
        #[unsafe(method(defaultQueue))]
        #[unsafe(method_family = none)]
        pub unsafe fn defaultQueue() -> Retained<Self>;

        #[deprecated = "Use AppStore.canMakePayments"]
        #[unsafe(method(canMakePayments))]
        #[unsafe(method_family = none)]
        pub unsafe fn canMakePayments() -> bool;

        #[cfg(feature = "SKPayment")]
        #[deprecated = "Use Product.purchase(confirmIn:options:)"]
        #[unsafe(method(addPayment:))]
        #[unsafe(method_family = none)]
        pub unsafe fn addPayment(&self, payment: &SKPayment);

        #[deprecated = "Use AppStore.sync()"]
        #[unsafe(method(restoreCompletedTransactions))]
        #[unsafe(method_family = none)]
        pub unsafe fn restoreCompletedTransactions(&self);

        #[deprecated = "Use AppStore.sync()"]
        #[unsafe(method(restoreCompletedTransactionsWithApplicationUsername:))]
        #[unsafe(method_family = none)]
        pub unsafe fn restoreCompletedTransactionsWithApplicationUsername(
            &self,
            username: Option<&NSString>,
        );

        #[cfg(feature = "SKPaymentTransaction")]
        #[deprecated = "Use Transaction.finish()"]
        #[unsafe(method(finishTransaction:))]
        #[unsafe(method_family = none)]
        pub unsafe fn finishTransaction(&self, transaction: &SKPaymentTransaction);

        #[cfg(feature = "SKDownload")]
        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(startDownloads:))]
        #[unsafe(method_family = none)]
        pub unsafe fn startDownloads(&self, downloads: &NSArray<SKDownload>);

        #[cfg(feature = "SKDownload")]
        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(pauseDownloads:))]
        #[unsafe(method_family = none)]
        pub unsafe fn pauseDownloads(&self, downloads: &NSArray<SKDownload>);

        #[cfg(feature = "SKDownload")]
        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(resumeDownloads:))]
        #[unsafe(method_family = none)]
        pub unsafe fn resumeDownloads(&self, downloads: &NSArray<SKDownload>);

        #[cfg(feature = "SKDownload")]
        #[deprecated = "Hosted content is no longer supported"]
        #[unsafe(method(cancelDownloads:))]
        #[unsafe(method_family = none)]
        pub unsafe fn cancelDownloads(&self, downloads: &NSArray<SKDownload>);

        #[deprecated = "Use Transaction.updates or PurchaseResult from Product.purchase(confirmIn:options:)"]
        #[unsafe(method(addTransactionObserver:))]
        #[unsafe(method_family = none)]
        pub unsafe fn addTransactionObserver(
            &self,
            observer: &ProtocolObject<dyn SKPaymentTransactionObserver>,
        );

        #[deprecated = "No longer supported"]
        #[unsafe(method(removeTransactionObserver:))]
        #[unsafe(method_family = none)]
        pub unsafe fn removeTransactionObserver(
            &self,
            observer: &ProtocolObject<dyn SKPaymentTransactionObserver>,
        );

        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated = "Use Transaction.updates or PurchaseResult from Product.purchase(confirmIn:options:)"]
        #[unsafe(method(transactionObservers))]
        #[unsafe(method_family = none)]
        pub unsafe fn transactionObservers(
            &self,
        ) -> Retained<NSArray<ProtocolObject<dyn SKPaymentTransactionObserver>>>;

        #[cfg(feature = "SKPaymentTransaction")]
        /// This property is not atomic.
        ///
        /// # Safety
        ///
        /// This might not be thread-safe.
        #[deprecated = "Use Transaction.unfinished"]
        #[unsafe(method(transactions))]
        #[unsafe(method_family = none)]
        pub unsafe fn transactions(&self) -> Retained<NSArray<SKPaymentTransaction>>;

        #[deprecated = "Use Message.messages and Message.display(in:)"]
        #[unsafe(method(showPriceConsentIfNeeded))]
        #[unsafe(method_family = none)]
        pub unsafe fn showPriceConsentIfNeeded(&self);

        #[deprecated = "Use AppStore.presentOfferCodeRedeemSheet(in:)"]
        #[unsafe(method(presentCodeRedemptionSheet))]
        #[unsafe(method_family = none)]
        pub unsafe fn presentCodeRedemptionSheet(&self);
    );
}

/// Methods declared on superclass `NSObject`.
impl SKPaymentQueue {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}

extern_protocol!(
    /// The protocol that provides information needed to complete transactions.
    ///
    /// ## Overview
    ///
    /// This protocol includes a method that lets your app determine whether to continue a transaction if the customer’s App Store storefront changes.
    ///
    ///
    #[deprecated = "No longer supported"]
    pub unsafe trait SKPaymentQueueDelegate: NSObjectProtocol {
        #[cfg(all(feature = "SKPaymentTransaction", feature = "SKStorefront"))]
        #[deprecated = "Pass Product.PurchaseOption.onStorefrontChange(shouldContinuePurchase:) to product.purchase(options:)"]
        #[optional]
        #[unsafe(method(paymentQueue:shouldContinueTransaction:inStorefront:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueue_shouldContinueTransaction_inStorefront(
            &self,
            payment_queue: &SKPaymentQueue,
            transaction: &SKPaymentTransaction,
            new_storefront: &SKStorefront,
        ) -> bool;

        #[deprecated = "Use Message.messages and Message.display(in:)"]
        #[optional]
        #[unsafe(method(paymentQueueShouldShowPriceConsent:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueueShouldShowPriceConsent(&self, payment_queue: &SKPaymentQueue)
            -> bool;
    }
);

extern_protocol!(
    /// A set of methods that process transactions, unlock purchased functionality, and continue promoted In-App Purchases.
    ///
    /// ## Overview
    ///
    /// Observers of [`SKPaymentQueue`](https://developer.apple.com/documentation/storekit/skpaymentqueue) objects implement the methods of this protocol.
    ///
    /// The system calls an observer when the queue updates or removes transactions. An observer needs to process all successful transactions, unlock the functionality the user purchases, and then finish the transaction by calling the payment queue’s [`finishTransaction:`](https://developer.apple.com/documentation/storekit/skpaymentqueue/finishtransaction(_:)) method.
    ///
    ///
    #[deprecated = "Use StoreKit 2 Transaction APIs"]
    pub unsafe trait SKPaymentTransactionObserver: NSObjectProtocol {
        #[cfg(feature = "SKPaymentTransaction")]
        #[deprecated = "Use StoreKit 2 Transaction APIs"]
        #[unsafe(method(paymentQueue:updatedTransactions:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueue_updatedTransactions(
            &self,
            queue: &SKPaymentQueue,
            transactions: &NSArray<SKPaymentTransaction>,
        );

        #[cfg(feature = "SKPaymentTransaction")]
        #[deprecated = "Use StoreKit 2 Transaction APIs"]
        #[optional]
        #[unsafe(method(paymentQueue:removedTransactions:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueue_removedTransactions(
            &self,
            queue: &SKPaymentQueue,
            transactions: &NSArray<SKPaymentTransaction>,
        );

        #[deprecated = "Use AppStore.sync()"]
        #[optional]
        #[unsafe(method(paymentQueue:restoreCompletedTransactionsFailedWithError:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueue_restoreCompletedTransactionsFailedWithError(
            &self,
            queue: &SKPaymentQueue,
            error: &NSError,
        );

        #[deprecated = "Use AppStore.sync()"]
        #[optional]
        #[unsafe(method(paymentQueueRestoreCompletedTransactionsFinished:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueueRestoreCompletedTransactionsFinished(&self, queue: &SKPaymentQueue);

        #[cfg(feature = "SKDownload")]
        #[deprecated = "Hosted content is no longer supported"]
        #[optional]
        #[unsafe(method(paymentQueue:updatedDownloads:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueue_updatedDownloads(
            &self,
            queue: &SKPaymentQueue,
            downloads: &NSArray<SKDownload>,
        );

        #[cfg(all(feature = "SKPayment", feature = "SKProduct"))]
        #[deprecated = "Use PurchaseIntent.intents"]
        #[optional]
        #[unsafe(method(paymentQueue:shouldAddStorePayment:forProduct:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueue_shouldAddStorePayment_forProduct(
            &self,
            queue: &SKPaymentQueue,
            payment: &SKPayment,
            product: &SKProduct,
        ) -> bool;

        #[deprecated = "Use Storefront.updates"]
        #[optional]
        #[unsafe(method(paymentQueueDidChangeStorefront:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueueDidChangeStorefront(&self, queue: &SKPaymentQueue);

        #[deprecated = "Use Transaction.updates"]
        #[optional]
        #[unsafe(method(paymentQueue:didRevokeEntitlementsForProductIdentifiers:))]
        #[unsafe(method_family = none)]
        unsafe fn paymentQueue_didRevokeEntitlementsForProductIdentifiers(
            &self,
            queue: &SKPaymentQueue,
            product_identifiers: &NSArray<NSString>,
        );
    }
);
