//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_app_kit::*;
use objc2_foundation::*;
#[cfg(feature = "objc2-security")]
use objc2_security::*;
#[cfg(feature = "objc2-security-foundation")]
use objc2_security_foundation::*;

use crate::*;

/// Defines the current state of the authorization view.
///
/// ## Overview
///
/// These constants are described in Constants in [`SFAuthorizationView`](https://developer.apple.com/documentation/securityinterface/sfauthorizationview).
///
///
/// Defines the current state of the authorization view.
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct SFAuthorizationViewState(pub c_uint);
impl SFAuthorizationViewState {
    /// Indicates that the state is starting up
    #[doc(alias = "SFAuthorizationStartupState")]
    pub const StartupState: Self = Self(0);
    /// Indicates that the state is locked
    #[doc(alias = "SFAuthorizationViewLockedState")]
    pub const ViewLockedState: Self = Self(1);
    /// Indicates that the state is in progress
    #[doc(alias = "SFAuthorizationViewInProgressState")]
    pub const ViewInProgressState: Self = Self(2);
    /// Indicates that the state is unlocked
    #[doc(alias = "SFAuthorizationViewUnlockedState")]
    pub const ViewUnlockedState: Self = Self(3);
}

unsafe impl Encode for SFAuthorizationViewState {
    const ENCODING: Encoding = c_uint::ENCODING;
}

unsafe impl RefEncode for SFAuthorizationViewState {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern_class!(
    /// The class responsible for displaying a lock icon that can be used to indicate that a user interface has restricted access.
    ///
    /// ## Overview
    ///
    /// The lock appears locked when the user must be authorized and appears open when the user has been authorized. The closed and open lock icons of the authorization view are shown in the following figure.
    ///
    ///
    /// ![Authorization view lock icon](https://docs-assets.developer.apple.com/published/153dfdaab793afc67f163364d0c7cf69/media-1965610.gif)
    ///
    ///
    /// When you add an authorization view as a custom view to a window or dialog box, you must initialize it before it displays correctly. To initialize the view, use the [`setString:`](https://developer.apple.com/documentation/securityinterface/sfauthorizationview/setstring(_:)) method to create a default rights structure (containing a prompt string) or the [`setAuthorizationRights:`](https://developer.apple.com/documentation/securityinterface/sfauthorizationview/setauthorizationrights(_:)) method to specify a rights structure. You must also either specify automatic updates ([`setAutoupdate:`](https://developer.apple.com/documentation/securityinterface/sfauthorizationview/setautoupdate(_:)) or [`setAutoupdate:interval:`](https://developer.apple.com/documentation/securityinterface/sfauthorizationview/setautoupdate(_:interval:))) or perform a manual update ([`updateStatus:`](https://developer.apple.com/documentation/securityinterface/sfauthorizationview/updatestatus(_:))) to set the lock icon to its initial state.
    ///
    /// You can implement delegate methods that are invoked when the authorization view changes state. You can optionally implement the delegate methods to obtain the state of the authorization object when you are using an authorization view.
    ///
    /// When the user clicks a locked authorization view icon, the Security Server displays an authentication dialog (to request a user name and password, for example). When the user provides the requested credentials, the lock icon unlocks and the user is considered preauthorized to perform the functions specified by the authorization rights structure. You can call the [`updateStatus:`](https://developer.apple.com/documentation/securityinterface/sfauthorizationview/updatestatus(_:)) method to determine whether the user has been preauthorized: this method returns [`true`](https://developer.apple.com/documentation/swift/true) if the view is in the unlocked state, otherwise [`false`](https://developer.apple.com/documentation/swift/false). Before committing changes or performing actions that require authorization, you should check the userâ€™s authorization again, even if they are preauthorized.
    ///
    /// The default behavior of this view is to preauthorize rights; if this is not possible it unlocks and waits for authorization to be checked when explicitly required.
    ///
    ///
    #[unsafe(super(NSView, NSResponder, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct SFAuthorizationView;
);

extern_conformance!(
    unsafe impl NSAccessibility for SFAuthorizationView {}
);

extern_conformance!(
    unsafe impl NSAccessibilityElementProtocol for SFAuthorizationView {}
);

extern_conformance!(
    unsafe impl NSAnimatablePropertyContainer for SFAuthorizationView {}
);

extern_conformance!(
    unsafe impl NSAppearanceCustomization for SFAuthorizationView {}
);

extern_conformance!(
    unsafe impl NSCoding for SFAuthorizationView {}
);

extern_conformance!(
    unsafe impl NSDraggingDestination for SFAuthorizationView {}
);

extern_conformance!(
    unsafe impl NSObjectProtocol for SFAuthorizationView {}
);

extern_conformance!(
    unsafe impl NSUserInterfaceItemIdentification for SFAuthorizationView {}
);

impl SFAuthorizationView {
    extern_methods!(
        #[cfg(feature = "objc2-security")]
        /// A convenience method to specify an authorization rights set containing a single item with the name set to the specified string.
        ///
        /// Parameter `authorizationString`: Authorization string.
        ///
        /// # Safety
        ///
        /// `authorization_string` must be a valid pointer.
        #[unsafe(method(setString:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setString(&self, authorization_string: AuthorizationString);

        #[cfg(feature = "objc2-security")]
        /// Sets the authorization rights for this view.
        ///
        /// Parameter `authorizationRights`: Authorization rights.
        ///
        /// # Safety
        ///
        /// `authorization_rights` must be a valid pointer.
        #[unsafe(method(setAuthorizationRights:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setAuthorizationRights(
            &self,
            authorization_rights: *const AuthorizationRights,
        );

        #[cfg(feature = "objc2-security")]
        /// Returns the authorization rights for this view.
        #[unsafe(method(authorizationRights))]
        #[unsafe(method_family = none)]
        pub unsafe fn authorizationRights(&self) -> *mut AuthorizationRights;

        #[cfg(feature = "objc2-security-foundation")]
        /// Returns the authorization object associated with this view.
        #[unsafe(method(authorization))]
        #[unsafe(method_family = none)]
        pub unsafe fn authorization(&self) -> Option<Retained<SFAuthorization>>;

        /// This method is called when the state of the authorization object has changed.
        ///
        /// Parameter `inSender`: The action that is marked for updateStatus.
        ///
        /// # Safety
        ///
        /// - `in_sender` should be of the correct type.
        /// - `in_sender` might not allow `None`.
        #[unsafe(method(updateStatus:))]
        #[unsafe(method_family = none)]
        pub unsafe fn updateStatus(&self, in_sender: Option<&AnyObject>) -> bool;

        #[unsafe(method(setAutoupdate:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setAutoupdate(&self, autoupdate: bool);

        #[unsafe(method(setAutoupdate:interval:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setAutoupdate_interval(&self, autoupdate: bool, interval: NSTimeInterval);

        /// Returns the current state of the authorization view.
        #[unsafe(method(authorizationState))]
        #[unsafe(method_family = none)]
        pub unsafe fn authorizationState(&self) -> SFAuthorizationViewState;

        /// Sets the current state of the authorization view.
        ///
        /// Parameter `enabled`: Enable flag.
        #[unsafe(method(setEnabled:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setEnabled(&self, enabled: bool);

        /// Indicates if the authorization view is enabled or disabled.
        #[unsafe(method(isEnabled))]
        #[unsafe(method_family = none)]
        pub unsafe fn isEnabled(&self) -> bool;

        #[cfg(feature = "objc2-security")]
        /// Sets the current authorization flags for the view.
        ///
        /// Parameter `flags`: Authorization flags.
        #[unsafe(method(setFlags:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setFlags(&self, flags: AuthorizationFlags);

        /// Sets the delegate for this authorization view. If you want to hear state changes (for example, the user clicked the button), set your delegate and implement the delegate methods mentioned for SFAuthorizationViewDelegate
        ///
        /// Parameter `delegate`: The client's delegate object.
        ///
        /// # Safety
        ///
        /// - `delegate` should be of the correct type.
        /// - `delegate` might not allow `None`.
        #[unsafe(method(setDelegate:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setDelegate(&self, delegate: Option<&AnyObject>);

        #[unsafe(method(delegate))]
        #[unsafe(method_family = none)]
        pub unsafe fn delegate(&self) -> Option<Retained<AnyObject>>;

        /// # Safety
        ///
        /// - `in_sender` should be of the correct type.
        /// - `in_sender` might not allow `None`.
        #[unsafe(method(authorize:))]
        #[unsafe(method_family = none)]
        pub unsafe fn authorize(&self, in_sender: Option<&AnyObject>) -> bool;

        /// # Safety
        ///
        /// - `in_sender` should be of the correct type.
        /// - `in_sender` might not allow `None`.
        #[unsafe(method(deauthorize:))]
        #[unsafe(method_family = none)]
        pub unsafe fn deauthorize(&self, in_sender: Option<&AnyObject>) -> bool;
    );
}

/// Methods declared on superclass `NSView`.
impl SFAuthorizationView {
    extern_methods!(
        #[unsafe(method(initWithFrame:))]
        #[unsafe(method_family = init)]
        pub unsafe fn initWithFrame(this: Allocated<Self>, frame_rect: NSRect) -> Retained<Self>;

        /// # Safety
        ///
        /// `coder` possibly has further requirements.
        #[unsafe(method(initWithCoder:))]
        #[unsafe(method_family = init)]
        pub unsafe fn initWithCoder(
            this: Allocated<Self>,
            coder: &NSCoder,
        ) -> Option<Retained<Self>>;
    );
}

/// Methods declared on superclass `NSResponder`.
impl SFAuthorizationView {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;
    );
}

/// Methods declared on superclass `NSObject`.
impl SFAuthorizationView {
    extern_methods!(
        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new(mtm: MainThreadMarker) -> Retained<Self>;
    );
}

mod private_NSObjectSFAuthorizationViewDelegate {
    pub trait Sealed {}
}

/// Category "SFAuthorizationViewDelegate" on [`NSObject`].
///
/// Optionally implement these delegate methods to obtain the state of the authorization object.
#[doc(alias = "SFAuthorizationViewDelegate")]
pub unsafe trait NSObjectSFAuthorizationViewDelegate:
    ClassType + Sized + private_NSObjectSFAuthorizationViewDelegate::Sealed
{
    extern_methods!(
        /// Parameter `view`:
        ///
        /// # Safety
        ///
        /// `view` might not allow `None`.
        #[unsafe(method(authorizationViewDidAuthorize:))]
        #[unsafe(method_family = none)]
        unsafe fn authorizationViewDidAuthorize(&self, view: Option<&SFAuthorizationView>);

        /// Parameter `view`:
        ///
        /// # Safety
        ///
        /// `view` might not allow `None`.
        #[unsafe(method(authorizationViewDidDeauthorize:))]
        #[unsafe(method_family = none)]
        unsafe fn authorizationViewDidDeauthorize(&self, view: Option<&SFAuthorizationView>);

        /// Parameter `view`:
        ///
        /// # Safety
        ///
        /// `view` might not allow `None`.
        #[unsafe(method(authorizationViewShouldDeauthorize:))]
        #[unsafe(method_family = none)]
        unsafe fn authorizationViewShouldDeauthorize(
            &self,
            view: Option<&SFAuthorizationView>,
        ) -> bool;

        /// Parameter `view`:
        ///
        /// # Safety
        ///
        /// `view` might not allow `None`.
        #[unsafe(method(authorizationViewCreatedAuthorization:))]
        #[unsafe(method_family = none)]
        unsafe fn authorizationViewCreatedAuthorization(&self, view: Option<&SFAuthorizationView>);

        /// Parameter `view`:
        ///
        /// # Safety
        ///
        /// `view` might not allow `None`.
        #[unsafe(method(authorizationViewReleasedAuthorization:))]
        #[unsafe(method_family = none)]
        unsafe fn authorizationViewReleasedAuthorization(&self, view: Option<&SFAuthorizationView>);

        /// Parameter `view`:
        ///
        /// # Safety
        ///
        /// `view` might not allow `None`.
        #[unsafe(method(authorizationViewDidHide:))]
        #[unsafe(method_family = none)]
        unsafe fn authorizationViewDidHide(&self, view: Option<&SFAuthorizationView>);
    );
}

impl private_NSObjectSFAuthorizationViewDelegate::Sealed for NSObject {}
unsafe impl NSObjectSFAuthorizationViewDelegate for NSObject {}
