//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// A block that reports the current motion associated with the device.
///
/// ## Discussion
///
/// This block takes the following parameter:
///
/// - `activity`: The motion activity object that defines the current type of motion for the device.
///
///
#[cfg(all(
    feature = "CMLogItem",
    feature = "CMMotionActivity",
    feature = "block2"
))]
pub type CMMotionActivityHandler = *mut block2::DynBlock<dyn Fn(*mut CMMotionActivity)>;

/// A block that reports the motion updates that occurred between the specified query interval.
///
/// ## Discussion
///
/// This block takes the following parameters:
///
/// - `activities`: An array of [`CMMotionActivity`](https://developer.apple.com/documentation/coremotion/cmmotionactivity) objects indicating the updates that occurred. The objects in the array are ordered by the time at which they occurred in the specified time interval. Use the [`startDate`](https://developer.apple.com/documentation/coremotion/cmmotionactivity/startdate) property in each motion object to determine when the update occurred.
///
/// - `error`: An error object indicating that there was a problem gathering the data or `nil` if the motion data was determined correctly.
///
///
#[cfg(all(
    feature = "CMLogItem",
    feature = "CMMotionActivity",
    feature = "block2"
))]
pub type CMMotionActivityQueryHandler =
    *mut block2::DynBlock<dyn Fn(*mut NSArray<CMMotionActivity>, *mut NSError)>;

extern_class!(
    /// An object that manages access to the motion data stored by the device.
    ///
    /// ## Overview
    ///
    /// Motion data reflects whether the user is walking, running, in a vehicle, or stationary for periods of time. Using this class, you can ask for notifications when the current type of motion changes or you can gather past motion change data. For example, a navigation app might look for changes in the current type of motion and offer different directions for each.
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  To use this API, you must include the [`NSMotionUsageDescription`](https://developer.apple.com/documentation/bundleresources/information-property-list/nsmotionusagedescription) key in your app’s `Info.plist` file and provide a usage description string for this key. The usage description appears in the prompt that the user must accept the first time the system asks the user to access motion data for your app. If you don’t include a usage description string, your app crashes when you call this API.
    ///
    ///
    ///
    /// </div>
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct CMMotionActivityManager;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for CMMotionActivityManager {}
);

impl CMMotionActivityManager {
    extern_methods!(
        #[unsafe(method(isActivityAvailable))]
        #[unsafe(method_family = none)]
        pub unsafe fn isActivityAvailable() -> bool;

        #[cfg(feature = "CMAuthorization")]
        #[unsafe(method(authorizationStatus))]
        #[unsafe(method_family = none)]
        pub unsafe fn authorizationStatus() -> CMAuthorizationStatus;

        #[cfg(all(
            feature = "CMLogItem",
            feature = "CMMotionActivity",
            feature = "block2"
        ))]
        /// # Safety
        ///
        /// - `queue` possibly has additional threading requirements.
        /// - `handler` must be a valid pointer.
        #[unsafe(method(queryActivityStartingFromDate:toDate:toQueue:withHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn queryActivityStartingFromDate_toDate_toQueue_withHandler(
            &self,
            start: &NSDate,
            end: &NSDate,
            queue: &NSOperationQueue,
            handler: CMMotionActivityQueryHandler,
        );

        #[cfg(all(
            feature = "CMLogItem",
            feature = "CMMotionActivity",
            feature = "block2"
        ))]
        /// # Safety
        ///
        /// - `queue` possibly has additional threading requirements.
        /// - `handler` must be a valid pointer.
        #[unsafe(method(startActivityUpdatesToQueue:withHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn startActivityUpdatesToQueue_withHandler(
            &self,
            queue: &NSOperationQueue,
            handler: CMMotionActivityHandler,
        );

        #[unsafe(method(stopActivityUpdates))]
        #[unsafe(method_family = none)]
        pub unsafe fn stopActivityUpdates(&self);
    );
}

/// Methods declared on superclass `NSObject`.
impl CMMotionActivityManager {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
