//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// Headphone connection status updates.
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct CMHeadphoneActivityStatus(pub NSInteger);
impl CMHeadphoneActivityStatus {
    /// The headphones disconnected.
    #[doc(alias = "CMHeadphoneActivityStatusDisconnected")]
    pub const Disconnected: Self = Self(0);
    /// A compatible set of headphones is connected.
    #[doc(alias = "CMHeadphoneActivityStatusConnected")]
    pub const Connected: Self = Self(1);
}

unsafe impl Encode for CMHeadphoneActivityStatus {
    const ENCODING: Encoding = NSInteger::ENCODING;
}

unsafe impl RefEncode for CMHeadphoneActivityStatus {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

/// The type for a handler to be invoked with status updates.
#[cfg(feature = "block2")]
pub type CMHeadphoneActivityStatusHandler =
    *mut block2::DynBlock<dyn Fn(CMHeadphoneActivityStatus, *mut NSError)>;

/// The type for a handler to be invoked when headphone motion activity data is available.
#[cfg(all(
    feature = "CMLogItem",
    feature = "CMMotionActivity",
    feature = "block2"
))]
pub type CMHeadphoneActivityHandler =
    *mut block2::DynBlock<dyn Fn(*mut CMMotionActivity, *mut NSError)>;

extern_class!(
    /// An object that starts and manages headphone activity services.
    ///
    /// ## Overview
    ///
    /// This class delivers headphone activity updates to your app. Use an instance of the manager to determine if the device supports headphone activity updates, and to start and stop updates. Before using this class, check [`activityAvailable`](https://developer.apple.com/documentation/coremotion/cmheadphoneactivitymanager/isactivityavailable) and [`statusAvailable`](https://developer.apple.com/documentation/coremotion/cmheadphoneactivitymanager/isstatusavailable) to make sure the features are available.
    ///
    /// This class provides similar information to [`CMMotionActivityManager`](https://developer.apple.com/documentation/coremotion/cmmotionactivitymanager), except the activity information comes from headphone motion, rather than from device motion.
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  In iOS and macOS, include the [`NSMotionUsageDescription`](https://developer.apple.com/documentation/bundleresources/information-property-list/nsmotionusagedescription) key in your appâ€™s `Info.plist` file. If this key is absent, trying to start headphone activity updates terminates your app.
    ///
    ///
    ///
    /// </div>
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct CMHeadphoneActivityManager;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for CMHeadphoneActivityManager {}
);

impl CMHeadphoneActivityManager {
    extern_methods!(
        #[cfg(feature = "CMAuthorization")]
        #[unsafe(method(authorizationStatus))]
        #[unsafe(method_family = none)]
        pub unsafe fn authorizationStatus() -> CMAuthorizationStatus;

        #[unsafe(method(isActivityAvailable))]
        #[unsafe(method_family = none)]
        pub unsafe fn isActivityAvailable(&self) -> bool;

        #[unsafe(method(isActivityActive))]
        #[unsafe(method_family = none)]
        pub unsafe fn isActivityActive(&self) -> bool;

        #[unsafe(method(isStatusAvailable))]
        #[unsafe(method_family = none)]
        pub unsafe fn isStatusAvailable(&self) -> bool;

        #[unsafe(method(isStatusActive))]
        #[unsafe(method_family = none)]
        pub unsafe fn isStatusActive(&self) -> bool;

        #[cfg(all(
            feature = "CMLogItem",
            feature = "CMMotionActivity",
            feature = "block2"
        ))]
        /// # Safety
        ///
        /// - `queue` possibly has additional threading requirements.
        /// - `handler` must be a valid pointer.
        #[unsafe(method(startActivityUpdatesToQueue:withHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn startActivityUpdatesToQueue_withHandler(
            &self,
            queue: &NSOperationQueue,
            handler: CMHeadphoneActivityHandler,
        );

        #[unsafe(method(stopActivityUpdates))]
        #[unsafe(method_family = none)]
        pub unsafe fn stopActivityUpdates(&self);

        #[cfg(feature = "block2")]
        /// # Safety
        ///
        /// - `queue` possibly has additional threading requirements.
        /// - `handler` must be a valid pointer.
        #[unsafe(method(startStatusUpdatesToQueue:withHandler:))]
        #[unsafe(method_family = none)]
        pub unsafe fn startStatusUpdatesToQueue_withHandler(
            &self,
            queue: &NSOperationQueue,
            handler: CMHeadphoneActivityStatusHandler,
        );

        #[unsafe(method(stopStatusUpdates))]
        #[unsafe(method_family = none)]
        pub unsafe fn stopStatusUpdates(&self);
    );
}

/// Methods declared on superclass `NSObject`.
impl CMHeadphoneActivityManager {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
