//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::cell::UnsafeCell;
use core::ffi::*;
use core::marker::{PhantomData, PhantomPinned};
use core::ptr::NonNull;
#[cfg(feature = "objc2")]
use objc2::__framework_prelude::*;
use objc2_core_foundation::*;

use crate::*;

/// The system failed to allocate memory.
pub const kCMSimpleQueueError_AllocationFailed: OSStatus = -12770;
/// You failed to pass a required parameter to a function.
pub const kCMSimpleQueueError_RequiredParameterMissing: OSStatus = -12771;
/// You passed a parameter to a function that’s outside the range of allowed values.
pub const kCMSimpleQueueError_ParameterOutOfRange: OSStatus = -12772;
/// An operation failed because the queue is full.
pub const kCMSimpleQueueError_QueueIsFull: OSStatus = -12773;

/// A reference to an instance that provides a simple lockless queue of elements.
/// A reference to a CMSimpleQueue, a CF object that implements a simple lockless queue of (void *) elements.
#[doc(alias = "CMSimpleQueueRef")]
#[repr(C)]
pub struct CMSimpleQueue {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

cf_type!(
    unsafe impl CMSimpleQueue {}
);
#[cfg(feature = "objc2")]
cf_objc2_type!(
    unsafe impl RefEncode<"opaqueCMSimpleQueue"> for CMSimpleQueue {}
);

unsafe impl ConcreteType for CMSimpleQueue {
    /// Returns the type identifier of sample buffer objects.
    ///
    /// ## Return Value
    ///
    /// `CFTypeID` of `CMSimpleQueue` objects.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// You can check if a `CFTypeRef` object is a `CMSimpleQueue` object by comparing `CFGetTypeID(object)` with `CMSimpleQueueGetTypeID()`.
    ///
    ///
    /// Returns the CFTypeID of CMSimpleQueue objects.
    ///
    /// You can check if a CFTypeRef object is actually a CMSimpleQueue by comparing CFGetTypeID(object)
    /// with CMSimpleQueueGetTypeID().
    ///
    /// Returns: CFTypeID of CMSimpleQueue objects.
    #[doc(alias = "CMSimpleQueueGetTypeID")]
    #[inline]
    fn type_id() -> CFTypeID {
        extern "C-unwind" {
            fn CMSimpleQueueGetTypeID() -> CFTypeID;
        }
        unsafe { CMSimpleQueueGetTypeID() }
    }
}

impl CMSimpleQueue {
    /// Creates a queue that has the specified capacity.
    ///
    /// Parameters:
    /// - allocator: Allocator used to allocate storage for the queue.
    ///
    /// - capacity: Capacity of the queue (maximum number of elements holdable at any given time). Required (must not be `0`). Must be a positive value.
    ///
    /// - queueOut: On output, a reference to the newly created queue. Must not be `NULL`.
    ///
    ///
    /// ## Return Value
    ///
    /// A result code. See [Simple Queue Error Codes](https://developer.apple.com/documentation/coremedia/simple-queue-errors).
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// On return, the caller owns the returned `CMSimpleQueue`, and must release it when done with it.
    ///
    ///
    /// Creates a CMSimpleQueue.
    ///
    /// On return, the caller owns the returned CMSimpleQueue, and must release it when done with it.
    ///
    /// Returns: Returns noErr if the call succeeds.  Returns kCMSimpleQueueError_ParameterOutOfRange if
    /// capacity is negative.
    ///
    /// # Safety
    ///
    /// `queue_out` must be a valid pointer.
    #[doc(alias = "CMSimpleQueueCreate")]
    #[inline]
    pub unsafe fn create(
        allocator: Option<&CFAllocator>,
        capacity: i32,
        queue_out: NonNull<*mut CMSimpleQueue>,
    ) -> OSStatus {
        extern "C-unwind" {
            fn CMSimpleQueueCreate(
                allocator: Option<&CFAllocator>,
                capacity: i32,
                queue_out: NonNull<*mut CMSimpleQueue>,
            ) -> OSStatus;
        }
        unsafe { CMSimpleQueueCreate(allocator, capacity, queue_out) }
    }

    /// Enqueues an element in the queue.
    ///
    /// Parameters:
    /// - queue: The queue on which to enqueue the element. Must not be `NULL`.
    ///
    /// - element: Element to enqueue. Must not be `NULL` (`CMSimpleQueueDequeue` returns `NULL` to indicate an empty queue).
    ///
    ///
    /// ## Return Value
    ///
    /// Returns `noErr` if the call succeeds or `kCMSimpleQueueError_QueueIsFull` if the queue is full.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// If the queue is full, this operation fails.
    ///
    ///
    /// Enqueues an element on the queue.
    ///
    /// If the queue is full, this operation will fail.
    ///
    /// Returns: Returns noErr if the call succeeds, kCMSimpleQueueError_QueueIsFull if the queue is full.
    ///
    /// # Safety
    ///
    /// `element` must be a valid pointer.
    #[doc(alias = "CMSimpleQueueEnqueue")]
    #[inline]
    pub unsafe fn enqueue(&self, element: NonNull<c_void>) -> OSStatus {
        extern "C-unwind" {
            fn CMSimpleQueueEnqueue(queue: &CMSimpleQueue, element: NonNull<c_void>) -> OSStatus;
        }
        unsafe { CMSimpleQueueEnqueue(self, element) }
    }

    /// Dequeues an element from the queue.
    ///
    /// Parameters:
    /// - queue: The queue from which to dequeue an element. Must not be `NULL`.
    ///
    ///
    /// ## Return Value
    ///
    /// The dequeued element.  `NULL` if the queue was empty, or if there was some other error.
    ///
    ///
    /// Dequeues an element from the queue.
    ///
    /// If the queue is empty, NULL will be returned.
    ///
    /// Returns: The dequeued element.  NULL if the queue was empty, or if there was some other error.
    #[doc(alias = "CMSimpleQueueDequeue")]
    #[inline]
    pub unsafe fn dequeue(&self) -> *const c_void {
        extern "C-unwind" {
            fn CMSimpleQueueDequeue(queue: &CMSimpleQueue) -> *const c_void;
        }
        unsafe { CMSimpleQueueDequeue(self) }
    }

    /// Returns the element at the head of the queue.
    ///
    /// Parameters:
    /// - queue: The queue from which to get the head element. Must not be `NULL`.
    ///
    ///
    /// ## Return Value
    ///
    /// The head element.  `NULL` if the queue was empty, or if there was some other error.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// If the queue is empty, the function returns `NULL`.
    ///
    ///
    /// Returns the element at the head of the queue.
    ///
    /// If the queue is empty, NULL will be returned.
    ///
    /// Returns: The head element.  NULL if the queue was empty, or if there was some other error.
    #[doc(alias = "CMSimpleQueueGetHead")]
    #[inline]
    pub unsafe fn head(&self) -> *const c_void {
        extern "C-unwind" {
            fn CMSimpleQueueGetHead(queue: &CMSimpleQueue) -> *const c_void;
        }
        unsafe { CMSimpleQueueGetHead(self) }
    }

    /// Resets the queue.
    ///
    /// Parameters:
    /// - queue: The queue to reset. Must not be `NULL`.
    ///
    ///
    /// ## Return Value
    ///
    /// Returns `noErr` if the call succeeds.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// This function resets the queue to an empty state. `CMSimpleQueueReset` isn’t synchronized in any way, so the client must hold off the reader thread and writer thread during this operation.
    ///
    ///
    /// Resets the queue.
    ///
    /// This function resets the queue to its empty state;  all values
    /// in the queue prior to reset are lost.   Note that CMSimpleQueueReset
    /// is not synchronized in any way, so the reader thread and writer thread
    /// must be held off by the client during this operation.
    ///
    /// Returns: Returns noErr if the call succeeds.
    #[doc(alias = "CMSimpleQueueReset")]
    #[inline]
    pub unsafe fn reset(&self) -> OSStatus {
        extern "C-unwind" {
            fn CMSimpleQueueReset(queue: &CMSimpleQueue) -> OSStatus;
        }
        unsafe { CMSimpleQueueReset(self) }
    }

    /// Returns the number of elements that the queue can hold.
    ///
    /// Parameters:
    /// - queue: The queue the function is interrogating. Must not be `NULL`.
    ///
    ///
    /// ## Return Value
    ///
    /// The number of elements that the queue can hold. Returns `0` if there is an error.
    ///
    ///
    /// Returns the number of elements that can be held in the queue.
    ///
    /// Returns: The number of elements that can be held in the queue.  Returns
    /// 0 if there is an error.
    #[doc(alias = "CMSimpleQueueGetCapacity")]
    #[inline]
    pub unsafe fn capacity(&self) -> i32 {
        extern "C-unwind" {
            fn CMSimpleQueueGetCapacity(queue: &CMSimpleQueue) -> i32;
        }
        unsafe { CMSimpleQueueGetCapacity(self) }
    }

    /// Returns the number of elements currently in the queue.
    ///
    /// Parameters:
    /// - queue: The queue the function is interrogating. Must not be `NULL`.
    ///
    ///
    /// ## Return Value
    ///
    /// The number of elements currently in the queue. Returns `0` if there is an error.
    ///
    ///
    /// Returns the number of elements currently on the queue.
    ///
    /// Returns: The number of elements currently in the queue. Returns 0 if there is an error.
    #[doc(alias = "CMSimpleQueueGetCount")]
    #[inline]
    pub unsafe fn count(&self) -> i32 {
        extern "C-unwind" {
            fn CMSimpleQueueGetCount(queue: &CMSimpleQueue) -> i32;
        }
        unsafe { CMSimpleQueueGetCount(self) }
    }
}

extern "C-unwind" {
    #[deprecated = "renamed to `CMSimpleQueue::create`"]
    pub fn CMSimpleQueueCreate(
        allocator: Option<&CFAllocator>,
        capacity: i32,
        queue_out: NonNull<*mut CMSimpleQueue>,
    ) -> OSStatus;
}

extern "C-unwind" {
    #[deprecated = "renamed to `CMSimpleQueue::enqueue`"]
    pub fn CMSimpleQueueEnqueue(queue: &CMSimpleQueue, element: NonNull<c_void>) -> OSStatus;
}

extern "C-unwind" {
    #[deprecated = "renamed to `CMSimpleQueue::dequeue`"]
    pub fn CMSimpleQueueDequeue(queue: &CMSimpleQueue) -> *const c_void;
}

extern "C-unwind" {
    #[deprecated = "renamed to `CMSimpleQueue::head`"]
    pub fn CMSimpleQueueGetHead(queue: &CMSimpleQueue) -> *const c_void;
}

extern "C-unwind" {
    #[deprecated = "renamed to `CMSimpleQueue::reset`"]
    pub fn CMSimpleQueueReset(queue: &CMSimpleQueue) -> OSStatus;
}

extern "C-unwind" {
    #[deprecated = "renamed to `CMSimpleQueue::capacity`"]
    pub fn CMSimpleQueueGetCapacity(queue: &CMSimpleQueue) -> i32;
}

extern "C-unwind" {
    #[deprecated = "renamed to `CMSimpleQueue::count`"]
    pub fn CMSimpleQueueGetCount(queue: &CMSimpleQueue) -> i32;
}
