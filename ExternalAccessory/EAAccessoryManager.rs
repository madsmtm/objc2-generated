//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

/// The error codes that may be passed in an error object for the Bluetooth picker completion block.
// NS_ENUM
#[repr(transparent)]
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, PartialOrd, Ord, Default)]
pub struct EABluetoothAccessoryPickerErrorCode(pub NSInteger);
impl EABluetoothAccessoryPickerErrorCode {
    /// The specified accessory was already connected.
    #[doc(alias = "EABluetoothAccessoryPickerAlreadyConnected")]
    pub const AlreadyConnected: Self = Self(0);
    /// The specified accessory could not be found, perhaps because it was turned off prior to connection.
    #[doc(alias = "EABluetoothAccessoryPickerResultNotFound")]
    pub const ResultNotFound: Self = Self(1);
    /// The user canceled the picker alert.
    #[doc(alias = "EABluetoothAccessoryPickerResultCancelled")]
    pub const ResultCancelled: Self = Self(2);
    /// Selecting an accessory failed for an unknown reason.
    #[doc(alias = "EABluetoothAccessoryPickerResultFailed")]
    pub const ResultFailed: Self = Self(3);
}

unsafe impl Encode for EABluetoothAccessoryPickerErrorCode {
    const ENCODING: Encoding = NSInteger::ENCODING;
}

unsafe impl RefEncode for EABluetoothAccessoryPickerErrorCode {
    const ENCODING_REF: Encoding = Encoding::Pointer(&Self::ENCODING);
}

extern "C" {
    /// The domain for errors passed to a Bluetooth picker completion block.
    pub static EABluetoothAccessoryPickerErrorDomain: &'static NSString;
}

/// The completion block for the Bluetooth picker.
///
/// ## Discussion
///
/// You use this block to process results generated by the [`showBluetoothAccessoryPickerWithNameFilter:completion:`](https://developer.apple.com/documentation/externalaccessory/eaaccessorymanager/showbluetoothaccessorypicker(withnamefilter:completion:)) method. The block receives an [`NSError`](https://developer.apple.com/documentation/foundation/nserror) object as its only parameter. If no error occurred, this parameter is set to `nil`.
///
///
#[cfg(feature = "block2")]
pub type EABluetoothAccessoryPickerCompletion = *mut block2::DynBlock<dyn Fn(*mut NSError)>;

extern "C" {
    /// A notification that the system sends when an accessory becomes connected and available for your application to use.
    ///
    /// ## Discussion
    ///
    /// The notification object is the shared accessory manager. The `userInfo` dictionary contains an [`EAAccessoryKey`](https://developer.apple.com/documentation/externalaccessory/eaaccessorykey), whose value is an [`EAAccessory`](https://developer.apple.com/documentation/externalaccessory/eaaccessory) object representing the accessory that is now connected. If a Bluetooth accessory was selected by the user in the Bluetooth picker, this dictionary contains the [`EAAccessorySelectedKey`](https://developer.apple.com/documentation/externalaccessory/eaaccessoryselectedkey) key. Before delivery of this notification can occur, you must call the [`registerForLocalNotifications()`](https://developer.apple.com/documentation/externalaccessory/eaaccessorymanager/registerforlocalnotifications()) method to let the system know you are interested in receiving this notification.
    ///
    /// After receiving this notification, always check the [`protocolStrings`](https://developer.apple.com/documentation/externalaccessory/eaaccessory/protocolstrings) array of the newly connected accessory object to verify that the required protocol is present before trying to open a session. In some cases, the system may send the connection notification before authentication has completed, resulting in an empty [`protocolStrings`](https://developer.apple.com/documentation/externalaccessory/eaaccessory/protocolstrings) array and a subsequent disconnection message. If this happens, the system sends another connection message later, when authentication succeeds.
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  iPhone and iPad apps running on Macs with Apple silicon never receive this notification.
    ///
    ///
    ///
    /// </div>
    ///
    pub static EAAccessoryDidConnectNotification: &'static NSString;
}

extern "C" {
    /// A notification that is posted when an accessory is disconnected and no longer available for your application to use.
    ///
    /// ## Discussion
    ///
    /// The notification object is the shared accessory manager. The `userInfo` dictionary contains an [`EAAccessoryKey`](https://developer.apple.com/documentation/externalaccessory/eaaccessorykey), whose value is the [`EAAccessory`](https://developer.apple.com/documentation/externalaccessory/eaaccessory) object representing the accessory that was disconnected. Before delivery of this notification can occur, you must call the [`registerForLocalNotifications()`](https://developer.apple.com/documentation/externalaccessory/eaaccessorymanager/registerforlocalnotifications()) method to let the system know you are interested in receiving this notification.
    ///
    /// If your accessory manager has a delegate, the delegate can use the [`accessoryDidDisconnect(_:)`](https://developer.apple.com/documentation/externalaccessory/eaaccessorydelegate/accessorydiddisconnect(_:)) method to receive this notification instead.
    ///
    ///
    pub static EAAccessoryDidDisconnectNotification: &'static NSString;
}

extern "C" {
    /// A key that indicates the accessory object whose status changed.
    ///
    /// ## Discussion
    ///
    /// The [`EAAccessoryDidConnectNotification`](https://developer.apple.com/documentation/externalaccessory/eaaccessorydidconnectnotification) and [`EAAccessoryDidDisconnectNotification`](https://developer.apple.com/documentation/externalaccessory/eaaccessorydiddisconnectnotification) notifications contain this key in their userInfo dictionary. The value is an [`EAAccessory`](https://developer.apple.com/documentation/externalaccessory/eaaccessory) object.
    ///
    ///
    pub static EAAccessoryKey: &'static NSString;
}

extern "C" {
    /// A key that indicates the accessory object that the user selected.
    ///
    /// ## Discussion
    ///
    /// The value assigned to this key is the [`EAAccessory`](https://developer.apple.com/documentation/externalaccessory/eaaccessory) object that the user selected. This key is included in the info dictionary when the user pairs a Bluetooth accessory with the device using the Bluetooth picker.
    ///
    ///
    pub static EAAccessorySelectedKey: &'static NSString;
}

extern_class!(
    /// The object you use to identify connected accessories, and begin delivery of connection and disconnection notifications.
    ///
    /// ## Overview
    ///
    /// An [`EAAccessoryManager`](https://developer.apple.com/documentation/externalaccessory/eaaccessorymanager) object coordinates the attached accessories for an iOS-based device. Use the shared accessory manager to retrieve a list of connected accessories, and start and stop the delivery of connection and disconnection notifications.
    ///
    /// <div class="warning">
    ///
    /// ### Important
    ///  iPhone and iPad apps running on Macs with Apple silicon never receive connection notifications.
    ///
    ///
    ///
    /// </div>
    ///
    #[unsafe(super(NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct EAAccessoryManager;
);

extern_conformance!(
    unsafe impl NSObjectProtocol for EAAccessoryManager {}
);

impl EAAccessoryManager {
    extern_methods!(
        #[unsafe(method(sharedAccessoryManager))]
        #[unsafe(method_family = none)]
        pub unsafe fn sharedAccessoryManager() -> Retained<EAAccessoryManager>;

        #[cfg(feature = "block2")]
        /// # Safety
        ///
        /// `completion` must be a valid pointer or null.
        #[unsafe(method(showBluetoothAccessoryPickerWithNameFilter:completion:))]
        #[unsafe(method_family = none)]
        pub unsafe fn showBluetoothAccessoryPickerWithNameFilter_completion(
            &self,
            predicate: Option<&NSPredicate>,
            completion: EABluetoothAccessoryPickerCompletion,
        );

        #[unsafe(method(registerForLocalNotifications))]
        #[unsafe(method_family = none)]
        pub unsafe fn registerForLocalNotifications(&self);

        #[unsafe(method(unregisterForLocalNotifications))]
        #[unsafe(method_family = none)]
        pub unsafe fn unregisterForLocalNotifications(&self);

        #[cfg(feature = "EAAccessory")]
        #[unsafe(method(connectedAccessories))]
        #[unsafe(method_family = none)]
        pub unsafe fn connectedAccessories(&self) -> Retained<NSArray<EAAccessory>>;
    );
}

/// Methods declared on superclass `NSObject`.
impl EAAccessoryManager {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
