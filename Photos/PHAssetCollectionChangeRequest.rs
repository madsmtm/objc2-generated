//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
use objc2_foundation::*;

use crate::*;

extern_class!(
    /// A request to create, delete, or modify a Photos asset collection, for use in a photo library change block.
    ///
    /// ## Overview
    ///
    /// You use the [`PHAssetCollectionChangeRequest`](https://developer.apple.com/documentation/photos/phassetcollectionchangerequest) class to request changes for [`PHAssetCollection`](https://developer.apple.com/documentation/photos/phassetcollection) objects. To make changes to asset collections (such as user-created albums) in the Photos library, create a change request using the appropriate class method for the change you want to perform.
    ///
    /// - Call the [`creationRequestForAssetCollectionWithTitle:`](https://developer.apple.com/documentation/photos/phassetcollectionchangerequest/creationrequestforassetcollection(withtitle:)) method to create a new asset collection.
    ///
    /// - Call the [`deleteAssetCollections:`](https://developer.apple.com/documentation/photos/phassetcollectionchangerequest/deleteassetcollections(_:)) method to delete existing asset collections.
    ///
    /// - Call the [`changeRequestForAssetCollection:`](https://developer.apple.com/documentation/photos/phassetcollectionchangerequest/init(for:)) or [`changeRequestForAssetCollection:assets:`](https://developer.apple.com/documentation/photos/phassetcollectionchangerequest/init(for:assets:)) method to modify a collection’s metadata or list of member assets.
    ///
    /// Before creating a change request, use the [`canPerformEditOperation:`](https://developer.apple.com/documentation/photos/phcollection/canperform(_:)) method to verify that the collection allows the edit operation you’re requesting. If you attempt to perform an unsupported edit operation, Photos throws an exception.
    ///
    /// A change request for creating or modifying an asset collection works like a mutable version of the asset collection object. Use the change request’s properties and instance methods to request changes to the asset collection itself. For example, the following code removes an asset from an album.
    ///
    /// (TODO tabnav: TabNavigator { tabs: [TabItem { title: "Swift", content: [CodeListing { syntax: Some("swift"), code: ["PHPhotoLibrary.shared().performChanges {", "", "    let request = PHAssetCollectionChangeRequest(for: myAlbum,", "                                                 assets: albumAssetsFetchResult)", "    ", "    request!.removeAssets([asset] as NSFastEnumeration)", "", "} completionHandler: { success, error in", "    print(\"Finished removing the asset from the album. \\(success ? \"Success\" : String(describing: error))\")", "}"], metadata: None }] }, TabItem { title: "Objective-C", content: [CodeListing { syntax: Some("objc"), code: ["[[PHPhotoLibrary sharedPhotoLibrary] performChanges:^{", "        ", "    PHAssetCollectionChangeRequest *request =", "        [PHAssetCollectionChangeRequest changeRequestForAssetCollection:myAlbum", "                                                                 assets:albumAssetsFetchResult];", "        ", "    [request removeAssets:@[asset]];", "     ", "} completionHandler:^(BOOL success, NSError *error) {", "    NSLog(@\"Finished removing the asset from the album. %@\", (success ? @\"Success\" : error));", "}];"], metadata: None }] }] })
    /// After Photos runs the change block and calls your completion handler, the asset collection’s state reflects the changes you requested in the block.
    ///
    /// If you create or use a change request object outside a photo library change block, Photos raises an Objective-C exception. For details on change blocks, see [`PHPhotoLibrary`](https://developer.apple.com/documentation/photos/phphotolibrary).
    ///
    ///
    #[unsafe(super(PHChangeRequest, NSObject))]
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(feature = "PHChangeRequest")]
    pub struct PHAssetCollectionChangeRequest;
);

#[cfg(feature = "PHChangeRequest")]
extern_conformance!(
    unsafe impl NSObjectProtocol for PHAssetCollectionChangeRequest {}
);

#[cfg(feature = "PHChangeRequest")]
impl PHAssetCollectionChangeRequest {
    extern_methods!(
        #[unsafe(method(creationRequestForAssetCollectionWithTitle:))]
        #[unsafe(method_family = none)]
        pub unsafe fn creationRequestForAssetCollectionWithTitle(
            title: &NSString,
        ) -> Retained<Self>;

        #[cfg(feature = "PHObject")]
        #[unsafe(method(placeholderForCreatedAssetCollection))]
        #[unsafe(method_family = none)]
        pub unsafe fn placeholderForCreatedAssetCollection(&self) -> Retained<PHObjectPlaceholder>;

        /// # Safety
        ///
        /// `asset_collections` should be of the correct type.
        #[unsafe(method(deleteAssetCollections:))]
        #[unsafe(method_family = none)]
        pub unsafe fn deleteAssetCollections(
            asset_collections: &ProtocolObject<dyn NSFastEnumeration>,
        );

        #[cfg(all(feature = "PHCollection", feature = "PHObject"))]
        #[unsafe(method(changeRequestForAssetCollection:))]
        #[unsafe(method_family = none)]
        pub unsafe fn changeRequestForAssetCollection(
            asset_collection: &PHAssetCollection,
        ) -> Option<Retained<Self>>;

        #[cfg(all(
            feature = "PHAsset",
            feature = "PHCollection",
            feature = "PHFetchResult",
            feature = "PHObject"
        ))]
        #[unsafe(method(changeRequestForAssetCollection:assets:))]
        #[unsafe(method_family = none)]
        pub unsafe fn changeRequestForAssetCollection_assets(
            asset_collection: &PHAssetCollection,
            assets: Option<&PHFetchResult<PHAsset>>,
        ) -> Option<Retained<Self>>;

        #[unsafe(method(title))]
        #[unsafe(method_family = none)]
        pub unsafe fn title(&self) -> Retained<NSString>;

        /// Setter for [`title`][Self::title].
        #[unsafe(method(setTitle:))]
        #[unsafe(method_family = none)]
        pub unsafe fn setTitle(&self, title: &NSString);

        /// # Safety
        ///
        /// `assets` should be of the correct type.
        #[unsafe(method(addAssets:))]
        #[unsafe(method_family = none)]
        pub unsafe fn addAssets(&self, assets: &ProtocolObject<dyn NSFastEnumeration>);

        /// # Safety
        ///
        /// `assets` should be of the correct type.
        #[unsafe(method(insertAssets:atIndexes:))]
        #[unsafe(method_family = none)]
        pub unsafe fn insertAssets_atIndexes(
            &self,
            assets: &ProtocolObject<dyn NSFastEnumeration>,
            indexes: &NSIndexSet,
        );

        /// # Safety
        ///
        /// `assets` should be of the correct type.
        #[unsafe(method(removeAssets:))]
        #[unsafe(method_family = none)]
        pub unsafe fn removeAssets(&self, assets: &ProtocolObject<dyn NSFastEnumeration>);

        #[unsafe(method(removeAssetsAtIndexes:))]
        #[unsafe(method_family = none)]
        pub unsafe fn removeAssetsAtIndexes(&self, indexes: &NSIndexSet);

        /// # Safety
        ///
        /// `assets` should be of the correct type.
        #[unsafe(method(replaceAssetsAtIndexes:withAssets:))]
        #[unsafe(method_family = none)]
        pub unsafe fn replaceAssetsAtIndexes_withAssets(
            &self,
            indexes: &NSIndexSet,
            assets: &ProtocolObject<dyn NSFastEnumeration>,
        );

        #[unsafe(method(moveAssetsAtIndexes:toIndex:))]
        #[unsafe(method_family = none)]
        pub unsafe fn moveAssetsAtIndexes_toIndex(
            &self,
            from_indexes: &NSIndexSet,
            to_index: NSUInteger,
        );
    );
}

/// Methods declared on superclass `NSObject`.
#[cfg(feature = "PHChangeRequest")]
impl PHAssetCollectionChangeRequest {
    extern_methods!(
        #[unsafe(method(init))]
        #[unsafe(method_family = init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[unsafe(method(new))]
        #[unsafe(method_family = new)]
        pub unsafe fn new() -> Retained<Self>;
    );
}
