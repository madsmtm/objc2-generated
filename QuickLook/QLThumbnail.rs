//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::cell::UnsafeCell;
use core::ffi::*;
use core::marker::{PhantomData, PhantomPinned};
use core::ptr::NonNull;
#[cfg(feature = "dispatch2")]
use dispatch2::*;
#[cfg(feature = "objc2")]
use objc2::__framework_prelude::*;
use objc2_core_foundation::*;
#[cfg(feature = "objc2-core-graphics")]
use objc2_core_graphics::*;

use crate::*;

/// An opaque reference that represents a thumbnail object.
#[doc(alias = "QLThumbnailRef")]
#[repr(C)]
pub struct QLThumbnail {
    inner: [u8; 0],
    _p: UnsafeCell<PhantomData<(*const UnsafeCell<()>, PhantomPinned)>>,
}

cf_type!(
    unsafe impl QLThumbnail {}
);
#[cfg(feature = "objc2")]
cf_objc2_type!(
    unsafe impl RefEncode<"__QLThumbnail"> for QLThumbnail {}
);

unsafe impl ConcreteType for QLThumbnail {
    /// Returns the type identifier for the thumbnail’s opaque type.
    ///
    /// ## Return Value
    ///
    /// The type identifier for the thumbnail’s opaque type.
    ///
    ///
    #[doc(alias = "QLThumbnailGetTypeID")]
    #[inline]
    fn type_id() -> CFTypeID {
        extern "C-unwind" {
            fn QLThumbnailGetTypeID() -> CFTypeID;
        }
        unsafe { QLThumbnailGetTypeID() }
    }
}

impl QLThumbnail {
    /// Returns a thumbnail that’s generated in the background.
    ///
    /// Parameters:
    /// - allocator: The allocator to use to create the thumbnail.
    ///
    /// - url: The URL of the document that you want to request a thumbnail for.
    ///
    /// - maxThumbnailSize: The maximum size in points for the thumbnail image.
    ///
    /// - options: Optional hints for creating a thumbnail image. Available options are [`kQLThumbnailOptionScaleFactorKey`](https://developer.apple.com/documentation/quicklook/kqlthumbnailoptionscalefactorkey) and [`kQLThumbnailOptionIconModeKey`](https://developer.apple.com/documentation/quicklook/kqlthumbnailoptioniconmodekey).
    ///
    ///
    /// ## Return Value
    ///
    /// A generated thumbnail of the file at the provided `url`.
    ///
    ///
    ///
    /// # Safety
    ///
    /// - `allocator` might not allow `None`.
    /// - `url` might not allow `None`.
    /// - `options` generic must be of the correct type.
    /// - `options` generic must be of the correct type.
    /// - `options` might not allow `None`.
    #[doc(alias = "QLThumbnailCreate")]
    #[deprecated = "Use QLThumbnailGenerationRequest in QuickLookThumbnailing to generate thumbnails."]
    #[inline]
    pub unsafe fn new(
        allocator: Option<&CFAllocator>,
        url: Option<&CFURL>,
        max_thumbnail_size: CGSize,
        options: Option<&CFDictionary>,
    ) -> Option<CFRetained<QLThumbnail>> {
        extern "C-unwind" {
            fn QLThumbnailCreate(
                allocator: Option<&CFAllocator>,
                url: Option<&CFURL>,
                max_thumbnail_size: CGSize,
                options: Option<&CFDictionary>,
            ) -> Option<NonNull<QLThumbnail>>;
        }
        let ret = unsafe { QLThumbnailCreate(allocator, url, max_thumbnail_size, options) };
        ret.map(|ret| unsafe { CFRetained::from_raw(ret) })
    }

    /// Returns the URL of the document that you’re requesting a thumbnail for.
    ///
    /// Parameters:
    /// - thumbnail: The thumbnail to compute.
    ///
    ///
    /// ## Return Value
    ///
    /// The URL of the document that you’re requesting a thumbnail for.
    ///
    ///
    #[doc(alias = "QLThumbnailCopyDocumentURL")]
    #[deprecated = "Use QuickLookThumbnailing for thumbnails."]
    #[inline]
    pub unsafe fn document_url(&self) -> Option<CFRetained<CFURL>> {
        extern "C-unwind" {
            fn QLThumbnailCopyDocumentURL(thumbnail: &QLThumbnail) -> Option<NonNull<CFURL>>;
        }
        let ret = unsafe { QLThumbnailCopyDocumentURL(self) };
        ret.map(|ret| unsafe { CFRetained::from_raw(ret) })
    }

    /// Returns the maximum allowed size for the provided thumbnail image.
    ///
    /// Parameters:
    /// - thumbnail: A thumbnail image.
    ///
    ///
    /// ## Return Value
    ///
    /// The maximum allowed size, in points, for the thumbnail image.
    ///
    ///
    #[doc(alias = "QLThumbnailGetMaximumSize")]
    #[deprecated = "Use QLThumbnailGenerationRequest in QuickLookThumbnailing."]
    #[inline]
    pub unsafe fn maximum_size(&self) -> CGSize {
        extern "C-unwind" {
            fn QLThumbnailGetMaximumSize(thumbnail: &QLThumbnail) -> CGSize;
        }
        unsafe { QLThumbnailGetMaximumSize(self) }
    }

    /// Returns the options for the requested thumbnail.
    ///
    /// Parameters:
    /// - thumbnail: The thumbnail that you want to obtain options for.
    ///
    ///
    /// ## Return Value
    ///
    /// Options for the provided thumbnail.
    ///
    ///
    #[doc(alias = "QLThumbnailCopyOptions")]
    #[deprecated = "Use QuickLookThumbnailing for thumbnails."]
    #[inline]
    pub unsafe fn options(&self) -> Option<CFRetained<CFDictionary>> {
        extern "C-unwind" {
            fn QLThumbnailCopyOptions(thumbnail: &QLThumbnail) -> Option<NonNull<CFDictionary>>;
        }
        let ret = unsafe { QLThumbnailCopyOptions(self) };
        ret.map(|ret| unsafe { CFRetained::from_raw(ret) })
    }

    /// Creates a thumbnail in the background on the provided background queue.
    ///
    /// Parameters:
    /// - thumbnail: The thumbnail to compute.
    ///
    /// - queue: The queue that’s used to create the thumbnail.
    ///
    /// - completion: The completion block that’s called when the thumbnail is created. The completion block is always called, even if the thumbnail computation is canceled.
    ///
    ///
    /// # Safety
    ///
    /// - `queue` possibly has additional threading requirements.
    /// - `queue` might not allow `None`.
    /// - `completion` must be a valid pointer.
    #[doc(alias = "QLThumbnailDispatchAsync")]
    #[cfg(feature = "dispatch2")]
    #[deprecated = "Use QLThumbnailGenerator in QuickLookThumbnailing to generate thumbnails."]
    #[inline]
    pub unsafe fn dispatch_async(
        &self,
        queue: Option<&DispatchQueue>,
        completion: dispatch_block_t,
    ) {
        extern "C-unwind" {
            fn QLThumbnailDispatchAsync(
                thumbnail: &QLThumbnail,
                queue: Option<&DispatchQueue>,
                completion: dispatch_block_t,
            );
        }
        unsafe { QLThumbnailDispatchAsync(self, queue, completion) }
    }

    /// Returns a thumbnail image.
    ///
    /// Parameters:
    /// - thumbnail: The thumbnail to compute.
    ///
    ///
    /// ## Return Value
    ///
    /// A thumbnail image, or `NULL` if the Quick Look framework can’t create a thumbnail.
    ///
    ///
    ///
    /// ## Discussion
    ///
    /// If you call this function directly without using [`QLThumbnailDispatchAsync`](https://developer.apple.com/documentation/quicklook/qlthumbnaildispatchasync(_:_:_:)), this function blocks the calling thread until it finishes computing the thumbnail.
    ///
    ///
    #[doc(alias = "QLThumbnailCopyImage")]
    #[cfg(feature = "objc2-core-graphics")]
    #[deprecated = "Use QuickLookThumbnailing for thumbnails."]
    #[inline]
    pub unsafe fn image(&self) -> Option<CFRetained<CGImage>> {
        extern "C-unwind" {
            fn QLThumbnailCopyImage(thumbnail: &QLThumbnail) -> Option<NonNull<CGImage>>;
        }
        let ret = unsafe { QLThumbnailCopyImage(self) };
        ret.map(|ret| unsafe { CFRetained::from_raw(ret) })
    }

    /// Returns the rectangle of the provided thumbnail image that represents the content of the document.
    ///
    /// Parameters:
    /// - thumbnail: A thumbnail image.
    ///
    ///
    /// ## Return Value
    ///
    /// The effective rectangle of the thumbnail image that represents the content of the document. In icon mode, this is the part of the image without all the image decorations.
    ///
    ///
    #[doc(alias = "QLThumbnailGetContentRect")]
    #[deprecated = "Use QuickLookThumbnailing for thumbnails."]
    #[inline]
    pub unsafe fn content_rect(&self) -> CGRect {
        extern "C-unwind" {
            fn QLThumbnailGetContentRect(thumbnail: &QLThumbnail) -> CGRect;
        }
        unsafe { QLThumbnailGetContentRect(self) }
    }

    /// Cancels the computation of the thumbnail.
    ///
    /// Parameters:
    /// - thumbnail: The thumbnail to cancel.
    ///
    ///
    /// ## Discussion
    ///
    /// If you use [`QLThumbnailDispatchAsync`](https://developer.apple.com/documentation/quicklook/qlthumbnaildispatchasync(_:_:_:)) to request the thumbnail, calling this function invokes the completion callback of [`QLThumbnailDispatchAsync`](https://developer.apple.com/documentation/quicklook/qlthumbnaildispatchasync(_:_:_:)). If you use synchronous mode, [`QLThumbnailCopyImage`](https://developer.apple.com/documentation/quicklook/qlthumbnailcopyimage(_:)) returns `NULL` immediately.
    ///
    ///
    #[doc(alias = "QLThumbnailCancel")]
    #[deprecated = "Use [QLThumbnailGenerator cancelRequest:] in QuickLookThumbnailing."]
    #[inline]
    pub unsafe fn cancel(&self) {
        extern "C-unwind" {
            fn QLThumbnailCancel(thumbnail: &QLThumbnail);
        }
        unsafe { QLThumbnailCancel(self) }
    }

    /// Returns whether the creation of the thumbnail was canceled.
    ///
    /// Parameters:
    /// - thumbnail: The thumbnail to create.
    ///
    ///
    /// ## Return Value
    ///
    /// A `Boolean` value that indicates whether the creation of the thumbnail was canceled.
    ///
    ///
    #[doc(alias = "QLThumbnailIsCancelled")]
    #[deprecated = "Use QuickLookThumbnailing for thumbnails."]
    #[inline]
    pub unsafe fn is_cancelled(&self) -> bool {
        extern "C-unwind" {
            fn QLThumbnailIsCancelled(thumbnail: &QLThumbnail) -> Boolean;
        }
        let ret = unsafe { QLThumbnailIsCancelled(self) };
        ret != 0
    }
}

#[deprecated = "renamed to `QLThumbnail::new`"]
#[inline]
pub unsafe extern "C-unwind" fn QLThumbnailCreate(
    allocator: Option<&CFAllocator>,
    url: Option<&CFURL>,
    max_thumbnail_size: CGSize,
    options: Option<&CFDictionary>,
) -> Option<CFRetained<QLThumbnail>> {
    extern "C-unwind" {
        fn QLThumbnailCreate(
            allocator: Option<&CFAllocator>,
            url: Option<&CFURL>,
            max_thumbnail_size: CGSize,
            options: Option<&CFDictionary>,
        ) -> Option<NonNull<QLThumbnail>>;
    }
    let ret = unsafe { QLThumbnailCreate(allocator, url, max_thumbnail_size, options) };
    ret.map(|ret| unsafe { CFRetained::from_raw(ret) })
}

#[deprecated = "renamed to `QLThumbnail::document_url`"]
#[inline]
pub unsafe extern "C-unwind" fn QLThumbnailCopyDocumentURL(
    thumbnail: &QLThumbnail,
) -> Option<CFRetained<CFURL>> {
    extern "C-unwind" {
        fn QLThumbnailCopyDocumentURL(thumbnail: &QLThumbnail) -> Option<NonNull<CFURL>>;
    }
    let ret = unsafe { QLThumbnailCopyDocumentURL(thumbnail) };
    ret.map(|ret| unsafe { CFRetained::from_raw(ret) })
}

extern "C-unwind" {
    #[deprecated = "renamed to `QLThumbnail::maximum_size`"]
    pub fn QLThumbnailGetMaximumSize(thumbnail: &QLThumbnail) -> CGSize;
}

#[deprecated = "renamed to `QLThumbnail::options`"]
#[inline]
pub unsafe extern "C-unwind" fn QLThumbnailCopyOptions(
    thumbnail: &QLThumbnail,
) -> Option<CFRetained<CFDictionary>> {
    extern "C-unwind" {
        fn QLThumbnailCopyOptions(thumbnail: &QLThumbnail) -> Option<NonNull<CFDictionary>>;
    }
    let ret = unsafe { QLThumbnailCopyOptions(thumbnail) };
    ret.map(|ret| unsafe { CFRetained::from_raw(ret) })
}

extern "C-unwind" {
    #[cfg(feature = "dispatch2")]
    #[deprecated = "renamed to `QLThumbnail::dispatch_async`"]
    pub fn QLThumbnailDispatchAsync(
        thumbnail: &QLThumbnail,
        queue: Option<&DispatchQueue>,
        completion: dispatch_block_t,
    );
}

#[cfg(feature = "objc2-core-graphics")]
#[deprecated = "renamed to `QLThumbnail::image`"]
#[inline]
pub unsafe extern "C-unwind" fn QLThumbnailCopyImage(
    thumbnail: &QLThumbnail,
) -> Option<CFRetained<CGImage>> {
    extern "C-unwind" {
        fn QLThumbnailCopyImage(thumbnail: &QLThumbnail) -> Option<NonNull<CGImage>>;
    }
    let ret = unsafe { QLThumbnailCopyImage(thumbnail) };
    ret.map(|ret| unsafe { CFRetained::from_raw(ret) })
}

extern "C-unwind" {
    #[deprecated = "renamed to `QLThumbnail::content_rect`"]
    pub fn QLThumbnailGetContentRect(thumbnail: &QLThumbnail) -> CGRect;
}

extern "C-unwind" {
    #[deprecated = "renamed to `QLThumbnail::cancel`"]
    pub fn QLThumbnailCancel(thumbnail: &QLThumbnail);
}

#[deprecated = "renamed to `QLThumbnail::is_cancelled`"]
#[inline]
pub unsafe extern "C-unwind" fn QLThumbnailIsCancelled(thumbnail: &QLThumbnail) -> bool {
    extern "C-unwind" {
        fn QLThumbnailIsCancelled(thumbnail: &QLThumbnail) -> Boolean;
    }
    let ret = unsafe { QLThumbnailIsCancelled(thumbnail) };
    ret != 0
}
